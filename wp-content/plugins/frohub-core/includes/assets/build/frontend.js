import{r as c,_ as oe,a as Qe,p as bt,b as _e,c as se,d as ke,K as St,R as G,C as jt,e as et,f as he,g as ge,h as Ct,i as me,j as Nt,u as pe,k as wt,l as _t,m as Mt,n as $t,o as Dt,q as Ee,s as tt,t as kt,v as It,w as Et,x as Yt,y as At,z as Pt,A as Tt,B as Ye,D as Ft,E as Rt,F as Lt,G as t,H as ne,S as V,I as Fe,J as Ot}from"./assets/fetchData-Bu2Fg7x9.js";var nt=c.forwardRef(function(e,n){var a=e.prefixCls,s=e.style,d=e.className,g=e.duration,l=g===void 0?4.5:g,h=e.showProgress,j=e.pauseOnHover,S=j===void 0?!0:j,N=e.eventKey,C=e.content,M=e.closable,w=e.closeIcon,$=w===void 0?"x":w,b=e.props,p=e.onClick,D=e.onNoticeClose,P=e.times,k=e.hovering,F=c.useState(!1),T=oe(F,2),Y=T[0],z=T[1],I=c.useState(0),A=oe(I,2),E=A[0],v=A[1],O=c.useState(0),o=oe(O,2),i=o[0],u=o[1],r=k||Y,f=l>0&&h,m=function(){D(N)},y=function(H){(H.key==="Enter"||H.code==="Enter"||H.keyCode===St.ENTER)&&m()};c.useEffect(function(){if(!r&&l>0){var L=Date.now()-i,H=setTimeout(function(){m()},l*1e3-i);return function(){S&&clearTimeout(H),u(Date.now()-L)}}},[l,r,P]),c.useEffect(function(){if(!r&&f&&(S||i===0)){var L=performance.now(),H,q=function W(){cancelAnimationFrame(H),H=requestAnimationFrame(function(Z){var J=Z+i-L,U=Math.min(J/(l*1e3),1);v(U*100),U<1&&W()})};return q(),function(){S&&cancelAnimationFrame(H)}}},[l,i,r,f,P]);var x=c.useMemo(function(){return Qe(M)==="object"&&M!==null?M:M?{closeIcon:$}:{}},[M,$]),_=bt(x,!0),B=100-(!E||E<0?0:E>100?100:E),R="".concat(a,"-notice");return c.createElement("div",_e({},b,{ref:n,className:se(R,d,ke({},"".concat(R,"-closable"),M)),style:s,onMouseEnter:function(H){var q;z(!0),b==null||(q=b.onMouseEnter)===null||q===void 0||q.call(b,H)},onMouseLeave:function(H){var q;z(!1),b==null||(q=b.onMouseLeave)===null||q===void 0||q.call(b,H)},onClick:p}),c.createElement("div",{className:"".concat(R,"-content")},C),M&&c.createElement("a",_e({tabIndex:0,className:"".concat(R,"-close"),onKeyDown:y,"aria-label":"Close"},_,{onClick:function(H){H.preventDefault(),H.stopPropagation(),m()}}),x.closeIcon),f&&c.createElement("progress",{className:"".concat(R,"-progress"),max:"100",value:B},B+"%"))}),at=G.createContext({}),Bt=function(n){var a=n.children,s=n.classNames;return G.createElement(at.Provider,{value:{classNames:s}},a)},Re=8,Le=3,Oe=16,Ht=function(n){var a={offset:Re,threshold:Le,gap:Oe};if(n&&Qe(n)==="object"){var s,d,g;a.offset=(s=n.offset)!==null&&s!==void 0?s:Re,a.threshold=(d=n.threshold)!==null&&d!==void 0?d:Le,a.gap=(g=n.gap)!==null&&g!==void 0?g:Oe}return[!!n,a]},zt=["className","style","classNames","styles"],qt=function(n){var a=n.configList,s=n.placement,d=n.prefixCls,g=n.className,l=n.style,h=n.motion,j=n.onAllNoticeRemoved,S=n.onNoticeClose,N=n.stack,C=c.useContext(at),M=C.classNames,w=c.useRef({}),$=c.useState(null),b=oe($,2),p=b[0],D=b[1],P=c.useState([]),k=oe(P,2),F=k[0],T=k[1],Y=a.map(function(r){return{config:r,key:String(r.key)}}),z=Ht(N),I=oe(z,2),A=I[0],E=I[1],v=E.offset,O=E.threshold,o=E.gap,i=A&&(F.length>0||Y.length<=O),u=typeof h=="function"?h(s):h;return c.useEffect(function(){A&&F.length>1&&T(function(r){return r.filter(function(f){return Y.some(function(m){var y=m.key;return f===y})})})},[F,Y,A]),c.useEffect(function(){var r;if(A&&w.current[(r=Y[Y.length-1])===null||r===void 0?void 0:r.key]){var f;D(w.current[(f=Y[Y.length-1])===null||f===void 0?void 0:f.key])}},[Y,A]),G.createElement(jt,_e({key:s,className:se(d,"".concat(d,"-").concat(s),M==null?void 0:M.list,g,ke(ke({},"".concat(d,"-stack"),!!A),"".concat(d,"-stack-expanded"),i)),style:l,keys:Y,motionAppear:!0},u,{onAllRemoved:function(){j(s)}}),function(r,f){var m=r.config,y=r.className,x=r.style,_=r.index,B=m,R=B.key,L=B.times,H=String(R),q=m,W=q.className,Z=q.style,J=q.classNames,U=q.styles,Q=et(q,zt),ee=Y.findIndex(function(be){return be.key===H}),te={};if(A){var re=Y.length-1-(ee>-1?ee:_-1),ie=s==="top"||s==="bottom"?"-50%":"0";if(re>0){var ce,le,de;te.height=i?(ce=w.current[H])===null||ce===void 0?void 0:ce.offsetHeight:p==null?void 0:p.offsetHeight;for(var fe=0,ye=0;ye<re;ye++){var $e;fe+=(($e=w.current[Y[Y.length-1-ye].key])===null||$e===void 0?void 0:$e.offsetHeight)+o}var xt=(i?fe:re*v)*(s.startsWith("top")?1:-1),vt=!i&&p!==null&&p!==void 0&&p.offsetWidth&&(le=w.current[H])!==null&&le!==void 0&&le.offsetWidth?((p==null?void 0:p.offsetWidth)-v*2*(re<3?re:3))/((de=w.current[H])===null||de===void 0?void 0:de.offsetWidth):1;te.transform="translate3d(".concat(ie,", ").concat(xt,"px, 0) scaleX(").concat(vt,")")}else te.transform="translate3d(".concat(ie,", 0, 0)")}return G.createElement("div",{ref:f,className:se("".concat(d,"-notice-wrapper"),y,J==null?void 0:J.wrapper),style:he(he(he({},x),te),U==null?void 0:U.wrapper),onMouseEnter:function(){return T(function(ue){return ue.includes(H)?ue:[].concat(ge(ue),[H])})},onMouseLeave:function(){return T(function(ue){return ue.filter(function(yt){return yt!==H})})}},G.createElement(nt,_e({},Q,{ref:function(ue){ee>-1?w.current[H]=ue:delete w.current[H]},prefixCls:d,classNames:J,styles:U,className:se(W,M==null?void 0:M.notice),style:Z,times:L,key:R,eventKey:R,onNoticeClose:S,hovering:A&&F.length>0})))})},Ut=c.forwardRef(function(e,n){var a=e.prefixCls,s=a===void 0?"rc-notification":a,d=e.container,g=e.motion,l=e.maxCount,h=e.className,j=e.style,S=e.onAllRemoved,N=e.stack,C=e.renderNotifications,M=c.useState([]),w=oe(M,2),$=w[0],b=w[1],p=function(A){var E,v=$.find(function(O){return O.key===A});v==null||(E=v.onClose)===null||E===void 0||E.call(v),b(function(O){return O.filter(function(o){return o.key!==A})})};c.useImperativeHandle(n,function(){return{open:function(A){b(function(E){var v=ge(E),O=v.findIndex(function(u){return u.key===A.key}),o=he({},A);if(O>=0){var i;o.times=(((i=E[O])===null||i===void 0?void 0:i.times)||0)+1,v[O]=o}else o.times=0,v.push(o);return l>0&&v.length>l&&(v=v.slice(-l)),v})},close:function(A){p(A)},destroy:function(){b([])}}});var D=c.useState({}),P=oe(D,2),k=P[0],F=P[1];c.useEffect(function(){var I={};$.forEach(function(A){var E=A.placement,v=E===void 0?"topRight":E;v&&(I[v]=I[v]||[],I[v].push(A))}),Object.keys(k).forEach(function(A){I[A]=I[A]||[]}),F(I)},[$]);var T=function(A){F(function(E){var v=he({},E),O=v[A]||[];return O.length||delete v[A],v})},Y=c.useRef(!1);if(c.useEffect(function(){Object.keys(k).length>0?Y.current=!0:Y.current&&(S==null||S(),Y.current=!1)},[k]),!d)return null;var z=Object.keys(k);return Ct.createPortal(c.createElement(c.Fragment,null,z.map(function(I){var A=k[I],E=c.createElement(qt,{key:I,configList:A,placement:I,prefixCls:s,className:h==null?void 0:h(I),style:j==null?void 0:j(I),motion:g,onNoticeClose:p,onAllNoticeRemoved:T,stack:N});return C?C(E,{prefixCls:s,key:I}):E})),d)}),Wt=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],Gt=function(){return document.body},Be=0;function Kt(){for(var e={},n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return a.forEach(function(d){d&&Object.keys(d).forEach(function(g){var l=d[g];l!==void 0&&(e[g]=l)})}),e}function Vt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.getContainer,a=n===void 0?Gt:n,s=e.motion,d=e.prefixCls,g=e.maxCount,l=e.className,h=e.style,j=e.onAllRemoved,S=e.stack,N=e.renderNotifications,C=et(e,Wt),M=c.useState(),w=oe(M,2),$=w[0],b=w[1],p=c.useRef(),D=c.createElement(Ut,{container:$,ref:p,prefixCls:d,motion:s,maxCount:g,className:l,style:h,onAllRemoved:j,stack:S,renderNotifications:N}),P=c.useState([]),k=oe(P,2),F=k[0],T=k[1],Y=c.useMemo(function(){return{open:function(I){var A=Kt(C,I);(A.key===null||A.key===void 0)&&(A.key="rc-notification-".concat(Be),Be+=1),T(function(E){return[].concat(ge(E),[{type:"open",config:A}])})},close:function(I){T(function(A){return[].concat(ge(A),[{type:"close",key:I}])})},destroy:function(){T(function(I){return[].concat(ge(I),[{type:"destroy"}])})}}},[]);return c.useEffect(function(){b(a())}),c.useEffect(function(){p.current&&F.length&&(F.forEach(function(z){switch(z.type){case"open":p.current.open(z.config);break;case"close":p.current.close(z.key);break;case"destroy":p.current.destroy();break}}),T(function(z){return z.filter(function(I){return!F.includes(I)})}))},[F]),[Y,D]}const Jt=e=>{const{componentCls:n,notificationMarginEdge:a,animationMaxHeight:s}=e,d=`${n}-notice`,g=new me("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),l=new me("antNotificationTopFadeIn",{"0%":{top:-s,opacity:0},"100%":{top:0,opacity:1}}),h=new me("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(s).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),j=new me("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[n]:{[`&${n}-top, &${n}-bottom`]:{marginInline:0,[d]:{marginInline:"auto auto"}},[`&${n}-top`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:l}},[`&${n}-bottom`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:h}},[`&${n}-topRight, &${n}-bottomRight`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:g}},[`&${n}-topLeft, &${n}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:a,_skip_check_:!0},[d]:{marginInlineEnd:"auto",marginInlineStart:0},[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:j}}}}},Zt=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Xt={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},Qt=(e,n)=>{const{componentCls:a}=e;return{[`${a}-${n}`]:{[`&${a}-stack > ${a}-notice-wrapper`]:{[n.startsWith("top")?"top":"bottom"]:0,[Xt[n]]:{value:0,_skip_check_:!0}}}}},en=e=>{const n={};for(let a=1;a<e.notificationStackLayer;a++)n[`&:nth-last-child(${a+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},n)},tn=e=>{const n={};for(let a=1;a<e.notificationStackLayer;a++)n[`&:nth-last-child(${a+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},n)},nn=e=>{const{componentCls:n}=e;return Object.assign({[`${n}-stack`]:{[`& > ${n}-notice-wrapper`]:Object.assign({transition:`transform ${e.motionDurationSlow}, backdrop-filter 0s`,willChange:"transform, opacity",position:"absolute"},en(e))},[`${n}-stack:not(${n}-stack-expanded)`]:{[`& > ${n}-notice-wrapper`]:Object.assign({},tn(e))},[`${n}-stack${n}-stack-expanded`]:{[`& > ${n}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Zt.map(a=>Qt(e,a)).reduce((a,s)=>Object.assign(Object.assign({},a),s),{}))},st=e=>{const{iconCls:n,componentCls:a,boxShadow:s,fontSizeLG:d,notificationMarginBottom:g,borderRadiusLG:l,colorSuccess:h,colorInfo:j,colorWarning:S,colorError:N,colorTextHeading:C,notificationBg:M,notificationPadding:w,notificationMarginEdge:$,notificationProgressBg:b,notificationProgressHeight:p,fontSize:D,lineHeight:P,width:k,notificationIconSize:F,colorText:T}=e,Y=`${a}-notice`;return{position:"relative",marginBottom:g,marginInlineStart:"auto",background:M,borderRadius:l,boxShadow:s,[Y]:{padding:w,width:k,maxWidth:`calc(100vw - ${pe(e.calc($).mul(2).equal())})`,overflow:"hidden",lineHeight:P,wordWrap:"break-word"},[`${Y}-message`]:{marginBottom:e.marginXS,color:C,fontSize:d,lineHeight:e.lineHeightLG},[`${Y}-description`]:{fontSize:D,color:T},[`${Y}-closable ${Y}-message`]:{paddingInlineEnd:e.paddingLG},[`${Y}-with-icon ${Y}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(F).equal(),fontSize:d},[`${Y}-with-icon ${Y}-description`]:{marginInlineStart:e.calc(e.marginSM).add(F).equal(),fontSize:D},[`${Y}-icon`]:{position:"absolute",fontSize:F,lineHeight:1,[`&-success${n}`]:{color:h},[`&-info${n}`]:{color:j},[`&-warning${n}`]:{color:S},[`&-error${n}`]:{color:N}},[`${Y}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},wt(e)),[`${Y}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${pe(l)} * 2)`,left:{_skip_check_:!0,value:l},right:{_skip_check_:!0,value:l},bottom:0,blockSize:p,border:0,"&, &::-webkit-progress-bar":{borderRadius:l,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:b},"&::-webkit-progress-value":{borderRadius:l,background:b}},[`${Y}-btn`]:{float:"right",marginTop:e.marginSM}}},an=e=>{const{componentCls:n,notificationMarginBottom:a,notificationMarginEdge:s,motionDurationMid:d,motionEaseInOut:g}=e,l=`${n}-notice`,h=new me("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:a},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[n]:Object.assign(Object.assign({},_t(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:s,_skip_check_:!0},[`${n}-hook-holder`]:{position:"relative"},[`${n}-fade-appear-prepare`]:{opacity:"0 !important"},[`${n}-fade-enter, ${n}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:g,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${n}-fade-leave`]:{animationTimingFunction:g,animationFillMode:"both",animationDuration:d,animationPlayState:"paused"},[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationPlayState:"running"},[`${n}-fade-leave${n}-fade-leave-active`]:{animationName:h,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${l}-btn`]:{float:"left"}}})},{[n]:{[`${l}-wrapper`]:Object.assign({},st(e))}}]},rt=e=>({zIndexPopup:e.zIndexPopupBase+Mt+50,width:384}),ot=e=>{const n=e.paddingMD,a=e.paddingLG;return $t(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:n,notificationPaddingHorizontal:a,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${pe(e.paddingMD)} ${pe(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},it=Nt("Notification",e=>{const n=ot(e);return[an(n),Jt(n),nn(n)]},rt),sn=Dt(["Notification","PurePanel"],e=>{const n=`${e.componentCls}-notice`,a=ot(e);return{[`${n}-pure-panel`]:Object.assign(Object.assign({},st(a)),{width:a.width,maxWidth:`calc(100vw - ${pe(e.calc(a.notificationMarginEdge).mul(2).equal())})`,margin:0})}},rt);var rn=function(e,n){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,s=Object.getOwnPropertySymbols(e);d<s.length;d++)n.indexOf(s[d])<0&&Object.prototype.propertyIsEnumerable.call(e,s[d])&&(a[s[d]]=e[s[d]]);return a};function Ae(e,n){return n===null||n===!1?null:n||c.createElement(kt,{className:`${e}-close-icon`})}const on={success:It,info:Et,error:Yt,warning:At},ct=e=>{const{prefixCls:n,icon:a,type:s,message:d,description:g,btn:l,role:h="alert"}=e;let j=null;return a?j=c.createElement("span",{className:`${n}-icon`},a):s&&(j=c.createElement(on[s]||null,{className:se(`${n}-icon`,`${n}-icon-${s}`)})),c.createElement("div",{className:se({[`${n}-with-icon`]:j}),role:h},j,c.createElement("div",{className:`${n}-message`},d),c.createElement("div",{className:`${n}-description`},g),l&&c.createElement("div",{className:`${n}-btn`},l))},cn=e=>{const{prefixCls:n,className:a,icon:s,type:d,message:g,description:l,btn:h,closable:j=!0,closeIcon:S,className:N}=e,C=rn(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon","className"]),{getPrefixCls:M}=c.useContext(Ee),w=n||M("notification"),$=`${w}-notice`,b=tt(w),[p,D,P]=it(w,b);return p(c.createElement("div",{className:se(`${$}-pure-panel`,D,a,P,b)},c.createElement(sn,{prefixCls:w}),c.createElement(nt,Object.assign({},C,{prefixCls:w,eventKey:"pure",duration:null,closable:j,className:se({notificationClassName:N}),closeIcon:Ae(w,S),content:c.createElement(ct,{prefixCls:$,icon:s,type:d,message:g,description:l,btn:h})}))))};function ln(e,n,a){let s;switch(e){case"top":s={left:"50%",transform:"translateX(-50%)",right:"auto",top:n,bottom:"auto"};break;case"topLeft":s={left:0,top:n,bottom:"auto"};break;case"topRight":s={right:0,top:n,bottom:"auto"};break;case"bottom":s={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:a};break;case"bottomLeft":s={left:0,top:"auto",bottom:a};break;default:s={right:0,top:"auto",bottom:a};break}return s}function dn(e){return{motionName:`${e}-fade`}}function un(e,n,a){return typeof e<"u"?e:typeof(n==null?void 0:n.closeIcon)<"u"?n.closeIcon:a==null?void 0:a.closeIcon}var fn=function(e,n){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,s=Object.getOwnPropertySymbols(e);d<s.length;d++)n.indexOf(s[d])<0&&Object.prototype.propertyIsEnumerable.call(e,s[d])&&(a[s[d]]=e[s[d]]);return a};const He=24,mn=4.5,hn="topRight",gn=e=>{let{children:n,prefixCls:a}=e;const s=tt(a),[d,g,l]=it(a,s);return d(G.createElement(Bt,{classNames:{list:se(g,l,s)}},n))},pn=(e,n)=>{let{prefixCls:a,key:s}=n;return G.createElement(gn,{prefixCls:a,key:s},e)},xn=G.forwardRef((e,n)=>{const{top:a,bottom:s,prefixCls:d,getContainer:g,maxCount:l,rtl:h,onAllRemoved:j,stack:S,duration:N,pauseOnHover:C=!0,showProgress:M}=e,{getPrefixCls:w,getPopupContainer:$,notification:b,direction:p}=c.useContext(Ee),[,D]=Pt(),P=d||w("notification"),k=I=>ln(I,a??He,s??He),F=()=>se({[`${P}-rtl`]:h??p==="rtl"}),T=()=>dn(P),[Y,z]=Vt({prefixCls:P,style:k,className:F,motion:T,closable:!0,closeIcon:Ae(P),duration:N??mn,getContainer:()=>(g==null?void 0:g())||($==null?void 0:$())||document.body,maxCount:l,pauseOnHover:C,showProgress:M,onAllRemoved:j,renderNotifications:pn,stack:S===!1?!1:{threshold:typeof S=="object"?S==null?void 0:S.threshold:void 0,offset:8,gap:D.margin}});return G.useImperativeHandle(n,()=>Object.assign(Object.assign({},Y),{prefixCls:P,notification:b})),z});function lt(e){const n=G.useRef(null);return Tt(),[G.useMemo(()=>{const s=h=>{var j;if(!n.current)return;const{open:S,prefixCls:N,notification:C}=n.current,M=`${N}-notice`,{message:w,description:$,icon:b,type:p,btn:D,className:P,style:k,role:F="alert",closeIcon:T,closable:Y}=h,z=fn(h,["message","description","icon","type","btn","className","style","role","closeIcon","closable"]),I=Ae(M,un(T,e,C));return S(Object.assign(Object.assign({placement:(j=e==null?void 0:e.placement)!==null&&j!==void 0?j:hn},z),{content:G.createElement(ct,{prefixCls:M,icon:b,type:p,message:w,description:$,btn:D,role:F}),className:se(p&&`${M}-${p}`,P,C==null?void 0:C.className),style:Object.assign(Object.assign({},C==null?void 0:C.style),k),closeIcon:I,closable:Y??!!I}))},g={open:s,destroy:h=>{var j,S;h!==void 0?(j=n.current)===null||j===void 0||j.close(h):(S=n.current)===null||S===void 0||S.destroy()}};return["success","info","warning","error"].forEach(h=>{g[h]=j=>s(Object.assign(Object.assign({},j),{type:h}))}),g},[]),G.createElement(xn,Object.assign({key:"notification-holder"},e,{ref:n}))]}function vn(e){return lt(e)}const yn=G.createContext({});var je={exports:{}},bn=je.exports,ze;function Sn(){return ze||(ze=1,function(e,n){(function(a,s){e.exports=s()})(bn,function(){var a=1e3,s=6e4,d=36e5,g="millisecond",l="second",h="minute",j="hour",S="day",N="week",C="month",M="quarter",w="year",$="date",b="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,D=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,P={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(i){var u=["th","st","nd","rd"],r=i%100;return"["+i+(u[(r-20)%10]||u[r]||u[0])+"]"}},k=function(i,u,r){var f=String(i);return!f||f.length>=u?i:""+Array(u+1-f.length).join(r)+i},F={s:k,z:function(i){var u=-i.utcOffset(),r=Math.abs(u),f=Math.floor(r/60),m=r%60;return(u<=0?"+":"-")+k(f,2,"0")+":"+k(m,2,"0")},m:function i(u,r){if(u.date()<r.date())return-i(r,u);var f=12*(r.year()-u.year())+(r.month()-u.month()),m=u.clone().add(f,C),y=r-m<0,x=u.clone().add(f+(y?-1:1),C);return+(-(f+(r-m)/(y?m-x:x-m))||0)},a:function(i){return i<0?Math.ceil(i)||0:Math.floor(i)},p:function(i){return{M:C,y:w,w:N,d:S,D:$,h:j,m:h,s:l,ms:g,Q:M}[i]||String(i||"").toLowerCase().replace(/s$/,"")},u:function(i){return i===void 0}},T="en",Y={};Y[T]=P;var z="$isDayjsObject",I=function(i){return i instanceof O||!(!i||!i[z])},A=function i(u,r,f){var m;if(!u)return T;if(typeof u=="string"){var y=u.toLowerCase();Y[y]&&(m=y),r&&(Y[y]=r,m=y);var x=u.split("-");if(!m&&x.length>1)return i(x[0])}else{var _=u.name;Y[_]=u,m=_}return!f&&m&&(T=m),m||!f&&T},E=function(i,u){if(I(i))return i.clone();var r=typeof u=="object"?u:{};return r.date=i,r.args=arguments,new O(r)},v=F;v.l=A,v.i=I,v.w=function(i,u){return E(i,{locale:u.$L,utc:u.$u,x:u.$x,$offset:u.$offset})};var O=function(){function i(r){this.$L=A(r.locale,null,!0),this.parse(r),this.$x=this.$x||r.x||{},this[z]=!0}var u=i.prototype;return u.parse=function(r){this.$d=function(f){var m=f.date,y=f.utc;if(m===null)return new Date(NaN);if(v.u(m))return new Date;if(m instanceof Date)return new Date(m);if(typeof m=="string"&&!/Z$/i.test(m)){var x=m.match(p);if(x){var _=x[2]-1||0,B=(x[7]||"0").substring(0,3);return y?new Date(Date.UTC(x[1],_,x[3]||1,x[4]||0,x[5]||0,x[6]||0,B)):new Date(x[1],_,x[3]||1,x[4]||0,x[5]||0,x[6]||0,B)}}return new Date(m)}(r),this.init()},u.init=function(){var r=this.$d;this.$y=r.getFullYear(),this.$M=r.getMonth(),this.$D=r.getDate(),this.$W=r.getDay(),this.$H=r.getHours(),this.$m=r.getMinutes(),this.$s=r.getSeconds(),this.$ms=r.getMilliseconds()},u.$utils=function(){return v},u.isValid=function(){return this.$d.toString()!==b},u.isSame=function(r,f){var m=E(r);return this.startOf(f)<=m&&m<=this.endOf(f)},u.isAfter=function(r,f){return E(r)<this.startOf(f)},u.isBefore=function(r,f){return this.endOf(f)<E(r)},u.$g=function(r,f,m){return v.u(r)?this[f]:this.set(m,r)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(r,f){var m=this,y=!!v.u(f)||f,x=v.p(r),_=function(J,U){var Q=v.w(m.$u?Date.UTC(m.$y,U,J):new Date(m.$y,U,J),m);return y?Q:Q.endOf(S)},B=function(J,U){return v.w(m.toDate()[J].apply(m.toDate("s"),(y?[0,0,0,0]:[23,59,59,999]).slice(U)),m)},R=this.$W,L=this.$M,H=this.$D,q="set"+(this.$u?"UTC":"");switch(x){case w:return y?_(1,0):_(31,11);case C:return y?_(1,L):_(0,L+1);case N:var W=this.$locale().weekStart||0,Z=(R<W?R+7:R)-W;return _(y?H-Z:H+(6-Z),L);case S:case $:return B(q+"Hours",0);case j:return B(q+"Minutes",1);case h:return B(q+"Seconds",2);case l:return B(q+"Milliseconds",3);default:return this.clone()}},u.endOf=function(r){return this.startOf(r,!1)},u.$set=function(r,f){var m,y=v.p(r),x="set"+(this.$u?"UTC":""),_=(m={},m[S]=x+"Date",m[$]=x+"Date",m[C]=x+"Month",m[w]=x+"FullYear",m[j]=x+"Hours",m[h]=x+"Minutes",m[l]=x+"Seconds",m[g]=x+"Milliseconds",m)[y],B=y===S?this.$D+(f-this.$W):f;if(y===C||y===w){var R=this.clone().set($,1);R.$d[_](B),R.init(),this.$d=R.set($,Math.min(this.$D,R.daysInMonth())).$d}else _&&this.$d[_](B);return this.init(),this},u.set=function(r,f){return this.clone().$set(r,f)},u.get=function(r){return this[v.p(r)]()},u.add=function(r,f){var m,y=this;r=Number(r);var x=v.p(f),_=function(L){var H=E(y);return v.w(H.date(H.date()+Math.round(L*r)),y)};if(x===C)return this.set(C,this.$M+r);if(x===w)return this.set(w,this.$y+r);if(x===S)return _(1);if(x===N)return _(7);var B=(m={},m[h]=s,m[j]=d,m[l]=a,m)[x]||1,R=this.$d.getTime()+r*B;return v.w(R,this)},u.subtract=function(r,f){return this.add(-1*r,f)},u.format=function(r){var f=this,m=this.$locale();if(!this.isValid())return m.invalidDate||b;var y=r||"YYYY-MM-DDTHH:mm:ssZ",x=v.z(this),_=this.$H,B=this.$m,R=this.$M,L=m.weekdays,H=m.months,q=m.meridiem,W=function(U,Q,ee,te){return U&&(U[Q]||U(f,y))||ee[Q].slice(0,te)},Z=function(U){return v.s(_%12||12,U,"0")},J=q||function(U,Q,ee){var te=U<12?"AM":"PM";return ee?te.toLowerCase():te};return y.replace(D,function(U,Q){return Q||function(ee){switch(ee){case"YY":return String(f.$y).slice(-2);case"YYYY":return v.s(f.$y,4,"0");case"M":return R+1;case"MM":return v.s(R+1,2,"0");case"MMM":return W(m.monthsShort,R,H,3);case"MMMM":return W(H,R);case"D":return f.$D;case"DD":return v.s(f.$D,2,"0");case"d":return String(f.$W);case"dd":return W(m.weekdaysMin,f.$W,L,2);case"ddd":return W(m.weekdaysShort,f.$W,L,3);case"dddd":return L[f.$W];case"H":return String(_);case"HH":return v.s(_,2,"0");case"h":return Z(1);case"hh":return Z(2);case"a":return J(_,B,!0);case"A":return J(_,B,!1);case"m":return String(B);case"mm":return v.s(B,2,"0");case"s":return String(f.$s);case"ss":return v.s(f.$s,2,"0");case"SSS":return v.s(f.$ms,3,"0");case"Z":return x}return null}(U)||x.replace(":","")})},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(r,f,m){var y,x=this,_=v.p(f),B=E(r),R=(B.utcOffset()-this.utcOffset())*s,L=this-B,H=function(){return v.m(x,B)};switch(_){case w:y=H()/12;break;case C:y=H();break;case M:y=H()/3;break;case N:y=(L-R)/6048e5;break;case S:y=(L-R)/864e5;break;case j:y=L/d;break;case h:y=L/s;break;case l:y=L/a;break;default:y=L}return m?y:v.a(y)},u.daysInMonth=function(){return this.endOf(C).$D},u.$locale=function(){return Y[this.$L]},u.locale=function(r,f){if(!r)return this.$L;var m=this.clone(),y=A(r,f,!0);return y&&(m.$L=y),m},u.clone=function(){return v.w(this.$d,this)},u.toDate=function(){return new Date(this.valueOf())},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},i}(),o=O.prototype;return E.prototype=o,[["$ms",g],["$s",l],["$m",h],["$H",j],["$W",S],["$M",C],["$y",w],["$D",$]].forEach(function(i){o[i[1]]=function(u){return this.$g(u,i[0],i[1])}}),E.extend=function(i,u){return i.$i||(i(u,O,E),i.$i=!0),E},E.locale=A,E.isDayjs=I,E.unix=function(i){return E(1e3*i)},E.en=Y[T],E.Ls=Y,E.p={},E})}(je)),je.exports}var jn=Sn();const K=Ye(jn);var Ce={exports:{}},Cn=Ce.exports,qe;function Nn(){return qe||(qe=1,function(e,n){(function(a,s){e.exports=s()})(Cn,function(){var a={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},s=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,d=/\d/,g=/\d\d/,l=/\d\d?/,h=/\d*[^-_:/,()\s\d]+/,j={},S=function(p){return(p=+p)+(p>68?1900:2e3)},N=function(p){return function(D){this[p]=+D}},C=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(D){if(!D||D==="Z")return 0;var P=D.match(/([+-]|\d\d)/g),k=60*P[1]+(+P[2]||0);return k===0?0:P[0]==="+"?-k:k}(p)}],M=function(p){var D=j[p];return D&&(D.indexOf?D:D.s.concat(D.f))},w=function(p,D){var P,k=j.meridiem;if(k){for(var F=1;F<=24;F+=1)if(p.indexOf(k(F,0,D))>-1){P=F>12;break}}else P=p===(D?"pm":"PM");return P},$={A:[h,function(p){this.afternoon=w(p,!1)}],a:[h,function(p){this.afternoon=w(p,!0)}],Q:[d,function(p){this.month=3*(p-1)+1}],S:[d,function(p){this.milliseconds=100*+p}],SS:[g,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[l,N("seconds")],ss:[l,N("seconds")],m:[l,N("minutes")],mm:[l,N("minutes")],H:[l,N("hours")],h:[l,N("hours")],HH:[l,N("hours")],hh:[l,N("hours")],D:[l,N("day")],DD:[g,N("day")],Do:[h,function(p){var D=j.ordinal,P=p.match(/\d+/);if(this.day=P[0],D)for(var k=1;k<=31;k+=1)D(k).replace(/\[|\]/g,"")===p&&(this.day=k)}],w:[l,N("week")],ww:[g,N("week")],M:[l,N("month")],MM:[g,N("month")],MMM:[h,function(p){var D=M("months"),P=(M("monthsShort")||D.map(function(k){return k.slice(0,3)})).indexOf(p)+1;if(P<1)throw new Error;this.month=P%12||P}],MMMM:[h,function(p){var D=M("months").indexOf(p)+1;if(D<1)throw new Error;this.month=D%12||D}],Y:[/[+-]?\d+/,N("year")],YY:[g,function(p){this.year=S(p)}],YYYY:[/\d{4}/,N("year")],Z:C,ZZ:C};function b(p){var D,P;D=p,P=j&&j.formats;for(var k=(p=D.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(E,v,O){var o=O&&O.toUpperCase();return v||P[O]||a[O]||P[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(i,u,r){return u||r.slice(1)})})).match(s),F=k.length,T=0;T<F;T+=1){var Y=k[T],z=$[Y],I=z&&z[0],A=z&&z[1];k[T]=A?{regex:I,parser:A}:Y.replace(/^\[|\]$/g,"")}return function(E){for(var v={},O=0,o=0;O<F;O+=1){var i=k[O];if(typeof i=="string")o+=i.length;else{var u=i.regex,r=i.parser,f=E.slice(o),m=u.exec(f)[0];r.call(v,m),E=E.replace(m,"")}}return function(y){var x=y.afternoon;if(x!==void 0){var _=y.hours;x?_<12&&(y.hours+=12):_===12&&(y.hours=0),delete y.afternoon}}(v),v}}return function(p,D,P){P.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(S=p.parseTwoDigitYear);var k=D.prototype,F=k.parse;k.parse=function(T){var Y=T.date,z=T.utc,I=T.args;this.$u=z;var A=I[1];if(typeof A=="string"){var E=I[2]===!0,v=I[3]===!0,O=E||v,o=I[2];v&&(o=I[2]),j=this.$locale(),!E&&o&&(j=P.Ls[o]),this.$d=function(f,m,y,x){try{if(["x","X"].indexOf(m)>-1)return new Date((m==="X"?1e3:1)*f);var _=b(m)(f),B=_.year,R=_.month,L=_.day,H=_.hours,q=_.minutes,W=_.seconds,Z=_.milliseconds,J=_.zone,U=_.week,Q=new Date,ee=L||(B||R?1:Q.getDate()),te=B||Q.getFullYear(),re=0;B&&!R||(re=R>0?R-1:Q.getMonth());var ie,ce=H||0,le=q||0,de=W||0,fe=Z||0;return J?new Date(Date.UTC(te,re,ee,ce,le,de,fe+60*J.offset*1e3)):y?new Date(Date.UTC(te,re,ee,ce,le,de,fe)):(ie=new Date(te,re,ee,ce,le,de,fe),U&&(ie=x(ie).week(U).toDate()),ie)}catch{return new Date("")}}(Y,A,z,P),this.init(),o&&o!==!0&&(this.$L=this.locale(o).$L),O&&Y!=this.format(A)&&(this.$d=new Date("")),j={}}else if(A instanceof Array)for(var i=A.length,u=1;u<=i;u+=1){I[1]=A[u-1];var r=P.apply(this,I);if(r.isValid()){this.$d=r.$d,this.$L=r.$L,this.init();break}u===i&&(this.$d=new Date(""))}else F.call(this,T)}}})}(Ce)),Ce.exports}var wn=Nn();const _n=Ye(wn);let ae=null,Ne=e=>e(),Me=[],xe={};function Ue(){const{getContainer:e,rtl:n,maxCount:a,top:s,bottom:d,showProgress:g,pauseOnHover:l}=xe,h=(e==null?void 0:e())||document.body;return{getContainer:()=>h,rtl:n,maxCount:a,top:s,bottom:d,showProgress:g,pauseOnHover:l}}const Mn=G.forwardRef((e,n)=>{const{notificationConfig:a,sync:s}=e,{getPrefixCls:d}=c.useContext(Ee),g=xe.prefixCls||d("notification"),l=c.useContext(yn),[h,j]=lt(Object.assign(Object.assign(Object.assign({},a),{prefixCls:g}),l.notification));return G.useEffect(s,[]),G.useImperativeHandle(n,()=>{const S=Object.assign({},h);return Object.keys(S).forEach(N=>{S[N]=function(){return s(),h[N].apply(h,arguments)}}),{instance:S,sync:s}}),j}),$n=G.forwardRef((e,n)=>{const[a,s]=G.useState(Ue),d=()=>{s(Ue)};G.useEffect(d,[]);const g=Lt(),l=g.getRootPrefixCls(),h=g.getIconPrefixCls(),j=g.getTheme(),S=G.createElement(Mn,{ref:n,sync:d,notificationConfig:a});return G.createElement(Ft,{prefixCls:l,iconPrefixCls:h,theme:j},g.holderRender?g.holderRender(S):S)});function Pe(){if(!ae){const e=document.createDocumentFragment(),n={fragment:e};ae=n,Ne(()=>{Rt()(G.createElement($n,{ref:s=>{const{instance:d,sync:g}=s||{};Promise.resolve().then(()=>{!n.instance&&d&&(n.instance=d,n.sync=g,Pe())})}}),e)});return}ae.instance&&(Me.forEach(e=>{switch(e.type){case"open":{Ne(()=>{ae.instance.open(Object.assign(Object.assign({},xe),e.config))});break}case"destroy":Ne(()=>{ae==null||ae.instance.destroy(e.key)});break}}),Me=[])}function Dn(e){xe=Object.assign(Object.assign({},xe),e),Ne(()=>{var n;(n=ae==null?void 0:ae.sync)===null||n===void 0||n.call(ae)})}function dt(e){Me.push({type:"open",config:e}),Pe()}const kn=e=>{Me.push({type:"destroy",key:e}),Pe()},In=["success","info","warning","error"],En={open:dt,destroy:kn,config:Dn,useNotification:vn,_InternalPanelDoNotUseOrYouWillBeFired:cn},ut=En;In.forEach(e=>{ut[e]=n=>dt(Object.assign(Object.assign({},n),{type:e}))});const Ie=({name:e,size:n="md",image:a})=>{const s=l=>(l==null?void 0:l.split(" ").map(h=>h[0]).join("").toUpperCase())||"?",d={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base"},g=d[n]||d.md;return a?t.jsx("img",{src:a,alt:e,className:"msg-avatar-image rounded-full object-cover"}):t.jsx("div",{className:`${g} bg-gray-400 rounded-full flex items-center justify-center text-white font-medium`,children:s(e)})},ft=({conversation:e,partnerImage:n,isActive:a,onClick:s,isLoading:d=!1})=>{const g=l=>{if(!d){const h=l.currentTarget.querySelector('input[type="hidden"]'),j=h?h.value:null;s(e,j)}};return t.jsx("div",{className:`contact-list-avatar p-4 border-b border-gray-200 cursor-pointer ${a?"bg-blue-50":"hover:bg-gray-50"} ${d?"opacity-50":""}`,onClick:g,children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ie,{name:e.partner_name||"P",image:n}),t.jsx("div",{className:"text-gray-700",children:e.partner_name||`Partner #${e.partner_id}`}),t.jsx("input",{type:"hidden",value:e.conversation_id}),t.jsx("input",{type:"hidden",value:e.partner_id}),!e.read_by_partner&&t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})})};async function Yn(e){const n=new FormData;n.append("file",e);try{const s=await(await fetch("https://frohubecomm.mystagingwebsite.com/wp-json/frohub/v1/upload-comment-image",{method:"POST",headers:{Authorization:"Basic YOUR_BASIC_AUTH_HERE"},body:n})).json();if(s.success&&s.url)return s.url;throw new Error(s.error||"Upload failed")}catch(a){throw console.error("Upload error:",a),a}}const mt=({onSendMessage:e,isLoading:n=!1,disabled:a=!1})=>{const[s,d]=c.useState(""),[g,l]=c.useState(null),[h,j]=c.useState(null),[S,N]=c.useState(!1),C=c.useRef(null),M=async()=>{if(!s.trim()&&!g||n||a)return;let p="";if(g){N(!0);try{p=await Yn(g)}catch(D){console.error("Image upload failed:",D),alert(D.message||"Image upload failed")}finally{N(!1),l(null),j(null)}}(s.trim()||p)&&(await e(s,p),d(""))},w=p=>{const D=p.target.files[0];D&&(l(D),j(URL.createObjectURL(D)))},$=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),M())},b=()=>{C.current&&C.current.click()};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"deposit-notification-banner",children:t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-exclamation-triangle"})," Only deposits paid through FroHub are protected. ",t.jsx("a",{href:"/help-centre",target:"_blank",children:"Learn more."})]})}),t.jsxs("div",{className:"border-t bg-white p-3",children:[t.jsxs("div",{className:"flex",children:[t.jsx("input",{type:"file",accept:"image/*",ref:C,style:{display:"none"},onChange:w}),t.jsx("button",{onClick:b,type:"button",className:"ml-2 px-3 py-2 text-gray-500 hover:text-gray-700",disabled:a||S,children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),t.jsx("input",{value:s,onChange:p=>d(p.target.value),onKeyPress:$,placeholder:"Type your message...",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm",disabled:a||S}),t.jsx("button",{onClick:M,disabled:!s.trim()&&!g||n||a||S,className:"w-btn us-btn-style_1",children:"Send Message"})]}),h&&t.jsx("div",{className:"mt-2 ml-10",children:t.jsxs("div",{className:"relative inline-block",children:[t.jsx("img",{src:h,alt:"Preview",className:"max-h-32 rounded"}),t.jsx("button",{onClick:()=>{l(null),j(null)},className:"absolute top-1 right-1 bg-gray-800 bg-opacity-50 rounded-full p-1 text-white hover:bg-opacity-70",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),t.jsx("div",{className:"text-xs text-gray-400 mt-1 ml-10",children:"Please be respectful: Keep your messages kind and considerate. Treat others as you would like to be treated. Report any abusive messages here."}),S&&t.jsx("div",{className:"text-xs text-blue-500 mt-1 ml-10",children:"Uploading image..."})]})]})},ht=({comment:e,conversationId:n,isLastCustomerMessage:a,customerImage:s,partnerImage:d})=>{var $,b;const l=(((b=($=e==null?void 0:e.meta_data)==null?void 0:$.sent_from)==null?void 0:b[0])||"")!=="partner",[h,j]=c.useState(!1);c.useEffect(()=>{!h&&a&&ne("frohub/read_by_customer",p=>{p.success?(j(!0),document.cookie="unreadConversations=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"):console.warn("Failed to mark as read by customer:",p.message)},{conversation_post_id:n})},[a,n,h]);const S=p=>new Date(e.date).toLocaleString("en-GB",{hour:"2-digit",minute:"2-digit",day:"numeric",month:"short",year:"numeric"}),N=p=>({__html:p}),C=e.status==="pending",M=e.status==="failed",w=l?"customer-message":"partner-message";return t.jsxs("div",{className:`flex mb-4 ${l?"justify-end":"justify-start"}`,children:[!l&&t.jsx(Ie,{name:e.author||"Partner",size:"sm",image:d}),t.jsx("div",{className:`flex flex-col ${l?"items-end":"items-start"} max-w-xs`,children:t.jsxs("div",{className:`p-3 rounded-lg break-words shadow-sm ${w}`,children:[t.jsxs("div",{className:"text-xs mb-1",children:[S(e.date),C&&t.jsx("span",{className:"ml-1",children:"(Sending...)"}),M&&t.jsx("span",{className:"ml-1",children:"(Failed)"})]}),t.jsx("div",{dangerouslySetInnerHTML:N(e.content),className:"text-sm"}),e.image_url&&t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:e.image_url,alt:"Attached",className:"max-w-full rounded"})})]})}),l&&t.jsx(Ie,{name:"You",size:"sm",image:s})]})},An=({dataKey:e,currentUserPartnerPostId:n})=>{const[a,s]=c.useState([]),[d,g]=c.useState([]),[l,h]=c.useState(null),[j,S]=c.useState(null),[N,C]=c.useState(n),[M,w]=c.useState({conversations:!1,comments:!1,sending:!1}),[$,b]=c.useState(null),[p,D]=c.useState(!0),P=c.useRef(null),k=c.useRef(null),[F,T]=c.useState(!1),Y=typeof window<"u"?new URLSearchParams(window.location.search):null,z=Y==null?void 0:Y.get("customer_id"),I=Y==null?void 0:Y.get("conversation_id");c.useEffect(()=>{v()},[]),c.useEffect(()=>(l?(O(l.client_id,!0),A()):E(),()=>E()),[l]),c.useEffect(()=>{const r=document.getElementById("chat-messages-container-mobile");r&&(r.scrollTop=r.scrollHeight)},[d]);const A=()=>{E(),P.current=setInterval(()=>{l&&O(l.client_id,!1)},5e3)},E=()=>{P.current&&(clearInterval(P.current),P.current=null)},v=()=>{w(r=>({...r,conversations:!0})),b(null),ne("frohub/user_conversations",r=>{var f;if(r.success){const y=(((f=r.data)==null?void 0:f.data)||[]).map(x=>({...x,client_id:x.conversation_id,comments:Array.isArray(x.comments)?x.comments:[]}));if(s(y),y.length>0){let x=null;I?(x=y.find(_=>String(_.conversation_id)===String(I)),x&&(h(x),S(x.conversation_id),D(!1))):z&&(x=y.find(_=>String(_.customer_id)===String(z)),x&&(h(x),S(x.conversation_id),D(!1)))}}else b("Failed to load conversations: "+(r.message||"Unknown error")),s([]);w(m=>({...m,conversations:!1}))})},O=(r,f=!0)=>{f&&w(m=>({...m,comments:!0})),b(null),ne("frohub/get_conversation_comments",m=>{var y;if(m.success){const x=m.data||{},_=x.comments||[],B=x.user_partner_id;if(Array.isArray(_))if(f||d.length===0){if(g(_),_.length>0){const R=_[_.length-1];k.current=new Date(R.date).getTime()}}else{const R=k.current,L=_.filter(H=>{const q=new Date(H.date).getTime();return!R||q>R});if(L.length>0){const H=L[L.length-1];k.current=new Date(H.date).getTime(),g(q=>{const W=q.filter(U=>!U.comment_id.toString().startsWith("temp_")||U.status==="failed"),Z=new Set(W.map(U=>U.comment_id)),J=L.filter(U=>!Z.has(U.comment_id));return[...W,...J]}),L.find(q=>{var W,Z;return((Z=(W=q==null?void 0:q.meta_data)==null?void 0:W.sent_from)==null?void 0:Z[0])!=="partner"})}}B&&C(B),s(R=>R.map(L=>L.client_id===r?{...L,read_by_partner:!0}:L))}else f&&(b("Failed to load comments: "+(((y=m.data)==null?void 0:y.message)||"Unknown error")),g([]));f&&w(x=>({...x,comments:!1}))},{post_id:r})},o=(r,f)=>{h(r),S(f),g([]),T(!1),k.current=null,D(!1)},i=()=>{D(!0),h(null),S(null),g([])},u=async(r,f="")=>{if(!l||!r.trim()&&!f)return;const m={comment_id:`temp_${Date.now()}`,content:r,author:"You",partner_id:n,date:new Date().toISOString(),image_url:f,status:"pending"};g(x=>[...x,m]),w(x=>({...x,sending:!0})),b(null);const y=j||l.client_id;ne("frohub/send_customer_message",x=>{x.success?(g(_=>_.filter(B=>B.comment_id!==m.comment_id)),O(l.client_id,!1),s(_=>_.map(B=>B.client_id===l.client_id?{...B,last_message:r,last_activity:new Date().toISOString(),read_by_partner:!0}:B))):(g(_=>_.map(B=>B.comment_id===m.comment_id?{...B,status:"failed"}:B)),b("Failed to send message: "+(x.message||"Unknown error"))),w(_=>({..._,sending:!1}))},{post_id:y,conversation_id:j,partner_id:n,comment:r,image_url:f})};return t.jsxs("div",{className:"flex flex-col h-screen bg-white",children:[p&&t.jsx("div",{className:"conversation-details flex flex-col h-full",children:t.jsx("div",{className:"message-conversations flex-1 overflow-y-auto",children:M.conversations?t.jsx("div",{className:"flex flex-col space-y-4 p-4",children:[...Array(4)].map((r,f)=>t.jsxs("div",{className:"flex items-center space-x-3 p-3",children:[t.jsx(V.Avatar,{size:"large",active:!0}),t.jsxs("div",{className:"flex-1",children:[t.jsx(V.Input,{size:"small",active:!0,style:{width:"60%"}}),t.jsx("div",{className:"mt-2",children:t.jsx(V.Input,{size:"small",active:!0,style:{width:"80%"}})})]})]},f))}):t.jsxs(t.Fragment,{children:[a.map(r=>t.jsx(ft,{conversation:r,isActive:!1,onClick:o},r.client_id)),!M.conversations&&a.length===0&&t.jsx("div",{className:"p-4 text-center text-gray-500",children:"No conversations found"})]})})}),!p&&l&&t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"flex items-center p-4 border-b border-gray-200 bg-white",children:[t.jsx("button",{onClick:i,className:"p-1 text-gray-600 hover:text-gray-800",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsx("span",{className:"ml-3 text-gray-900 font-medium",children:"Back to Messages"})]}),t.jsx("div",{id:"chat-messages-container-mobile",className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:M.comments?t.jsx("div",{className:"flex justify-center items-center h-full text-gray-500",children:"Loading messages..."}):t.jsxs(t.Fragment,{children:[d.map(r=>t.jsx(ht,{comment:r},r.comment_id)),d.length===0&&t.jsx("div",{className:"text-center text-gray-500 mt-8",children:"No messages yet. Start a conversation!"})]})}),t.jsx("div",{className:"border-t border-gray-200 bg-white",children:t.jsx(mt,{onSendMessage:u,isLoading:M.sending,disabled:M.comments})})]}),$&&t.jsx("div",{className:"fixed top-4 left-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded z-50",children:t.jsxs("div",{className:"flex items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("strong",{className:"font-medium",children:"Error:"}),t.jsx("div",{className:"mt-1 text-sm",children:$})]}),t.jsx("button",{onClick:()=>b(null),className:"ml-2 text-red-700 hover:text-red-900",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})},Pn=({dataKey:e,currentUserPartnerPostId:n})=>{const[a,s]=c.useState([]),[d,g]=c.useState([]),[l,h]=c.useState(null),[j,S]=c.useState(null),[N,C]=c.useState(null),[M,w]=c.useState({conversations:!1,comments:!1,sending:!1}),[$,b]=c.useState(null),p=c.useRef(null),D=c.useRef(null),[P,k]=c.useState(!1),F=typeof window<"u"?new URLSearchParams(window.location.search):null,T=F==null?void 0:F.get("customer_id"),Y=F==null?void 0:F.get("conversation_id");c.useEffect(()=>{A()},[]),c.useEffect(()=>(l?(E(l.client_id,!0),z()):I(),()=>I()),[l]),c.useEffect(()=>{const o=document.getElementById("chat-messages-container");o&&(o.scrollTop=o.scrollHeight)},[d]);const z=()=>{I(),p.current=setInterval(()=>{l&&E(l.client_id,!1)},5e3)},I=()=>{p.current&&(clearInterval(p.current),p.current=null)},A=()=>{w(o=>({...o,conversations:!0})),b(null),ne("frohub/user_conversations",o=>{var i;if(o.success){const r=(((i=o.data)==null?void 0:i.data)||[]).map(f=>({...f,client_id:f.conversation_id,comments:Array.isArray(f.comments)?f.comments:[]}));if(s(r),r.length>0){let f=null;Y?f=r.find(m=>String(m.conversation_id)===String(Y)):T&&(f=r.find(m=>String(m.customer_id)===String(T))),!f&&!l&&(f=r[0]),f&&(h(f),S(f.conversation_id))}}else b("Failed to load conversations: "+(o.message||"Unknown error")),s([]);w(u=>({...u,conversations:!1}))})},E=(o,i=!0)=>{i&&w(u=>({...u,comments:!0})),b(null),ne("frohub/get_conversation_comments",u=>{var r;if(u.success){const f=u.data||{},m=f.comments||[],y=f.user_partner_id.ID;if(C(y),Array.isArray(m))if(i||d.length===0){if(g(m),m.length>0){const x=m[m.length-1];D.current=new Date(x.date).getTime()}}else{const x=D.current,_=m.filter(B=>{const R=new Date(B.date).getTime();return!x||R>x});if(_.length>0){const B=_[_.length-1];D.current=new Date(B.date).getTime(),g(R=>{const L=R.filter(W=>!W.comment_id.toString().startsWith("temp_")||W.status==="failed"),H=new Set(L.map(W=>W.comment_id)),q=_.filter(W=>!H.has(W.comment_id));return[...L,...q]}),_.find(R=>{var L,H;return((H=(L=R==null?void 0:R.meta_data)==null?void 0:L.sent_from)==null?void 0:H[0])!=="partner"})}}y&&C(y),s(x=>x.map(_=>_.client_id===o?{..._,read_by_partner:!0}:_))}else i&&(b("Failed to load comments: "+(((r=u.data)==null?void 0:r.message)||"Unknown error")),g([]));i&&w(f=>({...f,comments:!1}))},{post_id:o})},v=(o,i)=>{h(o),S(i),g([]),k(!1),D.current=null},O=async(o,i="")=>{if(!l||!o.trim()&&!i)return;const u={comment_id:`temp_${Date.now()}`,content:o,author:"You",partner_id:n,date:new Date().toISOString(),image_url:i,status:"pending"};g(f=>[...f,u]),w(f=>({...f,sending:!0})),b(null);const r=j||l.client_id;ne("frohub/send_customer_message",f=>{f.success?(g(m=>m.filter(y=>y.comment_id!==u.comment_id)),E(l.client_id,!1),s(m=>m.map(y=>y.client_id===l.client_id?{...y,last_message:o,last_activity:new Date().toISOString(),read_by_partner:!0}:y))):(g(m=>m.map(y=>y.comment_id===u.comment_id?{...y,status:"failed"}:y)),b("Failed to send message: "+(f.message||"Unknown error"))),w(m=>({...m,sending:!1}))},{post_id:r,conversation_id:j,partner_id:N,comment:o,image_url:i})};return t.jsxs("div",{className:"flex h-screen bg-white",children:[t.jsx("div",{className:"message-conversations w-80",children:t.jsxs("div",{className:"overflow-y-auto",children:[M.conversations?t.jsxs("div",{className:"text-sm text-gray-500 mt-1 flex flex-col space-y-4",children:[t.jsxs("div",{className:"contact-list-avatar p-4 flex space-x-2 justify-around",children:[t.jsx(V.Avatar,{size:"large",active:!0}),t.jsx(V.Input,{size:"large",active:!0})]}),t.jsxs("div",{className:"contact-list-avatar p-4 flex space-x-2 justify-around",children:[t.jsx(V.Avatar,{size:"large",active:!0}),t.jsx(V.Input,{size:"large",active:!0})]}),t.jsxs("div",{className:"contact-list-avatar p-4 flex space-x-2 justify-around",children:[t.jsx(V.Avatar,{size:"large",active:!0}),t.jsx(V.Input,{size:"large",active:!0})]}),t.jsxs("div",{className:"contact-list-avatar p-4 flex space-x-2 justify-around",children:[t.jsx(V.Avatar,{size:"large",active:!0}),t.jsx(V.Input,{size:"large",active:!0})]})]}):a.map(o=>t.jsx(ft,{conversation:o,unreadConversation:o.unread_count_partner,partnerImage:o.partner_image,isActive:(l==null?void 0:l.client_id)===o.client_id,onClick:v},o.client_id)),!M.conversations&&a.length===0&&t.jsx("div",{className:"flex justify-center items-center p-24",children:t.jsx("p",{className:"text-gray-600 text-base text-center max-w-xl mx-auto",children:"No messages yet"})})]})}),t.jsx("div",{className:"conversation-details flex-1 flex flex-col",children:l?t.jsxs(t.Fragment,{children:[t.jsx("div",{id:"chat-messages-container",className:"flex-1 overflow-y-auto p-4",children:M.comments?t.jsx("div",{className:"flex justify-center items-center h-full text-gray-500",children:"Loading messages..."}):t.jsxs(t.Fragment,{children:[d.map((o,i)=>{var u,r;return t.jsx(ht,{comment:o,conversationId:l==null?void 0:l.conversation_id,isLastCustomerMessage:((r=(u=o==null?void 0:o.meta_data)==null?void 0:u.sent_from)==null?void 0:r[0])!=="customer"&&i===d.length-1,customerImage:l==null?void 0:l.customer_image,partnerImage:l==null?void 0:l.partner_image},o.comment_id)}),d.length===0&&t.jsx("div",{className:"text-center text-gray-500 mt-8",children:"No messages yet. Start a conversation!"})]})}),t.jsx(mt,{onSendMessage:O,isLoading:M.sending,disabled:M.comments})]}):t.jsx("div",{className:"flex-1 flex items-start justify-center text-gray-500",children:t.jsxs("div",{className:"text-center p-16 mt-8",children:[t.jsx("h3",{className:"font-medium mb-2",children:"👋🏾 Welcome to your inbox!"}),t.jsx("p",{children:"When you book a service or send an enquiry, you’ll see your messages here. Need help? Start a conversation with your stylist."})]})})}),$&&t.jsx("div",{className:"fixed top-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded z-50 max-w-md",children:t.jsxs("div",{className:"flex items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("strong",{className:"font-medium",children:"Error:"}),t.jsx("div",{className:"mt-1 text-sm",children:$})]}),t.jsx("button",{onClick:()=>b(null),className:"ml-2 text-red-700 hover:text-red-900",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gt=(...e)=>e.filter((n,a,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===a).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=c.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:d="",children:g,iconNode:l,...h},j)=>c.createElement("svg",{ref:j,...Fn,width:n,height:n,stroke:e,strokeWidth:s?Number(a)*24/Number(n):a,className:gt("lucide",d),...h},[...l.map(([S,N])=>c.createElement(S,N)),...Array.isArray(g)?g:[g]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=(e,n)=>{const a=c.forwardRef(({className:s,...d},g)=>c.createElement(Rn,{ref:g,iconNode:n,className:gt(`lucide-${Tn(e)}`,s),...d}));return a.displayName=`${e}`,a};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],We=Te("CircleCheckBig",Ln);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ge=Te("CircleX",On);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Hn=Te("RefreshCw",Bn),Ke=e=>{let n;const a=new Set,s=(S,N)=>{const C=typeof S=="function"?S(n):S;if(!Object.is(C,n)){const M=n;n=N??(typeof C!="object"||C===null)?C:Object.assign({},n,C),a.forEach(w=>w(n,M))}},d=()=>n,h={setState:s,getState:d,getInitialState:()=>j,subscribe:S=>(a.add(S),()=>a.delete(S))},j=n=e(s,d,h);return h},zn=e=>e?Ke(e):Ke,qn=e=>e;function Un(e,n=qn){const a=G.useSyncExternalStore(e.subscribe,()=>n(e.getState()),()=>n(e.getInitialState()));return G.useDebugValue(a),a}const Wn=e=>{const n=zn(e),a=s=>Un(n,s);return Object.assign(a,n),a},Gn=e=>Wn(e),X=Gn(e=>{const n=new Date().toISOString().split("T")[0];return{availabilityData:[],loading:!1,selectedDate:n,productId:null,selectedAddOnId:null,selectedAddOns:[],productPrice:0,selectedServiceType:"",addonsChanged:!1,mobileTravelFee:0,readyForMobile:!1,addonTotalTime:0,errorMessage:"Postcode cannot be empty",totalService:0,setAvailabilityData:a=>e({availabilityData:a,loading:!1}),setLoading:a=>e({loading:a}),setSelectedDate:a=>e({selectedDate:a}),setProductId:a=>e({productId:a}),setSelectedAddOnId:a=>e({selectedAddOnId:a}),setSelectedAddOns:a=>e({selectedAddOns:a}),setProductPrice:a=>e({productPrice:a}),setSelectedServiceType:a=>e({selectedServiceType:a}),setMobileTravelFee:a=>e({mobileTravelFee:a}),setReadyForMobile:a=>e({readyForMobile:a}),setAddonsChanged:()=>e({addonsChanged:!0}),resetAddonsChanged:()=>e({addonsChanged:!1}),setErrorMessage:a=>e({errorMessage:a}),setTotalService:a=>e({totalService:a})}}),Kn=frohub_settings.ajax_url,Vn=(e,n)=>new Promise((a,s)=>{jQuery.post(Kn,{_ajax_nonce:frohub_settings.nonce,action:e,...n},function(d){d.success?a(d):s(d)})}),Ve=(e,n,a)=>{ut[e]({message:n,description:a,placement:"topRight",showProgress:!0})};function Jn(){const{selectedAddOns:e,productPrice:n,productId:a,selectedServiceType:s,addonTotalTime:d,mobileTravelFee:g,readyForMobile:l,initialServiceDuration:h,errorMessage:j}=X(),[S,N]=c.useState(n),[C,M]=c.useState(!1),[w,$]=c.useState(!1),[b,p]=c.useState("0h 0m"),[D,P]=c.useState(0),[k,F]=c.useState(!1),T=S*.3;c.useEffect(()=>{(()=>{a&&(F(!0),ne("frohub/get_duration",I=>{if(I.success){const A=I.data.duration_hours||0,E=I.data.duration_minutes||0,v=A*60+E;P(v);const O=v+(d||0),o=Math.floor(O/60),i=O%60;p(`${o}h ${i}m`),F(!1)}else console.error("Error fetching service duration:",I.message),F(!1)},{product_id:a}))})()},[a,d]),c.useEffect(()=>{const z=()=>{const E=document.getElementById("extra-charge-container");if(E){const v=parseFloat(E.getAttribute("data-extra-charge"))||0,O=s==="mobile";N(n+v+(O&&g||0))}};z();const I=new MutationObserver(E=>{E.forEach(v=>{v.type==="attributes"&&v.attributeName==="data-extra-charge"&&z()})}),A=document.getElementById("extra-charge-container");return A&&I.observe(A,{attributes:!0,attributeFilter:["data-extra-charge"]}),()=>I.disconnect()},[n,g,s]),c.useEffect(()=>{const z=()=>{const E=document.querySelector('input[name="total_duration_time"]');if(E){const v=parseInt(E.value,10)||0;P(v)}else if(h){const v=h+(d||0),O=Math.floor(v/60),o=v%60;p(`${O}h ${o}m`)}};z();const I=new MutationObserver(z),A=document.querySelector('input[name="total_duration_time"]');return A&&I.observe(A,{attributes:!0,attributeFilter:["value"]}),()=>I.disconnect()},[d,h]);const Y=async()=>{var u,r,f,m,y;const z=((u=document.querySelector('input[name="selectedDate"]'))==null?void 0:u.value)||"",I=((r=document.querySelector('input[name="selectedTime"]'))==null?void 0:r.value)||"",A=document.querySelector(".timeslot-button.selected"),E=((f=document.querySelector('input[name="selectedPrice"]'))==null?void 0:f.value)||"",v=((m=document.querySelector('input[name="travelFee"]'))==null?void 0:m.value)||"",O=((y=document.querySelector('input[name="postCode"]'))==null?void 0:y.value)||"";if(!z||!A){Ve("error","Missing Information","Please select a service type and date & time before proceeding.");return}if(s==="mobile"&&l===!1){Ve("error","Validation Error",j);return}M(!0);const o=S-T,i=T*.03;document.cookie=`frohub_service_fee=${i}; path=/; max-age=86400`;try{const x=await Vn("frohub_add_to_cart",{productId:a,selectedAddOns:e,depositDue:o,depositDueToday:T,serviceFee:i,productPrice:T,totalPrice:S,selectedServiceType:s,selectedDate:z,selectedTime:I,extraCharge:JSON.stringify({bookingExtra:E,mobileFee:v,postCode:O})});$(!0),window.location.href="/checkout"}catch(x){console.error("AJAX call failed:",x)}finally{M(!1)}};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-[#f2f4f7] border-t border-[#E8E8E8] shadow-md py-4 px-6 z-50",children:t.jsxs("div",{className:"sm:w-full md:w-4/5 mx-auto flex flex-col items-center",children:[t.jsxs("div",{className:"w-full bottom-bar",children:[t.jsx("div",{className:"bottom-bar-notice flex items-center gap-2 text-gray-700 text-sm",children:t.jsxs("span",{className:"flex items-center",children:[t.jsx("i",{className:"fas fa-shield-alt text-base"}),t.jsxs("span",{className:"ml-2",children:["Only deposits paid through FroHub are protected. ",t.jsx("a",{href:"/help-centre/",className:"text-black font-medium",target:"_blank",children:"Learn More"})]})]})}),t.jsxs("div",{className:"bottom-bar-text",children:[t.jsxs("p",{className:"text-gray-900 font-semibold !mb-3",children:["Total price: ",t.jsxs("span",{className:"text-black",children:["£",S.toFixed(2)]})]}),t.jsxs("p",{className:"text-gray-600 text-sm !mb-3",children:["Deposit due today: ",t.jsxs("span",{className:"font-medium text-black",children:["£",T.toFixed(2)]})]}),t.jsxs("p",{className:"text-gray-600 text-sm !mb-3",children:["Service duration: ",t.jsx("span",{className:"font-medium",children:k?t.jsx(V.Button,{active:!0,size:"small",style:{width:"60px",height:"20px"}}):b})]}),t.jsx("input",{name:"service-duration",type:"hidden",value:b})]}),t.jsx("button",{onClick:Y,disabled:C||w,className:`bg-[#E05748] !text-white font-medium px-6 py-2 rounded-full transition flex items-center justify-center ${C||w?"cursor-not-allowed opacity-75":"hover:bg-gray-400"}`,style:{minWidth:"150px",height:"40px"},children:C?t.jsx(Fe,{size:"small",className:"mr-2"}):w?t.jsx(Fe,{size:"small",className:"mr-2"}):"Request to Book"})]}),t.jsx("div",{className:"bottom-bar-notice-mobile",children:t.jsxs("span",{className:"flex items-center",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-black mr-1",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M12 2a10 10 0 1 1-10 10A10 10 0 0 1 12 2zm0 18a8 8 0 1 0-8-8 8 8 0 0 0 8 8zm-1-13a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0zm1 6a1.25 1.25 0 1 1-1.25 1.25A1.25 1.25 0 0 1 12 13z",clipRule:"evenodd"})}),t.jsxs("span",{children:["All deposits paid through FroHub are protected. ",t.jsx("a",{href:"#",className:"text-black font-medium",children:"Learn More"})]})]})})]})})})}var we={exports:{}},Zn=we.exports,Je;function Xn(){return Je||(Je=1,function(e,n){(function(a,s){e.exports=s()})(Zn,function(){return function(a,s,d){s.prototype.isBetween=function(g,l,h,j){var S=d(g),N=d(l),C=(j=j||"()")[0]==="(",M=j[1]===")";return(C?this.isAfter(S,h):!this.isBefore(S,h))&&(M?this.isBefore(N,h):!this.isAfter(N,h))||(C?this.isBefore(S,h):!this.isAfter(S,h))&&(M?this.isAfter(N,h):!this.isBefore(N,h))}}})}(we)),we.exports}var Qn=Xn();const pt=Ye(Qn);K.extend(pt);const ea=({onDateChange:e,bookingNotice:n,initialServiceDuration:a,maxDate:s,unavailableDates:d,unavailableTimes:g,nextAvailableDate:l,allBookings:h})=>{const{availabilityData:j,loading:S}=X(),[N,C]=c.useState(()=>K(l)),[M,w]=c.useState(null),[$,b]=c.useState(0),[p,D]=c.useState(0),[P,k]=c.useState(K());c.useEffect(()=>{l&&C(K(l))},[l]),c.useEffect(()=>{const o=parseInt(a,10)||0,i=Math.floor(o/60),u=o%60;D(`${i}h ${u}m`)},[a]);const F=o=>{const i=o.format("YYYY-MM-DD"),u=j.filter(x=>x.date===i);if(u.length===0)return!1;const r=h[i]||[],f=u.filter(x=>{const _=`${x.from} - ${x.to}`;if(r.includes(_))return!1;const R=K(`${i} ${x.from}`,"YYYY-MM-DD HH:mm"),L=K(`${i} ${x.to}`,"YYYY-MM-DD HH:mm");return!g.some(({start:q,end:W})=>!q||!W?!1:R.isBetween(q,W,null,"[]")||L.isBetween(q,W,null,"[]")||R.isBefore(q)&&L.isAfter(W))});if(console.log(`📅 Date: ${i} - Possible Slots: ${u.length}, Free Slots: ${f.length}`),f.length===0)return!1;const y=K().add(n,"day");return!(!o.isAfter(y,"day")||s&&!o.isBefore(K(s).add(1,"day")))},T=()=>{const o=P.startOf("month"),i=P.daysInMonth();let u=o.day();u=u===0?6:u-1;const r=[];for(let f=0;f<u;f++)r.push({date:o.subtract(u-f,"day"),isCurrentMonth:!1});for(let f=1;f<=i;f++)r.push({date:o.add(f-1,"day"),isCurrentMonth:!0});return r},Y=o=>{if(!F(o))return;const i=K(o);C(i),w(null),b(0),document.getElementById("extra-charge-container").setAttribute("data-extra-charge","0"),e&&e(i.format("YYYY-MM-DD"))},z=(o,i,u)=>{w(o),b(i),document.getElementById("extra-charge-container").setAttribute("data-extra-charge",i)},I=o=>{k(P.add(o,"month"))},A=Array.isArray(j)?j.filter(o=>{const i=N.format("YYYY-MM-DD");if(o.date!==i||(`${o.from}${o.to}`,(h[i]||[]).some(x=>{if(!x||!x.includes(" - "))return!1;const[_,B]=x.split(" - "),R=K(`${i} ${_}`,"YYYY-MM-DD HH:mm"),L=K(`${i} ${B}`,"YYYY-MM-DD HH:mm"),H=K(`${i} ${o.from}`,"YYYY-MM-DD HH:mm"),q=K(`${i} ${o.to}`,"YYYY-MM-DD HH:mm");return H.isBefore(L)&&q.isAfter(R)})))return!1;const f=K(`${i} ${o.from}`,"YYYY-MM-DD HH:mm"),m=K(`${i} ${o.to}`,"YYYY-MM-DD HH:mm");return!g.some(({start:x,end:_})=>!x||!_?!1:f.isBetween(x,_,null,"[]")||m.isBetween(x,_,null,"[]")||f.isBefore(x)&&m.isAfter(_))}).map(o=>({time:`${o.from} - ${o.to}`,price:Number(o.extra_charge)||0,duration:o.total_duration_minutes||0})):[];console.log(g);const E=o=>K().format("YYYY-MM-DD")===o.format("YYYY-MM-DD"),v=o=>N.format("YYYY-MM-DD")===o.format("YYYY-MM-DD"),O=o=>o.isBefore(K(),"day");return t.jsxs("div",{className:"calendar-container",children:[t.jsxs("div",{className:"calendar-section custom-calendar",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("button",{onClick:()=>I(-1),className:"p-2 hover:bg-gray-200 rounded-full",children:"<"}),t.jsx("div",{className:"text-base font-medium",children:P.format("MMMM YYYY")}),t.jsx("button",{onClick:()=>I(1),className:"p-2 hover:bg-gray-200 rounded-full",children:">"})]}),t.jsx("div",{className:"grid grid-cols-7 mb-2",children:["MON","TUE","WED","THU","FRI","SAT","SUN"].map(o=>t.jsx("div",{className:"text-xs text-gray-500 text-center py-2",children:o},o))}),t.jsx("div",{className:"grid grid-cols-7 gap-1",children:T().map((o,i)=>{const u=F(o.date),r=!u||O(o.date);return t.jsx("button",{onClick:()=>u&&Y(o.date),disabled:r,className:`
                                    w-10 h-10 flex items-center justify-center rounded-full
                                    text-sm font-medium
                                    ${o.isCurrentMonth?"":"text-gray-400"}
                                    ${r?"text-gray-300 cursor-not-allowed":"hover:bg-orange-300"}
                                    ${u?"bg-orange-500 !text-white":""}
                                    ${v(o.date)?"bg-black text-white hover:bg-black":""}
                                    ${E(o.date)&&!v(o.date)?"border border-black":""}
                                `,children:o.date.date()},i)})})]}),t.jsxs("div",{className:"timeslots-section",children:[S?t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"selected-date",children:K(N).isValid()?N.format("ddd, MMM D YYYY"):"Getting Available Date..."}),t.jsx("div",{className:"timeslots-grid",children:[...Array(4)].map((o,i)=>t.jsx(V.Button,{active:!0,size:"large",block:!0},i))})]}):A.length===0?t.jsx("h3",{className:"selected-date",children:"Sorry, no available time for this service"}):t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"selected-date",children:N.format("ddd, MMM D YYYY")}),t.jsx("div",{className:"timeslots-grid scrollable-timeslots",children:A.map((o,i)=>t.jsxs("button",{className:`timeslot-button ${M===o.time?"selected":""}`,onClick:()=>z(o.time,o.price,o.duration),children:[t.jsx("span",{children:o.time.split(" - ")[0]}),o.price>0&&t.jsxs("span",{className:"extra-charge",children:["+£",o.price.toFixed(2)]})]},i))})]}),t.jsx("p",{className:"timezone-info",children:"All times are in London (GMT +01:00)"})]}),t.jsx("div",{id:"extra-charge-container","data-extra-charge":"0",style:{display:"none"}}),t.jsx("input",{type:"hidden",value:N.format("YYYY-MM-DD"),name:"selectedDate"}),t.jsx("input",{type:"hidden",value:M||"",name:"selectedTime"}),t.jsx("input",{type:"hidden",name:"selectedPrice",value:$}),t.jsx("input",{type:"hidden",value:p,name:"total_duration_time"})]})};K.extend(_n);K.extend(pt);const ta=()=>{const e=c.useRef(null),[n,a]=c.useState(null),[s,d]=c.useState(null),[g,l]=c.useState([]),[h,j]=c.useState([]),[S,N]=c.useState(null),[C,M]=c.useState({}),[w,$]=c.useState([]);c.useRef([]);const{availabilityData:b,setAvailabilityData:p,selectedDate:D,setSelectedDate:P,loading:k,setLoading:F,addonsChanged:T,setAddonsChanged:Y,resetAddonsChanged:z}=X();c.useEffect(()=>{const v=new Date().toISOString().split("T")[0];P(v)},[P]),c.useEffect(()=>{const v=document.querySelector(".frohub_add_to_cart");v&&(e.current=v.dataset.productId)},[]);const I=c.useCallback(()=>{let v=[];const O=document.getElementById("frohub-selected-addon-ids");if(O&&O.value)try{v=JSON.parse(O.value)}catch(o){console.error("Error parsing addon IDs",o),v=[]}return v},[]),A=c.useCallback(async()=>{const v=e.current;if(!v)return;F(!0);const O=I();ne("frohub/get_availibility",o=>{if(o.success){N(o.data.next_available_date),p(o.data.availability),a(o.data.booking_notice),d(o.data.max_date),l(o.data.unavailable_dates||[]),M(o.data.all_bookings||{}),$(o.data.all_booked_days||[]);const i=r=>{if(!r)return null;let f=r.trim();f=f.replace(/\b12:00 am\b/i,"00:00").replace(/\b12:00 pm\b/i,"12:00").replace(/\b(\d):(\d{2}) (am|pm)\b/i,"0$1:$2 $3").replace(/\b(\d{1,2}):(\d{2}) ([ap]m)\b/i,(x,_,B,R)=>{let L=parseInt(_,10);return R.toLowerCase()==="pm"&&L!==12&&(L+=12),R.toLowerCase()==="am"&&L===12&&(L=0),`${L.toString().padStart(2,"0")}:${B}`});const m=["DD/MM/YYYY HH:mm","DD/MM/YYYY hh:mm A","DD/MM/YYYY h:mm A","YYYY-MM-DD HH:mm","YYYY-MM-DD","DD/MM/YYYY"];let y=null;for(let x of m)if(y=K(f,x,!0),y.isValid())return y;return null},u=(o.data.unavailable_dates||[]).map(({start_date:r,end_date:f})=>{const m=i(r),y=i(f);return!m||!y?null:{start:m,end:y}}).filter(Boolean);j(u)}else console.error("Error fetching availability:",o.message);F(!1)},{product_id:v,date:D,addons_id:O}),z()},[D,p,F,z,I]);c.useEffect(()=>{A()},[A,D,T]);const E=v=>{P(v)};return t.jsxs("div",{className:"relative",children:[t.jsx("p",{children:"Search availability and select a time slot"}),t.jsx(ea,{data:b,onDateChange:E,bookingNotice:n,maxDate:s,unavailableDates:g,unavailableTimes:h,nextAvailableDate:S,allBookings:C,allBookedDays:w})]})};var Se={},Ze;function na(){if(Ze)return Se;Ze=1;var e=Ot();return Se.createRoot=e.createRoot,Se.hydrateRoot=e.hydrateRoot,Se}var ve=na();const aa={"home-based":t.jsx("i",{className:"fas fa-home text-[32px]"}),"salon-based":t.jsx("i",{className:"fas fa-chair-office text-[32px]"}),mobile:t.jsx("i",{className:"fas fa-car-side text-[32px]"})},sa={"home-based":"You travel to your stylist’s home","salon-based":"You travel to your stylist’s salon",mobile:"Your stylist travels to you"},Xe=({service:e,selectedService:n,handleSelectService:a,loading:s})=>{if(s)return t.jsxs("div",{className:"flex items-center justify-between gap-[1rem] w-full p-1 border border-gray-200 rounded-lg",children:[t.jsx(V.Avatar,{size:48,shape:"circle",active:!0}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx(V.Input,{style:{width:80,marginTop:8},active:!0}),t.jsx(V.Input,{style:{width:80,marginTop:4},active:!0})]})]});if(!e)return null;const d=e.toLowerCase(),g=(n==null?void 0:n.toLowerCase())===d;return t.jsxs("div",{className:`flex items-center justify-center w-full p-1 border rounded-lg cursor-pointer transition-all duration-200 ${g?"bg-gray-200 border-gray-500":"border-gray-300"}`,onClick:()=>a(d),children:[t.jsx("input",{type:"radio",name:"serviceType",value:d,checked:g,onChange:()=>a(d),className:"hidden"}),t.jsxs("label",{className:"flex items-center gap-[1rem] cursor-pointer w-full h-full p-1 rounded-lg transition-all duration-200",children:[aa[d]||t.jsx("i",{className:"fas fa-home text-[32px]"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-semibold text-lg mt-2",children:e}),t.jsx("span",{className:"text-sm text-gray-600",children:sa[d]})]})]})]})};function ra(){const e=new URLSearchParams(window.location.search),n=e.get("radius"),a=e.get("location_name"),s=e.get("lat"),d=e.get("lng");if(n&&a&&s&&d){const g={radius:n,location_name:decodeURIComponent(a),lat:s,lng:d};document.cookie=`locationData=${encodeURIComponent(JSON.stringify(g))}; path=/`}}function oa(){const e=document.cookie.match(new RegExp("(^| )locationData=([^;]+)"));return e?JSON.parse(decodeURIComponent(e[2])):null}function ia({partnerId:e}){const[n,a]=c.useState(""),[s,d]=c.useState(!1),[g,l]=c.useState(null),[h,j]=c.useState(null),[S,N]=c.useState(!1),[C,M]=c.useState(!0),[w,$]=c.useState(""),[b,p]=c.useState(null),{setMobileTravelFee:D,setReadyForMobile:P,totalService:k}=X(),F=c.useRef(null),T=c.useRef(null),[Y,z]=c.useState(null);c.useEffect(()=>{(()=>{const i=oa();i&&i.lat&&i.lng&&p({latitude:parseFloat(i.lat),longitude:parseFloat(i.lng),name:i.location_name})})(),e&&I()},[e]),c.useEffect(()=>{const o=()=>{if(window.google&&window.google.maps&&window.google.maps.places&&F.current&&!T.current){const u={componentRestrictions:{country:"uk"},types:["geocode"]};T.current=new window.google.maps.places.Autocomplete(F.current,u),T.current.addListener("place_changed",()=>{const r=T.current.getPlace();if(!r.geometry){console.error("No geometry for this place");return}a(r.formatted_address);const f={latitude:r.geometry.location.lat(),longitude:r.geometry.location.lng(),address:r.formatted_address};z(f)})}};o();const i=setInterval(()=>{T.current||o()},500);return()=>{clearInterval(i),T.current&&(window.google.maps.event.clearInstanceListeners(T.current),T.current=null)}},[]),c.useEffect(()=>{Y&&h&&v(Y)},[Y,h]);const I=()=>{M(!0),$(""),ne("frohub/get_mobile_location_data",o=>{if(console.log("Partner location response:",o),o.success){let i,u=[];o.data&&o.data.data?i=o.data.data:o.data?i=o.data:i=o,i.radius_fees?u=i.radius_fees:i.radiusFees?u=i.radiusFees:o.radius_fees&&(u=o.radius_fees);const r=parseFloat(i.latitude||i.lat||0),f=parseFloat(i.longitude||i.lng||0);if(r&&f&&u&&u.length>0){const m={latitude:r,longitude:f,radiusFees:u.map(y=>({radius:parseFloat(y.radius||y.distance||0),price:parseFloat(y.price||y.fee||0)}))};console.log("Setting partner location:",m),j(m)}else console.error("Invalid location data structure:",i),$("Failed to parse partner location data.")}else $("Failed to fetch partner location."),console.error("Error fetching location:",o.message||"Unknown error");M(!1)},{partner_id:e})};c.useEffect(()=>{h&&b&&!C&&E()},[h,b,C]);const A=(o,i,u,r)=>{const m=(u-o)*Math.PI/180,y=(r-i)*Math.PI/180,x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(o*Math.PI/180)*Math.cos(u*Math.PI/180)*Math.sin(y/2)*Math.sin(y/2);return 3958.8*(2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x)))},E=()=>{if(l(null),d(!1),$(""),N(!0),!h){$("Partner location not loaded."),N(!1);return}const o=A(h.latitude,h.longitude,b.latitude,b.longitude);console.log("Distance calculated:",o,"miles"),console.log("Partner radius fees:",h.radiusFees);let i=null;for(const u of h.radiusFees)if(o<=u.radius){i=u.price;break}i!==null?(d(!0),l(i),D(i),X.setState({readyForMobile:!0})):(d(!1),k<1?$("Oops! They don't cover your area. Try another stylist nearby."):$("Oops! Mobile's not available in your area. Check if they offer home or salon services, or explore other stylists nearby."),D(0),X.setState({readyForMobile:!1})),N(!1)},v=o=>{if(console.log("Checking location:",o),console.log("Partner location available:",h),l(null),d(!1),$(""),N(!0),!h){console.error("Partner location not loaded when checking location"),$("Partner location not loaded. Please try again."),N(!1);return}const i=A(h.latitude,h.longitude,o.latitude,o.longitude);console.log("Distance calculated:",i,"miles"),console.log("Partner radius fees:",h.radiusFees);let u=null;for(const r of h.radiusFees)if(i<=r.radius){u=r.price;break}u!==null?(d(!0),l(u),D(u),X.setState({readyForMobile:!0})):(d(!1),k<1?$("Oops! They don't cover your area. Try another stylist nearby."):$("Oops! Mobile's not available in your area. Check if they offer home or salon services, or explore other stylists nearby."),D(0),X.setState({readyForMobile:!1})),N(!1)},O=o=>{a(o.target.value)};return C?t.jsxs("div",{className:"mt-4 mb-6 p-4 border border-gray-300 rounded-lg bg-white",children:[t.jsx(V.Button,{block:!0,active:!0,className:"h-10"}),t.jsx(V.Input,{active:!0,className:"w-full h-6 mb-3"})]}):t.jsxs("div",{className:"sm:w-full md:w-5/6 mt-4 mb-6 p-4 border border-gray-300 rounded-xl bg-[#F5F5F5]",children:[b?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"font-medium mt-2 mb-3",children:b.name}),t.jsxs("div",{children:[S&&t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Checking availability..."}),s&&g!==null&&t.jsxs("div",{className:"flex items-center text-green-600 font-semibold mt-2",children:[t.jsx(We,{className:"w-5 h-5 mr-1"}),"You are inside the service area."]}),w&&t.jsxs("div",{className:"flex items-center text-red-500 font-semibold mt-2",children:[t.jsx(Ge,{className:"w-5 h-5 mr-1"}),w]})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-sm text-gray-700",children:"To check if you are within their mobile service area, enter your location or postcode."}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-start items-center gap-6 mt-3",children:[t.jsx("div",{className:"sm:w-full md:w-[35%]",children:t.jsx("input",{ref:F,type:"text",placeholder:"Enter Location Or Postcode",value:n,onChange:O,className:"us-field-style_2"})}),t.jsxs("div",{children:[S&&t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Checking location..."}),s&&g!==null&&t.jsxs("div",{className:"flex text-sm font-semibold mt-2",children:[t.jsx(We,{className:"w-5 h-5 mr-1"}),"Yasss! You're in the service area - this stylist can come to you!"]}),w&&t.jsxs("div",{className:"flex items-center text-red-500 font-semibold mt-2",children:[t.jsx(Ge,{className:"w-5 h-5 mr-1"}),w]})]})]})]}),s&&g!==null&&t.jsxs(t.Fragment,{children:[t.jsxs("p",{className:"!mt-4 text-lg font-semibold",children:["Mobile Travel Fee: ",t.jsxs("span",{className:"text-gray-900",children:["+£",g.toFixed(2)]})]}),t.jsx("input",{type:"hidden",name:"travelFee",value:g.toFixed(2)}),t.jsx("input",{type:"hidden",name:"postCode",value:(Y==null?void 0:Y.address)||(b==null?void 0:b.name)||n})]}),b&&t.jsxs("button",{onClick:()=>{document.cookie="frohub_location=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",p(null),l(null),d(!1)},className:"flex items-center gap-1 text-sm text-red-600 hover:text-red-800 mt-2",children:[t.jsx(Hn,{className:"w-4 h-4"}),"Reset Location"]})]})}function ca({productId:e,partnerId:n,onServiceTypeChange:a}){const[s,d]=c.useState([]),[g,l]=c.useState(null),[h,j]=c.useState(!0),{setTotalService:S}=X();c.useEffect(()=>{e&&(j(!0),ne("frohub/get_service_type",C=>{var M,w;if(C.success&&((M=C.data)!=null&&M.data)&&Array.isArray(C.data.data)){const $=((w=C.data.data[0])==null?void 0:w.toLowerCase())||null;d(C.data.data),S(C.data.data.length),l($),a($)}j(!1)},{product_id:e}))},[e]);const N=C=>{const M=C.toLowerCase();l(M),a(M)};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:["Service Type",t.jsx("form",{children:t.jsx("div",{className:"grid sm:grid-cols-1 md:grid-cols-3 gap-4 mt-3 mb-6",children:h?Array.from({length:3}).map((C,M)=>t.jsx(Xe,{loading:!0},M)):s.map(C=>t.jsx(Xe,{service:C,selectedService:g,handleSelectService:N,loading:!1},C.toLowerCase()))})})]}),g==="mobile"&&t.jsx(ia,{partnerId:n})]})}const la=({addOn:e,selectedAddOns:n,handleSelectAddOn:a,loading:s})=>s?t.jsx("div",{className:"px-4 py-2 border rounded-full",children:t.jsx(V.Input,{style:{width:150},active:!0})}):e?t.jsxs("label",{className:`inline-flex items-center cursor-pointer px-4 py-2 border rounded-full ${n.includes(e)?"fhcheck-selected border-gray-500":"border-gray-300"}`,children:[t.jsx("input",{type:"checkbox",className:"hidden",checked:n.includes(e),onChange:()=>a(e),"data-add-on-name":e.name,"data-add-on-id":e.id,"data-price":e.price,"data-duration":e.duration_minutes}),t.jsxs("span",{className:"text-gray-700 text-sm",children:[e.name," + £",e.price,e.duration_minutes>0&&` (${e.duration_minutes} mins)`]})]}):null;function da({productId:e,setProductId:n,selectedAddOns:a,setSelectedAddOns:s,setProductPrice:d}){const{selectedDate:g,setAvailabilityData:l}=X(),[h,j]=c.useState([]),[S,N]=c.useState(null),[C,M]=c.useState(!0);c.useEffect(()=>{(()=>{const b=document.querySelector(".frohub_add_to_cart");b&&n(b.dataset.productId)})()},[n]),c.useEffect(()=>{e&&(()=>{M(!0),ne("frohub/get_addons",b=>{b.success?(j(b.data.add_ons||[]),d(parseFloat(b.data.product_price)||0)):(console.error("Error fetching add-ons:",b.message),N(b.message)),M(!1)},{product_id:e})})()},[e,d]),c.useEffect(()=>{const $=a.map(p=>p.id),b=document.getElementById("frohub-selected-addon-ids");b&&(b.value=JSON.stringify($))},[a]);const w=$=>{X.setState({loading:!0});const b=parseInt($.duration_minutes,10)||0;s(p=>{let D;p.some(k=>k.id===$.id)?(d(k=>k-parseFloat($.price)),X.setState(k=>({addonTotalTime:(k.addonTotalTime||0)-b})),D=p.filter(k=>k.id!==$.id)):(d(k=>k+parseFloat($.price)),X.setState(k=>({addonTotalTime:(k.addonTotalTime||0)+b})),D=[...p,$]);const P=D.map(k=>k.id);return ne("frohub/get_availibility",k=>{k.success?l(k.data.availability):console.error("Error fetching availability:",k.message),X.setState({loading:!1})},{product_id:e,date:g,addons_id:P}),D})};return t.jsxs("div",{children:[t.jsx("input",{type:"hidden",id:"frohub-selected-addon-ids",name:"frohub-selected-addon-ids",value:JSON.stringify(a.map($=>$.id))}),C?t.jsx("div",{className:"flex gap-2 !mb-3",children:Array.from({length:3}).map(($,b)=>t.jsx(V.Button,{active:!0,style:{width:150,height:40,borderRadius:20}},b))}):e?t.jsx(t.Fragment,{children:S?t.jsxs("p",{children:["Error: ",S]}):t.jsx(t.Fragment,{children:Array.isArray(h)&&h.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mb-3",children:"Select add-ons"}),t.jsx("ul",{className:"flex justify-start items-start gap-2 !list-none !p-0 !m-0 !mb-3",children:h.map($=>t.jsx("li",{children:t.jsx(la,{addOn:$,selectedAddOns:a,handleSelectAddOn:w})},$.id))})]})})}):t.jsx("p",{children:"Loading add-ons..."})]})}function ua(){const[e,n]=c.useState(null),[a,s]=c.useState(null),[d,g]=c.useState([]),[l,h]=c.useState(0),[j,S]=c.useState(""),{setProductId:N,setSelectedAddOns:C,setProductPrice:M,setSelectedServiceType:w}=X();c.useEffect(()=>{const b=document.querySelector(".frohub_add_to_cart");if(b){const p=b.getAttribute("data-partner-id");p&&n(p)}},[]),c.useEffect(()=>{N(a)},[a,N]),c.useEffect(()=>{C(d)},[d,C]),c.useEffect(()=>{M(l)},[l,M]),c.useEffect(()=>{w(j)},[j,w]);const $=b=>{S(b)};return t.jsxs("div",{children:[t.jsx(da,{productId:a,setProductId:s,selectedAddOns:d,setSelectedAddOns:g,setProductPrice:h}),t.jsx(ca,{productId:a,partnerId:e,onServiceTypeChange:$})]})}ra();const De=document.querySelector(".frohub_add_to_cart");if(De){const e=De.getAttribute("data-key");ve.createRoot(De).render(t.jsx(ua,{dataKey:e}))}const fa=document.querySelectorAll(".frohub_calender");fa.forEach(e=>{const n=e.getAttribute("data-key");ve.createRoot(e).render(t.jsx(ta,{dataKey:n}))});const ma=document.querySelectorAll(".request_book_button");ma.forEach(e=>{const n=e.getAttribute("data-key");ve.createRoot(e).render(t.jsx(Jn,{dataKey:n}))});const ha=document.querySelectorAll(".customer_message");ha.forEach(e=>{const n=e.getAttribute("data-key");ve.createRoot(e).render(t.jsx(Pn,{dataKey:n}))});const ga=document.querySelectorAll(".customer_message_mobile");ga.forEach(e=>{const n=e.getAttribute("data-key");ve.createRoot(e).render(t.jsx(An,{dataKey:n}))});
