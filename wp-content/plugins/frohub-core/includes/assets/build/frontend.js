import{r as c,_ as oe,a as Qe,p as bt,b as _e,c as se,d as ke,K as St,R as G,C as jt,e as et,f as he,g as ge,h as Ct,i as me,j as Nt,u as pe,k as wt,l as _t,m as Mt,n as $t,o as Dt,q as Ee,s as tt,t as kt,v as It,w as Et,x as At,y as Pt,z as Tt,A as Ft,B as Ae,D as Yt,E as Rt,F as Lt,G as t,H as ne,S as K,I as Ye,J as Ot}from"./assets/fetchData-Bu2Fg7x9.js";var nt=c.forwardRef(function(e,n){var a=e.prefixCls,s=e.style,d=e.className,g=e.duration,l=g===void 0?4.5:g,h=e.showProgress,j=e.pauseOnHover,S=j===void 0?!0:j,N=e.eventKey,C=e.content,_=e.closable,w=e.closeIcon,$=w===void 0?"x":w,b=e.props,p=e.onClick,D=e.onNoticeClose,T=e.times,k=e.hovering,F=c.useState(!1),Y=oe(F,2),A=Y[0],B=Y[1],I=c.useState(0),P=oe(I,2),E=P[0],v=P[1],R=c.useState(0),o=oe(R,2),i=o[0],u=o[1],r=k||A,f=l>0&&h,m=function(){D(N)},y=function(z){(z.key==="Enter"||z.code==="Enter"||z.keyCode===St.ENTER)&&m()};c.useEffect(function(){if(!r&&l>0){var O=Date.now()-i,z=setTimeout(function(){m()},l*1e3-i);return function(){S&&clearTimeout(z),u(Date.now()-O)}}},[l,r,T]),c.useEffect(function(){if(!r&&f&&(S||i===0)){var O=performance.now(),z,q=function W(){cancelAnimationFrame(z),z=requestAnimationFrame(function(X){var V=X+i-O,U=Math.min(V/(l*1e3),1);v(U*100),U<1&&W()})};return q(),function(){S&&cancelAnimationFrame(z)}}},[l,i,r,f,T]);var x=c.useMemo(function(){return Qe(_)==="object"&&_!==null?_:_?{closeIcon:$}:{}},[_,$]),M=bt(x,!0),H=100-(!E||E<0?0:E>100?100:E),L="".concat(a,"-notice");return c.createElement("div",_e({},b,{ref:n,className:se(L,d,ke({},"".concat(L,"-closable"),_)),style:s,onMouseEnter:function(z){var q;B(!0),b==null||(q=b.onMouseEnter)===null||q===void 0||q.call(b,z)},onMouseLeave:function(z){var q;B(!1),b==null||(q=b.onMouseLeave)===null||q===void 0||q.call(b,z)},onClick:p}),c.createElement("div",{className:"".concat(L,"-content")},C),_&&c.createElement("a",_e({tabIndex:0,className:"".concat(L,"-close"),onKeyDown:y,"aria-label":"Close"},M,{onClick:function(z){z.preventDefault(),z.stopPropagation(),m()}}),x.closeIcon),f&&c.createElement("progress",{className:"".concat(L,"-progress"),max:"100",value:H},H+"%"))}),at=G.createContext({}),Bt=function(n){var a=n.children,s=n.classNames;return G.createElement(at.Provider,{value:{classNames:s}},a)},Re=8,Le=3,Oe=16,Ht=function(n){var a={offset:Re,threshold:Le,gap:Oe};if(n&&Qe(n)==="object"){var s,d,g;a.offset=(s=n.offset)!==null&&s!==void 0?s:Re,a.threshold=(d=n.threshold)!==null&&d!==void 0?d:Le,a.gap=(g=n.gap)!==null&&g!==void 0?g:Oe}return[!!n,a]},zt=["className","style","classNames","styles"],qt=function(n){var a=n.configList,s=n.placement,d=n.prefixCls,g=n.className,l=n.style,h=n.motion,j=n.onAllNoticeRemoved,S=n.onNoticeClose,N=n.stack,C=c.useContext(at),_=C.classNames,w=c.useRef({}),$=c.useState(null),b=oe($,2),p=b[0],D=b[1],T=c.useState([]),k=oe(T,2),F=k[0],Y=k[1],A=a.map(function(r){return{config:r,key:String(r.key)}}),B=Ht(N),I=oe(B,2),P=I[0],E=I[1],v=E.offset,R=E.threshold,o=E.gap,i=P&&(F.length>0||A.length<=R),u=typeof h=="function"?h(s):h;return c.useEffect(function(){P&&F.length>1&&Y(function(r){return r.filter(function(f){return A.some(function(m){var y=m.key;return f===y})})})},[F,A,P]),c.useEffect(function(){var r;if(P&&w.current[(r=A[A.length-1])===null||r===void 0?void 0:r.key]){var f;D(w.current[(f=A[A.length-1])===null||f===void 0?void 0:f.key])}},[A,P]),G.createElement(jt,_e({key:s,className:se(d,"".concat(d,"-").concat(s),_==null?void 0:_.list,g,ke(ke({},"".concat(d,"-stack"),!!P),"".concat(d,"-stack-expanded"),i)),style:l,keys:A,motionAppear:!0},u,{onAllRemoved:function(){j(s)}}),function(r,f){var m=r.config,y=r.className,x=r.style,M=r.index,H=m,L=H.key,O=H.times,z=String(L),q=m,W=q.className,X=q.style,V=q.classNames,U=q.styles,Q=et(q,zt),ee=A.findIndex(function(be){return be.key===z}),te={};if(P){var re=A.length-1-(ee>-1?ee:M-1),ie=s==="top"||s==="bottom"?"-50%":"0";if(re>0){var ce,le,de;te.height=i?(ce=w.current[z])===null||ce===void 0?void 0:ce.offsetHeight:p==null?void 0:p.offsetHeight;for(var fe=0,ye=0;ye<re;ye++){var $e;fe+=(($e=w.current[A[A.length-1-ye].key])===null||$e===void 0?void 0:$e.offsetHeight)+o}var xt=(i?fe:re*v)*(s.startsWith("top")?1:-1),vt=!i&&p!==null&&p!==void 0&&p.offsetWidth&&(le=w.current[z])!==null&&le!==void 0&&le.offsetWidth?((p==null?void 0:p.offsetWidth)-v*2*(re<3?re:3))/((de=w.current[z])===null||de===void 0?void 0:de.offsetWidth):1;te.transform="translate3d(".concat(ie,", ").concat(xt,"px, 0) scaleX(").concat(vt,")")}else te.transform="translate3d(".concat(ie,", 0, 0)")}return G.createElement("div",{ref:f,className:se("".concat(d,"-notice-wrapper"),y,V==null?void 0:V.wrapper),style:he(he(he({},x),te),U==null?void 0:U.wrapper),onMouseEnter:function(){return Y(function(ue){return ue.includes(z)?ue:[].concat(ge(ue),[z])})},onMouseLeave:function(){return Y(function(ue){return ue.filter(function(yt){return yt!==z})})}},G.createElement(nt,_e({},Q,{ref:function(ue){ee>-1?w.current[z]=ue:delete w.current[z]},prefixCls:d,classNames:V,styles:U,className:se(W,_==null?void 0:_.notice),style:X,times:O,key:L,eventKey:L,onNoticeClose:S,hovering:P&&F.length>0})))})},Ut=c.forwardRef(function(e,n){var a=e.prefixCls,s=a===void 0?"rc-notification":a,d=e.container,g=e.motion,l=e.maxCount,h=e.className,j=e.style,S=e.onAllRemoved,N=e.stack,C=e.renderNotifications,_=c.useState([]),w=oe(_,2),$=w[0],b=w[1],p=function(P){var E,v=$.find(function(R){return R.key===P});v==null||(E=v.onClose)===null||E===void 0||E.call(v),b(function(R){return R.filter(function(o){return o.key!==P})})};c.useImperativeHandle(n,function(){return{open:function(P){b(function(E){var v=ge(E),R=v.findIndex(function(u){return u.key===P.key}),o=he({},P);if(R>=0){var i;o.times=(((i=E[R])===null||i===void 0?void 0:i.times)||0)+1,v[R]=o}else o.times=0,v.push(o);return l>0&&v.length>l&&(v=v.slice(-l)),v})},close:function(P){p(P)},destroy:function(){b([])}}});var D=c.useState({}),T=oe(D,2),k=T[0],F=T[1];c.useEffect(function(){var I={};$.forEach(function(P){var E=P.placement,v=E===void 0?"topRight":E;v&&(I[v]=I[v]||[],I[v].push(P))}),Object.keys(k).forEach(function(P){I[P]=I[P]||[]}),F(I)},[$]);var Y=function(P){F(function(E){var v=he({},E),R=v[P]||[];return R.length||delete v[P],v})},A=c.useRef(!1);if(c.useEffect(function(){Object.keys(k).length>0?A.current=!0:A.current&&(S==null||S(),A.current=!1)},[k]),!d)return null;var B=Object.keys(k);return Ct.createPortal(c.createElement(c.Fragment,null,B.map(function(I){var P=k[I],E=c.createElement(qt,{key:I,configList:P,placement:I,prefixCls:s,className:h==null?void 0:h(I),style:j==null?void 0:j(I),motion:g,onNoticeClose:p,onAllNoticeRemoved:Y,stack:N});return C?C(E,{prefixCls:s,key:I}):E})),d)}),Wt=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],Gt=function(){return document.body},Be=0;function Kt(){for(var e={},n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return a.forEach(function(d){d&&Object.keys(d).forEach(function(g){var l=d[g];l!==void 0&&(e[g]=l)})}),e}function Vt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.getContainer,a=n===void 0?Gt:n,s=e.motion,d=e.prefixCls,g=e.maxCount,l=e.className,h=e.style,j=e.onAllRemoved,S=e.stack,N=e.renderNotifications,C=et(e,Wt),_=c.useState(),w=oe(_,2),$=w[0],b=w[1],p=c.useRef(),D=c.createElement(Ut,{container:$,ref:p,prefixCls:d,motion:s,maxCount:g,className:l,style:h,onAllRemoved:j,stack:S,renderNotifications:N}),T=c.useState([]),k=oe(T,2),F=k[0],Y=k[1],A=c.useMemo(function(){return{open:function(I){var P=Kt(C,I);(P.key===null||P.key===void 0)&&(P.key="rc-notification-".concat(Be),Be+=1),Y(function(E){return[].concat(ge(E),[{type:"open",config:P}])})},close:function(I){Y(function(P){return[].concat(ge(P),[{type:"close",key:I}])})},destroy:function(){Y(function(I){return[].concat(ge(I),[{type:"destroy"}])})}}},[]);return c.useEffect(function(){b(a())}),c.useEffect(function(){p.current&&F.length&&(F.forEach(function(B){switch(B.type){case"open":p.current.open(B.config);break;case"close":p.current.close(B.key);break;case"destroy":p.current.destroy();break}}),Y(function(B){return B.filter(function(I){return!F.includes(I)})}))},[F]),[A,D]}const Jt=e=>{const{componentCls:n,notificationMarginEdge:a,animationMaxHeight:s}=e,d=`${n}-notice`,g=new me("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),l=new me("antNotificationTopFadeIn",{"0%":{top:-s,opacity:0},"100%":{top:0,opacity:1}}),h=new me("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(s).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),j=new me("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[n]:{[`&${n}-top, &${n}-bottom`]:{marginInline:0,[d]:{marginInline:"auto auto"}},[`&${n}-top`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:l}},[`&${n}-bottom`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:h}},[`&${n}-topRight, &${n}-bottomRight`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:g}},[`&${n}-topLeft, &${n}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:a,_skip_check_:!0},[d]:{marginInlineEnd:"auto",marginInlineStart:0},[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:j}}}}},Zt=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Xt={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},Qt=(e,n)=>{const{componentCls:a}=e;return{[`${a}-${n}`]:{[`&${a}-stack > ${a}-notice-wrapper`]:{[n.startsWith("top")?"top":"bottom"]:0,[Xt[n]]:{value:0,_skip_check_:!0}}}}},en=e=>{const n={};for(let a=1;a<e.notificationStackLayer;a++)n[`&:nth-last-child(${a+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},n)},tn=e=>{const n={};for(let a=1;a<e.notificationStackLayer;a++)n[`&:nth-last-child(${a+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},n)},nn=e=>{const{componentCls:n}=e;return Object.assign({[`${n}-stack`]:{[`& > ${n}-notice-wrapper`]:Object.assign({transition:`transform ${e.motionDurationSlow}, backdrop-filter 0s`,willChange:"transform, opacity",position:"absolute"},en(e))},[`${n}-stack:not(${n}-stack-expanded)`]:{[`& > ${n}-notice-wrapper`]:Object.assign({},tn(e))},[`${n}-stack${n}-stack-expanded`]:{[`& > ${n}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Zt.map(a=>Qt(e,a)).reduce((a,s)=>Object.assign(Object.assign({},a),s),{}))},st=e=>{const{iconCls:n,componentCls:a,boxShadow:s,fontSizeLG:d,notificationMarginBottom:g,borderRadiusLG:l,colorSuccess:h,colorInfo:j,colorWarning:S,colorError:N,colorTextHeading:C,notificationBg:_,notificationPadding:w,notificationMarginEdge:$,notificationProgressBg:b,notificationProgressHeight:p,fontSize:D,lineHeight:T,width:k,notificationIconSize:F,colorText:Y}=e,A=`${a}-notice`;return{position:"relative",marginBottom:g,marginInlineStart:"auto",background:_,borderRadius:l,boxShadow:s,[A]:{padding:w,width:k,maxWidth:`calc(100vw - ${pe(e.calc($).mul(2).equal())})`,overflow:"hidden",lineHeight:T,wordWrap:"break-word"},[`${A}-message`]:{marginBottom:e.marginXS,color:C,fontSize:d,lineHeight:e.lineHeightLG},[`${A}-description`]:{fontSize:D,color:Y},[`${A}-closable ${A}-message`]:{paddingInlineEnd:e.paddingLG},[`${A}-with-icon ${A}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(F).equal(),fontSize:d},[`${A}-with-icon ${A}-description`]:{marginInlineStart:e.calc(e.marginSM).add(F).equal(),fontSize:D},[`${A}-icon`]:{position:"absolute",fontSize:F,lineHeight:1,[`&-success${n}`]:{color:h},[`&-info${n}`]:{color:j},[`&-warning${n}`]:{color:S},[`&-error${n}`]:{color:N}},[`${A}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},wt(e)),[`${A}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${pe(l)} * 2)`,left:{_skip_check_:!0,value:l},right:{_skip_check_:!0,value:l},bottom:0,blockSize:p,border:0,"&, &::-webkit-progress-bar":{borderRadius:l,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:b},"&::-webkit-progress-value":{borderRadius:l,background:b}},[`${A}-btn`]:{float:"right",marginTop:e.marginSM}}},an=e=>{const{componentCls:n,notificationMarginBottom:a,notificationMarginEdge:s,motionDurationMid:d,motionEaseInOut:g}=e,l=`${n}-notice`,h=new me("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:a},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[n]:Object.assign(Object.assign({},_t(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:s,_skip_check_:!0},[`${n}-hook-holder`]:{position:"relative"},[`${n}-fade-appear-prepare`]:{opacity:"0 !important"},[`${n}-fade-enter, ${n}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:g,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${n}-fade-leave`]:{animationTimingFunction:g,animationFillMode:"both",animationDuration:d,animationPlayState:"paused"},[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationPlayState:"running"},[`${n}-fade-leave${n}-fade-leave-active`]:{animationName:h,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${l}-btn`]:{float:"left"}}})},{[n]:{[`${l}-wrapper`]:Object.assign({},st(e))}}]},rt=e=>({zIndexPopup:e.zIndexPopupBase+Mt+50,width:384}),ot=e=>{const n=e.paddingMD,a=e.paddingLG;return $t(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:n,notificationPaddingHorizontal:a,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${pe(e.paddingMD)} ${pe(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},it=Nt("Notification",e=>{const n=ot(e);return[an(n),Jt(n),nn(n)]},rt),sn=Dt(["Notification","PurePanel"],e=>{const n=`${e.componentCls}-notice`,a=ot(e);return{[`${n}-pure-panel`]:Object.assign(Object.assign({},st(a)),{width:a.width,maxWidth:`calc(100vw - ${pe(e.calc(a.notificationMarginEdge).mul(2).equal())})`,margin:0})}},rt);var rn=function(e,n){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,s=Object.getOwnPropertySymbols(e);d<s.length;d++)n.indexOf(s[d])<0&&Object.prototype.propertyIsEnumerable.call(e,s[d])&&(a[s[d]]=e[s[d]]);return a};function Pe(e,n){return n===null||n===!1?null:n||c.createElement(kt,{className:`${e}-close-icon`})}const on={success:It,info:Et,error:At,warning:Pt},ct=e=>{const{prefixCls:n,icon:a,type:s,message:d,description:g,btn:l,role:h="alert"}=e;let j=null;return a?j=c.createElement("span",{className:`${n}-icon`},a):s&&(j=c.createElement(on[s]||null,{className:se(`${n}-icon`,`${n}-icon-${s}`)})),c.createElement("div",{className:se({[`${n}-with-icon`]:j}),role:h},j,c.createElement("div",{className:`${n}-message`},d),c.createElement("div",{className:`${n}-description`},g),l&&c.createElement("div",{className:`${n}-btn`},l))},cn=e=>{const{prefixCls:n,className:a,icon:s,type:d,message:g,description:l,btn:h,closable:j=!0,closeIcon:S,className:N}=e,C=rn(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon","className"]),{getPrefixCls:_}=c.useContext(Ee),w=n||_("notification"),$=`${w}-notice`,b=tt(w),[p,D,T]=it(w,b);return p(c.createElement("div",{className:se(`${$}-pure-panel`,D,a,T,b)},c.createElement(sn,{prefixCls:w}),c.createElement(nt,Object.assign({},C,{prefixCls:w,eventKey:"pure",duration:null,closable:j,className:se({notificationClassName:N}),closeIcon:Pe(w,S),content:c.createElement(ct,{prefixCls:$,icon:s,type:d,message:g,description:l,btn:h})}))))};function ln(e,n,a){let s;switch(e){case"top":s={left:"50%",transform:"translateX(-50%)",right:"auto",top:n,bottom:"auto"};break;case"topLeft":s={left:0,top:n,bottom:"auto"};break;case"topRight":s={right:0,top:n,bottom:"auto"};break;case"bottom":s={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:a};break;case"bottomLeft":s={left:0,top:"auto",bottom:a};break;default:s={right:0,top:"auto",bottom:a};break}return s}function dn(e){return{motionName:`${e}-fade`}}function un(e,n,a){return typeof e<"u"?e:typeof(n==null?void 0:n.closeIcon)<"u"?n.closeIcon:a==null?void 0:a.closeIcon}var fn=function(e,n){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,s=Object.getOwnPropertySymbols(e);d<s.length;d++)n.indexOf(s[d])<0&&Object.prototype.propertyIsEnumerable.call(e,s[d])&&(a[s[d]]=e[s[d]]);return a};const He=24,mn=4.5,hn="topRight",gn=e=>{let{children:n,prefixCls:a}=e;const s=tt(a),[d,g,l]=it(a,s);return d(G.createElement(Bt,{classNames:{list:se(g,l,s)}},n))},pn=(e,n)=>{let{prefixCls:a,key:s}=n;return G.createElement(gn,{prefixCls:a,key:s},e)},xn=G.forwardRef((e,n)=>{const{top:a,bottom:s,prefixCls:d,getContainer:g,maxCount:l,rtl:h,onAllRemoved:j,stack:S,duration:N,pauseOnHover:C=!0,showProgress:_}=e,{getPrefixCls:w,getPopupContainer:$,notification:b,direction:p}=c.useContext(Ee),[,D]=Tt(),T=d||w("notification"),k=I=>ln(I,a??He,s??He),F=()=>se({[`${T}-rtl`]:h??p==="rtl"}),Y=()=>dn(T),[A,B]=Vt({prefixCls:T,style:k,className:F,motion:Y,closable:!0,closeIcon:Pe(T),duration:N??mn,getContainer:()=>(g==null?void 0:g())||($==null?void 0:$())||document.body,maxCount:l,pauseOnHover:C,showProgress:_,onAllRemoved:j,renderNotifications:pn,stack:S===!1?!1:{threshold:typeof S=="object"?S==null?void 0:S.threshold:void 0,offset:8,gap:D.margin}});return G.useImperativeHandle(n,()=>Object.assign(Object.assign({},A),{prefixCls:T,notification:b})),B});function lt(e){const n=G.useRef(null);return Ft(),[G.useMemo(()=>{const s=h=>{var j;if(!n.current)return;const{open:S,prefixCls:N,notification:C}=n.current,_=`${N}-notice`,{message:w,description:$,icon:b,type:p,btn:D,className:T,style:k,role:F="alert",closeIcon:Y,closable:A}=h,B=fn(h,["message","description","icon","type","btn","className","style","role","closeIcon","closable"]),I=Pe(_,un(Y,e,C));return S(Object.assign(Object.assign({placement:(j=e==null?void 0:e.placement)!==null&&j!==void 0?j:hn},B),{content:G.createElement(ct,{prefixCls:_,icon:b,type:p,message:w,description:$,btn:D,role:F}),className:se(p&&`${_}-${p}`,T,C==null?void 0:C.className),style:Object.assign(Object.assign({},C==null?void 0:C.style),k),closeIcon:I,closable:A??!!I}))},g={open:s,destroy:h=>{var j,S;h!==void 0?(j=n.current)===null||j===void 0||j.close(h):(S=n.current)===null||S===void 0||S.destroy()}};return["success","info","warning","error"].forEach(h=>{g[h]=j=>s(Object.assign(Object.assign({},j),{type:h}))}),g},[]),G.createElement(xn,Object.assign({key:"notification-holder"},e,{ref:n}))]}function vn(e){return lt(e)}const yn=G.createContext({});var je={exports:{}},bn=je.exports,ze;function Sn(){return ze||(ze=1,function(e,n){(function(a,s){e.exports=s()})(bn,function(){var a=1e3,s=6e4,d=36e5,g="millisecond",l="second",h="minute",j="hour",S="day",N="week",C="month",_="quarter",w="year",$="date",b="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,D=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,T={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(i){var u=["th","st","nd","rd"],r=i%100;return"["+i+(u[(r-20)%10]||u[r]||u[0])+"]"}},k=function(i,u,r){var f=String(i);return!f||f.length>=u?i:""+Array(u+1-f.length).join(r)+i},F={s:k,z:function(i){var u=-i.utcOffset(),r=Math.abs(u),f=Math.floor(r/60),m=r%60;return(u<=0?"+":"-")+k(f,2,"0")+":"+k(m,2,"0")},m:function i(u,r){if(u.date()<r.date())return-i(r,u);var f=12*(r.year()-u.year())+(r.month()-u.month()),m=u.clone().add(f,C),y=r-m<0,x=u.clone().add(f+(y?-1:1),C);return+(-(f+(r-m)/(y?m-x:x-m))||0)},a:function(i){return i<0?Math.ceil(i)||0:Math.floor(i)},p:function(i){return{M:C,y:w,w:N,d:S,D:$,h:j,m:h,s:l,ms:g,Q:_}[i]||String(i||"").toLowerCase().replace(/s$/,"")},u:function(i){return i===void 0}},Y="en",A={};A[Y]=T;var B="$isDayjsObject",I=function(i){return i instanceof R||!(!i||!i[B])},P=function i(u,r,f){var m;if(!u)return Y;if(typeof u=="string"){var y=u.toLowerCase();A[y]&&(m=y),r&&(A[y]=r,m=y);var x=u.split("-");if(!m&&x.length>1)return i(x[0])}else{var M=u.name;A[M]=u,m=M}return!f&&m&&(Y=m),m||!f&&Y},E=function(i,u){if(I(i))return i.clone();var r=typeof u=="object"?u:{};return r.date=i,r.args=arguments,new R(r)},v=F;v.l=P,v.i=I,v.w=function(i,u){return E(i,{locale:u.$L,utc:u.$u,x:u.$x,$offset:u.$offset})};var R=function(){function i(r){this.$L=P(r.locale,null,!0),this.parse(r),this.$x=this.$x||r.x||{},this[B]=!0}var u=i.prototype;return u.parse=function(r){this.$d=function(f){var m=f.date,y=f.utc;if(m===null)return new Date(NaN);if(v.u(m))return new Date;if(m instanceof Date)return new Date(m);if(typeof m=="string"&&!/Z$/i.test(m)){var x=m.match(p);if(x){var M=x[2]-1||0,H=(x[7]||"0").substring(0,3);return y?new Date(Date.UTC(x[1],M,x[3]||1,x[4]||0,x[5]||0,x[6]||0,H)):new Date(x[1],M,x[3]||1,x[4]||0,x[5]||0,x[6]||0,H)}}return new Date(m)}(r),this.init()},u.init=function(){var r=this.$d;this.$y=r.getFullYear(),this.$M=r.getMonth(),this.$D=r.getDate(),this.$W=r.getDay(),this.$H=r.getHours(),this.$m=r.getMinutes(),this.$s=r.getSeconds(),this.$ms=r.getMilliseconds()},u.$utils=function(){return v},u.isValid=function(){return this.$d.toString()!==b},u.isSame=function(r,f){var m=E(r);return this.startOf(f)<=m&&m<=this.endOf(f)},u.isAfter=function(r,f){return E(r)<this.startOf(f)},u.isBefore=function(r,f){return this.endOf(f)<E(r)},u.$g=function(r,f,m){return v.u(r)?this[f]:this.set(m,r)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(r,f){var m=this,y=!!v.u(f)||f,x=v.p(r),M=function(V,U){var Q=v.w(m.$u?Date.UTC(m.$y,U,V):new Date(m.$y,U,V),m);return y?Q:Q.endOf(S)},H=function(V,U){return v.w(m.toDate()[V].apply(m.toDate("s"),(y?[0,0,0,0]:[23,59,59,999]).slice(U)),m)},L=this.$W,O=this.$M,z=this.$D,q="set"+(this.$u?"UTC":"");switch(x){case w:return y?M(1,0):M(31,11);case C:return y?M(1,O):M(0,O+1);case N:var W=this.$locale().weekStart||0,X=(L<W?L+7:L)-W;return M(y?z-X:z+(6-X),O);case S:case $:return H(q+"Hours",0);case j:return H(q+"Minutes",1);case h:return H(q+"Seconds",2);case l:return H(q+"Milliseconds",3);default:return this.clone()}},u.endOf=function(r){return this.startOf(r,!1)},u.$set=function(r,f){var m,y=v.p(r),x="set"+(this.$u?"UTC":""),M=(m={},m[S]=x+"Date",m[$]=x+"Date",m[C]=x+"Month",m[w]=x+"FullYear",m[j]=x+"Hours",m[h]=x+"Minutes",m[l]=x+"Seconds",m[g]=x+"Milliseconds",m)[y],H=y===S?this.$D+(f-this.$W):f;if(y===C||y===w){var L=this.clone().set($,1);L.$d[M](H),L.init(),this.$d=L.set($,Math.min(this.$D,L.daysInMonth())).$d}else M&&this.$d[M](H);return this.init(),this},u.set=function(r,f){return this.clone().$set(r,f)},u.get=function(r){return this[v.p(r)]()},u.add=function(r,f){var m,y=this;r=Number(r);var x=v.p(f),M=function(O){var z=E(y);return v.w(z.date(z.date()+Math.round(O*r)),y)};if(x===C)return this.set(C,this.$M+r);if(x===w)return this.set(w,this.$y+r);if(x===S)return M(1);if(x===N)return M(7);var H=(m={},m[h]=s,m[j]=d,m[l]=a,m)[x]||1,L=this.$d.getTime()+r*H;return v.w(L,this)},u.subtract=function(r,f){return this.add(-1*r,f)},u.format=function(r){var f=this,m=this.$locale();if(!this.isValid())return m.invalidDate||b;var y=r||"YYYY-MM-DDTHH:mm:ssZ",x=v.z(this),M=this.$H,H=this.$m,L=this.$M,O=m.weekdays,z=m.months,q=m.meridiem,W=function(U,Q,ee,te){return U&&(U[Q]||U(f,y))||ee[Q].slice(0,te)},X=function(U){return v.s(M%12||12,U,"0")},V=q||function(U,Q,ee){var te=U<12?"AM":"PM";return ee?te.toLowerCase():te};return y.replace(D,function(U,Q){return Q||function(ee){switch(ee){case"YY":return String(f.$y).slice(-2);case"YYYY":return v.s(f.$y,4,"0");case"M":return L+1;case"MM":return v.s(L+1,2,"0");case"MMM":return W(m.monthsShort,L,z,3);case"MMMM":return W(z,L);case"D":return f.$D;case"DD":return v.s(f.$D,2,"0");case"d":return String(f.$W);case"dd":return W(m.weekdaysMin,f.$W,O,2);case"ddd":return W(m.weekdaysShort,f.$W,O,3);case"dddd":return O[f.$W];case"H":return String(M);case"HH":return v.s(M,2,"0");case"h":return X(1);case"hh":return X(2);case"a":return V(M,H,!0);case"A":return V(M,H,!1);case"m":return String(H);case"mm":return v.s(H,2,"0");case"s":return String(f.$s);case"ss":return v.s(f.$s,2,"0");case"SSS":return v.s(f.$ms,3,"0");case"Z":return x}return null}(U)||x.replace(":","")})},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(r,f,m){var y,x=this,M=v.p(f),H=E(r),L=(H.utcOffset()-this.utcOffset())*s,O=this-H,z=function(){return v.m(x,H)};switch(M){case w:y=z()/12;break;case C:y=z();break;case _:y=z()/3;break;case N:y=(O-L)/6048e5;break;case S:y=(O-L)/864e5;break;case j:y=O/d;break;case h:y=O/s;break;case l:y=O/a;break;default:y=O}return m?y:v.a(y)},u.daysInMonth=function(){return this.endOf(C).$D},u.$locale=function(){return A[this.$L]},u.locale=function(r,f){if(!r)return this.$L;var m=this.clone(),y=P(r,f,!0);return y&&(m.$L=y),m},u.clone=function(){return v.w(this.$d,this)},u.toDate=function(){return new Date(this.valueOf())},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},i}(),o=R.prototype;return E.prototype=o,[["$ms",g],["$s",l],["$m",h],["$H",j],["$W",S],["$M",C],["$y",w],["$D",$]].forEach(function(i){o[i[1]]=function(u){return this.$g(u,i[0],i[1])}}),E.extend=function(i,u){return i.$i||(i(u,R,E),i.$i=!0),E},E.locale=P,E.isDayjs=I,E.unix=function(i){return E(1e3*i)},E.en=A[Y],E.Ls=A,E.p={},E})}(je)),je.exports}var jn=Sn();const J=Ae(jn);var Ce={exports:{}},Cn=Ce.exports,qe;function Nn(){return qe||(qe=1,function(e,n){(function(a,s){e.exports=s()})(Cn,function(){var a={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},s=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,d=/\d/,g=/\d\d/,l=/\d\d?/,h=/\d*[^-_:/,()\s\d]+/,j={},S=function(p){return(p=+p)+(p>68?1900:2e3)},N=function(p){return function(D){this[p]=+D}},C=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(D){if(!D||D==="Z")return 0;var T=D.match(/([+-]|\d\d)/g),k=60*T[1]+(+T[2]||0);return k===0?0:T[0]==="+"?-k:k}(p)}],_=function(p){var D=j[p];return D&&(D.indexOf?D:D.s.concat(D.f))},w=function(p,D){var T,k=j.meridiem;if(k){for(var F=1;F<=24;F+=1)if(p.indexOf(k(F,0,D))>-1){T=F>12;break}}else T=p===(D?"pm":"PM");return T},$={A:[h,function(p){this.afternoon=w(p,!1)}],a:[h,function(p){this.afternoon=w(p,!0)}],Q:[d,function(p){this.month=3*(p-1)+1}],S:[d,function(p){this.milliseconds=100*+p}],SS:[g,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[l,N("seconds")],ss:[l,N("seconds")],m:[l,N("minutes")],mm:[l,N("minutes")],H:[l,N("hours")],h:[l,N("hours")],HH:[l,N("hours")],hh:[l,N("hours")],D:[l,N("day")],DD:[g,N("day")],Do:[h,function(p){var D=j.ordinal,T=p.match(/\d+/);if(this.day=T[0],D)for(var k=1;k<=31;k+=1)D(k).replace(/\[|\]/g,"")===p&&(this.day=k)}],w:[l,N("week")],ww:[g,N("week")],M:[l,N("month")],MM:[g,N("month")],MMM:[h,function(p){var D=_("months"),T=(_("monthsShort")||D.map(function(k){return k.slice(0,3)})).indexOf(p)+1;if(T<1)throw new Error;this.month=T%12||T}],MMMM:[h,function(p){var D=_("months").indexOf(p)+1;if(D<1)throw new Error;this.month=D%12||D}],Y:[/[+-]?\d+/,N("year")],YY:[g,function(p){this.year=S(p)}],YYYY:[/\d{4}/,N("year")],Z:C,ZZ:C};function b(p){var D,T;D=p,T=j&&j.formats;for(var k=(p=D.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(E,v,R){var o=R&&R.toUpperCase();return v||T[R]||a[R]||T[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(i,u,r){return u||r.slice(1)})})).match(s),F=k.length,Y=0;Y<F;Y+=1){var A=k[Y],B=$[A],I=B&&B[0],P=B&&B[1];k[Y]=P?{regex:I,parser:P}:A.replace(/^\[|\]$/g,"")}return function(E){for(var v={},R=0,o=0;R<F;R+=1){var i=k[R];if(typeof i=="string")o+=i.length;else{var u=i.regex,r=i.parser,f=E.slice(o),m=u.exec(f)[0];r.call(v,m),E=E.replace(m,"")}}return function(y){var x=y.afternoon;if(x!==void 0){var M=y.hours;x?M<12&&(y.hours+=12):M===12&&(y.hours=0),delete y.afternoon}}(v),v}}return function(p,D,T){T.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(S=p.parseTwoDigitYear);var k=D.prototype,F=k.parse;k.parse=function(Y){var A=Y.date,B=Y.utc,I=Y.args;this.$u=B;var P=I[1];if(typeof P=="string"){var E=I[2]===!0,v=I[3]===!0,R=E||v,o=I[2];v&&(o=I[2]),j=this.$locale(),!E&&o&&(j=T.Ls[o]),this.$d=function(f,m,y,x){try{if(["x","X"].indexOf(m)>-1)return new Date((m==="X"?1e3:1)*f);var M=b(m)(f),H=M.year,L=M.month,O=M.day,z=M.hours,q=M.minutes,W=M.seconds,X=M.milliseconds,V=M.zone,U=M.week,Q=new Date,ee=O||(H||L?1:Q.getDate()),te=H||Q.getFullYear(),re=0;H&&!L||(re=L>0?L-1:Q.getMonth());var ie,ce=z||0,le=q||0,de=W||0,fe=X||0;return V?new Date(Date.UTC(te,re,ee,ce,le,de,fe+60*V.offset*1e3)):y?new Date(Date.UTC(te,re,ee,ce,le,de,fe)):(ie=new Date(te,re,ee,ce,le,de,fe),U&&(ie=x(ie).week(U).toDate()),ie)}catch{return new Date("")}}(A,P,B,T),this.init(),o&&o!==!0&&(this.$L=this.locale(o).$L),R&&A!=this.format(P)&&(this.$d=new Date("")),j={}}else if(P instanceof Array)for(var i=P.length,u=1;u<=i;u+=1){I[1]=P[u-1];var r=T.apply(this,I);if(r.isValid()){this.$d=r.$d,this.$L=r.$L,this.init();break}u===i&&(this.$d=new Date(""))}else F.call(this,Y)}}})}(Ce)),Ce.exports}var wn=Nn();const _n=Ae(wn);let ae=null,Ne=e=>e(),Me=[],xe={};function Ue(){const{getContainer:e,rtl:n,maxCount:a,top:s,bottom:d,showProgress:g,pauseOnHover:l}=xe,h=(e==null?void 0:e())||document.body;return{getContainer:()=>h,rtl:n,maxCount:a,top:s,bottom:d,showProgress:g,pauseOnHover:l}}const Mn=G.forwardRef((e,n)=>{const{notificationConfig:a,sync:s}=e,{getPrefixCls:d}=c.useContext(Ee),g=xe.prefixCls||d("notification"),l=c.useContext(yn),[h,j]=lt(Object.assign(Object.assign(Object.assign({},a),{prefixCls:g}),l.notification));return G.useEffect(s,[]),G.useImperativeHandle(n,()=>{const S=Object.assign({},h);return Object.keys(S).forEach(N=>{S[N]=function(){return s(),h[N].apply(h,arguments)}}),{instance:S,sync:s}}),j}),$n=G.forwardRef((e,n)=>{const[a,s]=G.useState(Ue),d=()=>{s(Ue)};G.useEffect(d,[]);const g=Lt(),l=g.getRootPrefixCls(),h=g.getIconPrefixCls(),j=g.getTheme(),S=G.createElement(Mn,{ref:n,sync:d,notificationConfig:a});return G.createElement(Yt,{prefixCls:l,iconPrefixCls:h,theme:j},g.holderRender?g.holderRender(S):S)});function Te(){if(!ae){const e=document.createDocumentFragment(),n={fragment:e};ae=n,Ne(()=>{Rt()(G.createElement($n,{ref:s=>{const{instance:d,sync:g}=s||{};Promise.resolve().then(()=>{!n.instance&&d&&(n.instance=d,n.sync=g,Te())})}}),e)});return}ae.instance&&(Me.forEach(e=>{switch(e.type){case"open":{Ne(()=>{ae.instance.open(Object.assign(Object.assign({},xe),e.config))});break}case"destroy":Ne(()=>{ae==null||ae.instance.destroy(e.key)});break}}),Me=[])}function Dn(e){xe=Object.assign(Object.assign({},xe),e),Ne(()=>{var n;(n=ae==null?void 0:ae.sync)===null||n===void 0||n.call(ae)})}function dt(e){Me.push({type:"open",config:e}),Te()}const kn=e=>{Me.push({type:"destroy",key:e}),Te()},In=["success","info","warning","error"],En={open:dt,destroy:kn,config:Dn,useNotification:vn,_InternalPanelDoNotUseOrYouWillBeFired:cn},ut=En;In.forEach(e=>{ut[e]=n=>dt(Object.assign(Object.assign({},n),{type:e}))});const Ie=({name:e,size:n="md",image:a})=>{const s=l=>(l==null?void 0:l.split(" ").map(h=>h[0]).join("").toUpperCase())||"?",d={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base"},g=d[n]||d.md;return a?t.jsx("img",{src:a,alt:e,className:"msg-avatar-image rounded-full object-cover"}):t.jsx("div",{className:`${g} bg-gray-400 rounded-full flex items-center justify-center text-white font-medium`,children:s(e)})},ft=({conversation:e,partnerImage:n,isActive:a,onClick:s,isLoading:d=!1})=>{const g=l=>{if(!d){const h=l.currentTarget.querySelector('input[type="hidden"]'),j=h?h.value:null;s(e,j)}};return t.jsx("div",{className:`contact-list-avatar p-4 border-b border-gray-200 cursor-pointer ${a?"bg-blue-50":"hover:bg-gray-50"} ${d?"opacity-50":""}`,onClick:g,children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ie,{name:e.partner_name||"P",image:n}),t.jsx("div",{className:"text-gray-700",children:e.partner_name||`Partner #${e.partner_id}`}),t.jsx("input",{type:"hidden",value:e.conversation_id}),t.jsx("input",{type:"hidden",value:e.partner_id}),!e.read_by_partner&&t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})})};async function An(e){const n=new FormData;n.append("file",e);try{const s=await(await fetch("https://frohubecomm.mystagingwebsite.com/wp-json/frohub/v1/upload-comment-image",{method:"POST",headers:{Authorization:"Basic YOUR_BASIC_AUTH_HERE"},body:n})).json();if(s.success&&s.url)return s.url;throw new Error(s.error||"Upload failed")}catch(a){throw console.error("Upload error:",a),a}}const mt=({onSendMessage:e,isLoading:n=!1,disabled:a=!1})=>{const[s,d]=c.useState(""),[g,l]=c.useState(null),[h,j]=c.useState(null),[S,N]=c.useState(!1),C=c.useRef(null),_=async()=>{if(!s.trim()&&!g||n||a)return;let p="";if(g){N(!0);try{p=await An(g)}catch(D){console.error("Image upload failed:",D),alert(D.message||"Image upload failed")}finally{N(!1),l(null),j(null)}}(s.trim()||p)&&(await e(s,p),d(""))},w=p=>{const D=p.target.files[0];D&&(l(D),j(URL.createObjectURL(D)))},$=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),_())},b=()=>{C.current&&C.current.click()};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"deposit-notification-banner",children:t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-exclamation-triangle"})," Only deposits paid through FroHub are protected. ",t.jsx("a",{href:"/help-centre",children:"Learn more."})]})}),t.jsxs("div",{className:"border-t bg-white p-3",children:[t.jsxs("div",{className:"flex",children:[t.jsx("input",{type:"file",accept:"image/*",ref:C,style:{display:"none"},onChange:w}),t.jsx("button",{onClick:b,type:"button",className:"ml-2 px-3 py-2 text-gray-500 hover:text-gray-700",disabled:a||S,children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),t.jsx("input",{value:s,onChange:p=>d(p.target.value),onKeyPress:$,placeholder:"Type your message...",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm",disabled:a||S}),t.jsx("button",{onClick:_,disabled:!s.trim()&&!g||n||a||S,className:"w-btn us-btn-style_1",children:"Send Message"})]}),h&&t.jsx("div",{className:"mt-2 ml-10",children:t.jsxs("div",{className:"relative inline-block",children:[t.jsx("img",{src:h,alt:"Preview",className:"max-h-32 rounded"}),t.jsx("button",{onClick:()=>{l(null),j(null)},className:"absolute top-1 right-1 bg-gray-800 bg-opacity-50 rounded-full p-1 text-white hover:bg-opacity-70",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),t.jsx("div",{className:"text-xs text-gray-400 mt-1 ml-10",children:"Please be respectful: Keep your messages kind and considerate. Treat others as you would like to be treated. Report any abusive messages here."}),S&&t.jsx("div",{className:"text-xs text-blue-500 mt-1 ml-10",children:"Uploading image..."})]})]})},ht=({comment:e,conversationId:n,isLastCustomerMessage:a,customerImage:s,partnerImage:d})=>{var $,b;const l=(((b=($=e==null?void 0:e.meta_data)==null?void 0:$.sent_from)==null?void 0:b[0])||"")!=="partner",[h,j]=c.useState(!1);c.useEffect(()=>{!h&&a&&ne("frohub/read_by_customer",p=>{p.success?(j(!0),document.cookie="unreadConversations=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"):console.warn("Failed to mark as read by customer:",p.message)},{conversation_post_id:n})},[a,n,h]);const S=p=>new Date(e.date).toLocaleString("en-GB",{hour:"2-digit",minute:"2-digit",day:"numeric",month:"short",year:"numeric"}),N=p=>({__html:p}),C=e.status==="pending",_=e.status==="failed",w=l?"customer-message":"partner-message";return t.jsxs("div",{className:`flex mb-4 ${l?"justify-end":"justify-start"}`,children:[!l&&t.jsx(Ie,{name:e.author||"Partner",size:"sm",image:d}),t.jsx("div",{className:`flex flex-col ${l?"items-end":"items-start"} max-w-xs`,children:t.jsxs("div",{className:`p-3 rounded-lg break-words shadow-sm ${w}`,children:[t.jsxs("div",{className:"text-xs mb-1",children:[S(e.date),C&&t.jsx("span",{className:"ml-1",children:"(Sending...)"}),_&&t.jsx("span",{className:"ml-1",children:"(Failed)"})]}),t.jsx("div",{dangerouslySetInnerHTML:N(e.content),className:"text-sm"}),e.image_url&&t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:e.image_url,alt:"Attached",className:"max-w-full rounded"})})]})}),l&&t.jsx(Ie,{name:"You",size:"sm",image:s})]})},Pn=({dataKey:e,currentUserPartnerPostId:n})=>{const[a,s]=c.useState([]),[d,g]=c.useState([]),[l,h]=c.useState(null),[j,S]=c.useState(null),[N,C]=c.useState(n),[_,w]=c.useState({conversations:!1,comments:!1,sending:!1}),[$,b]=c.useState(null),[p,D]=c.useState(!0),T=c.useRef(null),k=c.useRef(null),[F,Y]=c.useState(!1),A=typeof window<"u"?new URLSearchParams(window.location.search):null,B=A==null?void 0:A.get("customer_id"),I=A==null?void 0:A.get("conversation_id");c.useEffect(()=>{v()},[]),c.useEffect(()=>(l?(R(l.client_id,!0),P()):E(),()=>E()),[l]),c.useEffect(()=>{const r=document.getElementById("chat-messages-container-mobile");r&&(r.scrollTop=r.scrollHeight)},[d]);const P=()=>{E(),T.current=setInterval(()=>{l&&R(l.client_id,!1)},5e3)},E=()=>{T.current&&(clearInterval(T.current),T.current=null)},v=()=>{w(r=>({...r,conversations:!0})),b(null),ne("frohub/user_conversations",r=>{var f;if(r.success){const y=(((f=r.data)==null?void 0:f.data)||[]).map(x=>({...x,client_id:x.conversation_id,comments:Array.isArray(x.comments)?x.comments:[]}));if(s(y),y.length>0){let x=null;I?(x=y.find(M=>String(M.conversation_id)===String(I)),x&&(h(x),S(x.conversation_id),D(!1))):B&&(x=y.find(M=>String(M.customer_id)===String(B)),x&&(h(x),S(x.conversation_id),D(!1)))}}else b("Failed to load conversations: "+(r.message||"Unknown error")),s([]);w(m=>({...m,conversations:!1}))})},R=(r,f=!0)=>{f&&w(m=>({...m,comments:!0})),b(null),ne("frohub/get_conversation_comments",m=>{var y;if(m.success){const x=m.data||{},M=x.comments||[],H=x.user_partner_id;if(Array.isArray(M))if(f||d.length===0){if(g(M),M.length>0){const L=M[M.length-1];k.current=new Date(L.date).getTime()}}else{const L=k.current,O=M.filter(z=>{const q=new Date(z.date).getTime();return!L||q>L});if(O.length>0){const z=O[O.length-1];k.current=new Date(z.date).getTime(),g(q=>{const W=q.filter(U=>!U.comment_id.toString().startsWith("temp_")||U.status==="failed"),X=new Set(W.map(U=>U.comment_id)),V=O.filter(U=>!X.has(U.comment_id));return[...W,...V]}),O.find(q=>{var W,X;return((X=(W=q==null?void 0:q.meta_data)==null?void 0:W.sent_from)==null?void 0:X[0])!=="partner"})}}H&&C(H),s(L=>L.map(O=>O.client_id===r?{...O,read_by_partner:!0}:O))}else f&&(b("Failed to load comments: "+(((y=m.data)==null?void 0:y.message)||"Unknown error")),g([]));f&&w(x=>({...x,comments:!1}))},{post_id:r})},o=(r,f)=>{h(r),S(f),g([]),Y(!1),k.current=null,D(!1)},i=()=>{D(!0),h(null),S(null),g([])},u=async(r,f="")=>{if(!l||!r.trim()&&!f)return;const m={comment_id:`temp_${Date.now()}`,content:r,author:"You",partner_id:n,date:new Date().toISOString(),image_url:f,status:"pending"};g(x=>[...x,m]),w(x=>({...x,sending:!0})),b(null);const y=j||l.client_id;ne("frohub/send_customer_message",x=>{x.success?(g(M=>M.filter(H=>H.comment_id!==m.comment_id)),R(l.client_id,!1),s(M=>M.map(H=>H.client_id===l.client_id?{...H,last_message:r,last_activity:new Date().toISOString(),read_by_partner:!0}:H))):(g(M=>M.map(H=>H.comment_id===m.comment_id?{...H,status:"failed"}:H)),b("Failed to send message: "+(x.message||"Unknown error"))),w(M=>({...M,sending:!1}))},{post_id:y,conversation_id:j,partner_id:n,comment:r,image_url:f})};return t.jsxs("div",{className:"flex flex-col h-screen bg-white",children:[p&&t.jsx("div",{className:"conversation-details flex flex-col h-full",children:t.jsx("div",{className:"message-conversations flex-1 overflow-y-auto",children:_.conversations?t.jsx("div",{className:"flex flex-col space-y-4 p-4",children:[...Array(4)].map((r,f)=>t.jsxs("div",{className:"flex items-center space-x-3 p-3",children:[t.jsx(K.Avatar,{size:"large",active:!0}),t.jsxs("div",{className:"flex-1",children:[t.jsx(K.Input,{size:"small",active:!0,style:{width:"60%"}}),t.jsx("div",{className:"mt-2",children:t.jsx(K.Input,{size:"small",active:!0,style:{width:"80%"}})})]})]},f))}):t.jsxs(t.Fragment,{children:[a.map(r=>t.jsx(ft,{conversation:r,isActive:!1,onClick:o},r.client_id)),!_.conversations&&a.length===0&&t.jsx("div",{className:"p-4 text-center text-gray-500",children:"No conversations found"})]})})}),!p&&l&&t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"flex items-center p-4 border-b border-gray-200 bg-white",children:[t.jsx("button",{onClick:i,className:"p-1 text-gray-600 hover:text-gray-800",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsx("span",{className:"ml-3 text-gray-900 font-medium",children:"Back to Messages"})]}),t.jsx("div",{id:"chat-messages-container-mobile",className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:_.comments?t.jsx("div",{className:"flex justify-center items-center h-full text-gray-500",children:"Loading messages..."}):t.jsxs(t.Fragment,{children:[d.map(r=>t.jsx(ht,{comment:r},r.comment_id)),d.length===0&&t.jsx("div",{className:"text-center text-gray-500 mt-8",children:"No messages yet. Start a conversation!"})]})}),t.jsx("div",{className:"border-t border-gray-200 bg-white",children:t.jsx(mt,{onSendMessage:u,isLoading:_.sending,disabled:_.comments})})]}),$&&t.jsx("div",{className:"fixed top-4 left-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded z-50",children:t.jsxs("div",{className:"flex items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("strong",{className:"font-medium",children:"Error:"}),t.jsx("div",{className:"mt-1 text-sm",children:$})]}),t.jsx("button",{onClick:()=>b(null),className:"ml-2 text-red-700 hover:text-red-900",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})},Tn=({dataKey:e,currentUserPartnerPostId:n})=>{const[a,s]=c.useState([]),[d,g]=c.useState([]),[l,h]=c.useState(null),[j,S]=c.useState(null),[N,C]=c.useState(null),[_,w]=c.useState({conversations:!1,comments:!1,sending:!1}),[$,b]=c.useState(null),p=c.useRef(null),D=c.useRef(null),[T,k]=c.useState(!1),F=typeof window<"u"?new URLSearchParams(window.location.search):null,Y=F==null?void 0:F.get("customer_id"),A=F==null?void 0:F.get("conversation_id");c.useEffect(()=>{P()},[]),c.useEffect(()=>(l?(E(l.client_id,!0),B()):I(),()=>I()),[l]),c.useEffect(()=>{const o=document.getElementById("chat-messages-container");o&&(o.scrollTop=o.scrollHeight)},[d]);const B=()=>{I(),p.current=setInterval(()=>{l&&E(l.client_id,!1)},5e3)},I=()=>{p.current&&(clearInterval(p.current),p.current=null)},P=()=>{w(o=>({...o,conversations:!0})),b(null),ne("frohub/user_conversations",o=>{var i;if(o.success){const r=(((i=o.data)==null?void 0:i.data)||[]).map(f=>({...f,client_id:f.conversation_id,comments:Array.isArray(f.comments)?f.comments:[]}));if(s(r),r.length>0){let f=null;A?f=r.find(m=>String(m.conversation_id)===String(A)):Y&&(f=r.find(m=>String(m.customer_id)===String(Y))),!f&&!l&&(f=r[0]),f&&(h(f),S(f.conversation_id))}}else b("Failed to load conversations: "+(o.message||"Unknown error")),s([]);w(u=>({...u,conversations:!1}))})},E=(o,i=!0)=>{i&&w(u=>({...u,comments:!0})),b(null),ne("frohub/get_conversation_comments",u=>{var r;if(u.success){const f=u.data||{},m=f.comments||[],y=f.user_partner_id.ID;if(C(y),Array.isArray(m))if(i||d.length===0){if(g(m),m.length>0){const x=m[m.length-1];D.current=new Date(x.date).getTime()}}else{const x=D.current,M=m.filter(H=>{const L=new Date(H.date).getTime();return!x||L>x});if(M.length>0){const H=M[M.length-1];D.current=new Date(H.date).getTime(),g(L=>{const O=L.filter(W=>!W.comment_id.toString().startsWith("temp_")||W.status==="failed"),z=new Set(O.map(W=>W.comment_id)),q=M.filter(W=>!z.has(W.comment_id));return[...O,...q]}),M.find(L=>{var O,z;return((z=(O=L==null?void 0:L.meta_data)==null?void 0:O.sent_from)==null?void 0:z[0])!=="partner"})}}y&&C(y),s(x=>x.map(M=>M.client_id===o?{...M,read_by_partner:!0}:M))}else i&&(b("Failed to load comments: "+(((r=u.data)==null?void 0:r.message)||"Unknown error")),g([]));i&&w(f=>({...f,comments:!1}))},{post_id:o})},v=(o,i)=>{h(o),S(i),g([]),k(!1),D.current=null},R=async(o,i="")=>{if(!l||!o.trim()&&!i)return;const u={comment_id:`temp_${Date.now()}`,content:o,author:"You",partner_id:n,date:new Date().toISOString(),image_url:i,status:"pending"};g(f=>[...f,u]),w(f=>({...f,sending:!0})),b(null);const r=j||l.client_id;ne("frohub/send_customer_message",f=>{f.success?(g(m=>m.filter(y=>y.comment_id!==u.comment_id)),E(l.client_id,!1),s(m=>m.map(y=>y.client_id===l.client_id?{...y,last_message:o,last_activity:new Date().toISOString(),read_by_partner:!0}:y))):(g(m=>m.map(y=>y.comment_id===u.comment_id?{...y,status:"failed"}:y)),b("Failed to send message: "+(f.message||"Unknown error"))),w(m=>({...m,sending:!1}))},{post_id:r,conversation_id:j,partner_id:N,comment:o,image_url:i})};return t.jsxs("div",{className:"flex h-screen bg-white",children:[t.jsx("div",{className:"message-conversations w-80",children:t.jsxs("div",{className:"overflow-y-auto",children:[_.conversations?t.jsxs("div",{className:"text-sm text-gray-500 mt-1 flex flex-col space-y-4",children:[t.jsxs("div",{className:"contact-list-avatar p-4 flex space-x-2 justify-around",children:[t.jsx(K.Avatar,{size:"large",active:!0}),t.jsx(K.Input,{size:"large",active:!0})]}),t.jsxs("div",{className:"contact-list-avatar p-4 flex space-x-2 justify-around",children:[t.jsx(K.Avatar,{size:"large",active:!0}),t.jsx(K.Input,{size:"large",active:!0})]}),t.jsxs("div",{className:"contact-list-avatar p-4 flex space-x-2 justify-around",children:[t.jsx(K.Avatar,{size:"large",active:!0}),t.jsx(K.Input,{size:"large",active:!0})]}),t.jsxs("div",{className:"contact-list-avatar p-4 flex space-x-2 justify-around",children:[t.jsx(K.Avatar,{size:"large",active:!0}),t.jsx(K.Input,{size:"large",active:!0})]})]}):a.map(o=>t.jsx(ft,{conversation:o,unreadConversation:o.unread_count_partner,partnerImage:o.partner_image,isActive:(l==null?void 0:l.client_id)===o.client_id,onClick:v},o.client_id)),!_.conversations&&a.length===0&&t.jsx("div",{className:"flex justify-center items-center p-24",children:t.jsx("p",{className:"text-gray-600 text-base text-center max-w-xl mx-auto",children:"No messages yet"})})]})}),t.jsx("div",{className:"conversation-details flex-1 flex flex-col",children:l?t.jsxs(t.Fragment,{children:[t.jsx("div",{id:"chat-messages-container",className:"flex-1 overflow-y-auto p-4",children:_.comments?t.jsx("div",{className:"flex justify-center items-center h-full text-gray-500",children:"Loading messages..."}):t.jsxs(t.Fragment,{children:[d.map((o,i)=>{var u,r;return t.jsx(ht,{comment:o,conversationId:l==null?void 0:l.conversation_id,isLastCustomerMessage:((r=(u=o==null?void 0:o.meta_data)==null?void 0:u.sent_from)==null?void 0:r[0])!=="customer"&&i===d.length-1,customerImage:l==null?void 0:l.customer_image,partnerImage:l==null?void 0:l.partner_image},o.comment_id)}),d.length===0&&t.jsx("div",{className:"text-center text-gray-500 mt-8",children:"No messages yet. Start a conversation!"})]})}),t.jsx(mt,{onSendMessage:R,isLoading:_.sending,disabled:_.comments})]}):t.jsx("div",{className:"flex-1 flex items-start justify-center text-gray-500",children:t.jsxs("div",{className:"text-center p-16 mt-8",children:[t.jsx("h3",{className:"font-medium mb-2",children:" Welcome to your inbox!"}),t.jsx("p",{children:"When you book a service or send an enquiry, youll see your messages here. Need help? Start a conversation with your stylist."})]})})}),$&&t.jsx("div",{className:"fixed top-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded z-50 max-w-md",children:t.jsxs("div",{className:"flex items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("strong",{className:"font-medium",children:"Error:"}),t.jsx("div",{className:"mt-1 text-sm",children:$})]}),t.jsx("button",{onClick:()=>b(null),className:"ml-2 text-red-700 hover:text-red-900",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gt=(...e)=>e.filter((n,a,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===a).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=c.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:d="",children:g,iconNode:l,...h},j)=>c.createElement("svg",{ref:j,...Yn,width:n,height:n,stroke:e,strokeWidth:s?Number(a)*24/Number(n):a,className:gt("lucide",d),...h},[...l.map(([S,N])=>c.createElement(S,N)),...Array.isArray(g)?g:[g]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=(e,n)=>{const a=c.forwardRef(({className:s,...d},g)=>c.createElement(Rn,{ref:g,iconNode:n,className:gt(`lucide-${Fn(e)}`,s),...d}));return a.displayName=`${e}`,a};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],We=Fe("CircleCheckBig",Ln);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ge=Fe("CircleX",On);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Hn=Fe("RefreshCw",Bn),Ke=e=>{let n;const a=new Set,s=(S,N)=>{const C=typeof S=="function"?S(n):S;if(!Object.is(C,n)){const _=n;n=N??(typeof C!="object"||C===null)?C:Object.assign({},n,C),a.forEach(w=>w(n,_))}},d=()=>n,h={setState:s,getState:d,getInitialState:()=>j,subscribe:S=>(a.add(S),()=>a.delete(S))},j=n=e(s,d,h);return h},zn=e=>e?Ke(e):Ke,qn=e=>e;function Un(e,n=qn){const a=G.useSyncExternalStore(e.subscribe,()=>n(e.getState()),()=>n(e.getInitialState()));return G.useDebugValue(a),a}const Wn=e=>{const n=zn(e),a=s=>Un(n,s);return Object.assign(a,n),a},Gn=e=>Wn(e),Z=Gn(e=>{const n=new Date().toISOString().split("T")[0];return{availabilityData:[],loading:!1,selectedDate:n,productId:null,selectedAddOnId:null,selectedAddOns:[],productPrice:0,selectedServiceType:"",addonsChanged:!1,mobileTravelFee:0,readyForMobile:!1,addonTotalTime:0,errorMessage:"Postcode cannot be empty",totalService:0,setAvailabilityData:a=>e({availabilityData:a,loading:!1}),setLoading:a=>e({loading:a}),setSelectedDate:a=>e({selectedDate:a}),setProductId:a=>e({productId:a}),setSelectedAddOnId:a=>e({selectedAddOnId:a}),setSelectedAddOns:a=>e({selectedAddOns:a}),setProductPrice:a=>e({productPrice:a}),setSelectedServiceType:a=>e({selectedServiceType:a}),setMobileTravelFee:a=>e({mobileTravelFee:a}),setReadyForMobile:a=>e({readyForMobile:a}),setAddonsChanged:()=>e({addonsChanged:!0}),resetAddonsChanged:()=>e({addonsChanged:!1}),setErrorMessage:a=>e({errorMessage:a}),setTotalService:a=>e({totalService:a})}}),Kn=frohub_settings.ajax_url,Vn=(e,n)=>new Promise((a,s)=>{jQuery.post(Kn,{_ajax_nonce:frohub_settings.nonce,action:e,...n},function(d){d.success?a(d):s(d)})}),Ve=(e,n,a)=>{ut[e]({message:n,description:a,placement:"topRight",showProgress:!0})};function Jn(){const{selectedAddOns:e,productPrice:n,productId:a,selectedServiceType:s,addonTotalTime:d,mobileTravelFee:g,readyForMobile:l,initialServiceDuration:h,errorMessage:j}=Z(),[S,N]=c.useState(n),[C,_]=c.useState(!1),[w,$]=c.useState(!1),[b,p]=c.useState("0h 0m"),[D,T]=c.useState(0),[k,F]=c.useState(!1),Y=S*.3;c.useEffect(()=>{(()=>{a&&(F(!0),ne("frohub/get_duration",I=>{if(I.success){const P=I.data.duration_hours||0,E=I.data.duration_minutes||0,v=P*60+E;T(v);const R=v+(d||0),o=Math.floor(R/60),i=R%60;p(`${o}h ${i}m`),F(!1)}else console.error("Error fetching service duration:",I.message),F(!1)},{product_id:a}))})()},[a,d]),c.useEffect(()=>{const B=()=>{const E=document.getElementById("extra-charge-container");if(E){const v=parseFloat(E.getAttribute("data-extra-charge"))||0,R=s==="mobile";N(n+v+(R&&g||0))}};B();const I=new MutationObserver(E=>{E.forEach(v=>{v.type==="attributes"&&v.attributeName==="data-extra-charge"&&B()})}),P=document.getElementById("extra-charge-container");return P&&I.observe(P,{attributes:!0,attributeFilter:["data-extra-charge"]}),()=>I.disconnect()},[n,g,s]),c.useEffect(()=>{const B=()=>{const E=document.querySelector('input[name="total_duration_time"]');if(E){const v=parseInt(E.value,10)||0;T(v)}else if(h){const v=h+(d||0),R=Math.floor(v/60),o=v%60;p(`${R}h ${o}m`)}};B();const I=new MutationObserver(B),P=document.querySelector('input[name="total_duration_time"]');return P&&I.observe(P,{attributes:!0,attributeFilter:["value"]}),()=>I.disconnect()},[d,h]);const A=async()=>{var u,r,f,m,y;const B=((u=document.querySelector('input[name="selectedDate"]'))==null?void 0:u.value)||"",I=((r=document.querySelector('input[name="selectedTime"]'))==null?void 0:r.value)||"",P=document.querySelector(".timeslot-button.selected"),E=((f=document.querySelector('input[name="selectedPrice"]'))==null?void 0:f.value)||"",v=((m=document.querySelector('input[name="travelFee"]'))==null?void 0:m.value)||"",R=((y=document.querySelector('input[name="postCode"]'))==null?void 0:y.value)||"";if(!B||!P){Ve("error","Missing Information","Please select a service type and date & time before proceeding.");return}if(s==="mobile"&&l===!1){Ve("error","Validation Error",j);return}_(!0);const o=S-Y,i=Y*.03;document.cookie=`frohub_service_fee=${i}; path=/; max-age=86400`;try{const x=await Vn("frohub_add_to_cart",{productId:a,selectedAddOns:e,depositDue:o,depositDueToday:Y,serviceFee:i,productPrice:Y,totalPrice:S,selectedServiceType:s,selectedDate:B,selectedTime:I,extraCharge:JSON.stringify({bookingExtra:E,mobileFee:v,postCode:R})});$(!0),window.location.href="/checkout"}catch(x){console.error("AJAX call failed:",x)}finally{_(!1)}};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-[#f2f4f7] border-t border-[#E8E8E8] shadow-md py-4 px-6 z-50",children:t.jsxs("div",{className:"sm:w-full md:w-4/6 mx-auto flex flex-col items-center",children:[t.jsxs("div",{className:"w-full bottom-bar",children:[t.jsx("div",{className:"bottom-bar-notice flex items-center gap-2 text-gray-700 text-sm",children:t.jsxs("span",{className:"flex items-center",children:[t.jsx("i",{className:"fas fa-shield-alt text-base"}),t.jsxs("span",{children:["All deposits paid through FroHub are protected. ",t.jsx("a",{href:"/help-centre/",className:"text-black font-medium",children:"Learn More"})]})]})}),t.jsxs("div",{className:"bottom-bar-text",children:[t.jsxs("p",{className:"text-gray-900 font-semibold !mb-3",children:["Total price: ",t.jsxs("span",{className:"text-black",children:["",S.toFixed(2)]})]}),t.jsxs("p",{className:"text-gray-600 text-sm !mb-3",children:["Deposit due today: ",t.jsxs("span",{className:"font-medium text-black",children:["",Y.toFixed(2)]})]}),t.jsxs("p",{className:"text-gray-600 text-sm !mb-3",children:["Service duration: ",t.jsx("span",{className:"font-medium",children:k?t.jsx(K.Button,{active:!0,size:"small",style:{width:"60px",height:"20px"}}):b})]}),t.jsx("input",{name:"service-duration",type:"hidden",value:b})]}),t.jsx("button",{onClick:A,disabled:C||w,className:`bg-[#E05748] !text-white font-medium px-6 py-2 rounded-full transition flex items-center justify-center ${C||w?"cursor-not-allowed opacity-75":"hover:bg-gray-400"}`,style:{minWidth:"150px",height:"40px"},children:C?t.jsx(Ye,{size:"small",className:"mr-2"}):w?t.jsx(Ye,{size:"small",className:"mr-2"}):"Request to Book"})]}),t.jsx("div",{className:"bottom-bar-notice-mobile",children:t.jsxs("span",{className:"flex items-center",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-black mr-1",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M12 2a10 10 0 1 1-10 10A10 10 0 0 1 12 2zm0 18a8 8 0 1 0-8-8 8 8 0 0 0 8 8zm-1-13a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0zm1 6a1.25 1.25 0 1 1-1.25 1.25A1.25 1.25 0 0 1 12 13z",clipRule:"evenodd"})}),t.jsxs("span",{children:["All deposits paid through FroHub are protected. ",t.jsx("a",{href:"#",className:"text-black font-medium",children:"Learn More"})]})]})})]})})})}var we={exports:{}},Zn=we.exports,Je;function Xn(){return Je||(Je=1,function(e,n){(function(a,s){e.exports=s()})(Zn,function(){return function(a,s,d){s.prototype.isBetween=function(g,l,h,j){var S=d(g),N=d(l),C=(j=j||"()")[0]==="(",_=j[1]===")";return(C?this.isAfter(S,h):!this.isBefore(S,h))&&(_?this.isBefore(N,h):!this.isAfter(N,h))||(C?this.isBefore(S,h):!this.isAfter(S,h))&&(_?this.isAfter(N,h):!this.isBefore(N,h))}}})}(we)),we.exports}var Qn=Xn();const pt=Ae(Qn);J.extend(pt);const ea=({onDateChange:e,bookingNotice:n,initialServiceDuration:a,maxDate:s,unavailableDates:d,unavailableTimes:g,nextAvailableDate:l,allBookings:h})=>{const{availabilityData:j,loading:S}=Z(),[N,C]=c.useState(()=>J(l)),[_,w]=c.useState(null),[$,b]=c.useState(0),[p,D]=c.useState(0),[T,k]=c.useState(J());c.useEffect(()=>{l&&C(J(l))},[l]),c.useEffect(()=>{const o=parseInt(a,10)||0,i=Math.floor(o/60),u=o%60;D(`${i}h ${u}m`)},[a]);const F=o=>{const i=o.format("YYYY-MM-DD"),u=j.filter(x=>x.date===i);if(u.length===0)return!1;const r=h[i]||[],f=u.filter(x=>{const M=`${x.from} - ${x.to}`;if(r.includes(M))return!1;const L=J(`${i} ${x.from}`,"YYYY-MM-DD HH:mm"),O=J(`${i} ${x.to}`,"YYYY-MM-DD HH:mm");return!g.some(({start:q,end:W})=>!q||!W?!1:L.isBetween(q,W,null,"[]")||O.isBetween(q,W,null,"[]")||L.isBefore(q)&&O.isAfter(W))});if(console.log(` Date: ${i} - Possible Slots: ${u.length}, Free Slots: ${f.length}`),f.length===0)return!1;const y=J().add(n,"day");return!(!o.isAfter(y,"day")||s&&!o.isBefore(J(s).add(1,"day")))},Y=()=>{const o=T.startOf("month"),i=T.daysInMonth();let u=o.day();u=u===0?6:u-1;const r=[];for(let f=0;f<u;f++)r.push({date:o.subtract(u-f,"day"),isCurrentMonth:!1});for(let f=1;f<=i;f++)r.push({date:o.add(f-1,"day"),isCurrentMonth:!0});return r},A=o=>{if(!F(o))return;const i=J(o);C(i),w(null),b(0),document.getElementById("extra-charge-container").setAttribute("data-extra-charge","0"),e&&e(i.format("YYYY-MM-DD"))},B=(o,i,u)=>{w(o),b(i),document.getElementById("extra-charge-container").setAttribute("data-extra-charge",i)},I=o=>{k(T.add(o,"month"))},P=Array.isArray(j)?j.filter(o=>{const i=N.format("YYYY-MM-DD");if(o.date!==i)return!1;const u=`${o.from} - ${o.to}`;if((h[i]||[]).includes(u))return!1;const f=J(`${i} ${o.from}`,"YYYY-MM-DD HH:mm"),m=J(`${i} ${o.to}`,"YYYY-MM-DD HH:mm");return!g.some(({start:x,end:M})=>!x||!M?!1:f.isBetween(x,M,null,"[]")||m.isBetween(x,M,null,"[]")||f.isBefore(x)&&m.isAfter(M))}).map(o=>({time:`${o.from} - ${o.to}`,price:Number(o.extra_charge)||0,duration:o.total_duration_minutes||0})):[];console.log(` Selected Date: ${N.format("YYYY-MM-DD")} - Available Time Slots:`,P);const E=o=>J().format("YYYY-MM-DD")===o.format("YYYY-MM-DD"),v=o=>N.format("YYYY-MM-DD")===o.format("YYYY-MM-DD"),R=o=>o.isBefore(J(),"day");return t.jsxs("div",{className:"calendar-container",children:[t.jsxs("div",{className:"calendar-section custom-calendar",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("button",{onClick:()=>I(-1),className:"p-2 hover:bg-gray-200 rounded-full",children:"<"}),t.jsx("div",{className:"text-base font-medium",children:T.format("MMMM YYYY")}),t.jsx("button",{onClick:()=>I(1),className:"p-2 hover:bg-gray-200 rounded-full",children:">"})]}),t.jsx("div",{className:"grid grid-cols-7 mb-2",children:["MON","TUE","WED","THU","FRI","SAT","SUN"].map(o=>t.jsx("div",{className:"text-xs text-gray-500 text-center py-2",children:o},o))}),t.jsx("div",{className:"grid grid-cols-7 gap-1",children:Y().map((o,i)=>{const u=F(o.date),r=!u||R(o.date);return t.jsx("button",{onClick:()=>u&&A(o.date),disabled:r,className:`
                                    w-10 h-10 flex items-center justify-center rounded-full
                                    text-sm font-medium
                                    ${o.isCurrentMonth?"":"text-gray-400"}
                                    ${r?"text-gray-300 cursor-not-allowed":"hover:bg-orange-300"}
                                    ${u?"bg-orange-500 !text-white":""}
                                    ${v(o.date)?"bg-black text-white hover:bg-black":""}
                                    ${E(o.date)&&!v(o.date)?"border border-black":""}
                                `,children:o.date.date()},i)})})]}),t.jsxs("div",{className:"timeslots-section",children:[S?t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"selected-date",children:J(N).isValid()?N.format("ddd, MMM D YYYY"):"Getting Available Date..."}),t.jsx("div",{className:"timeslots-grid",children:[...Array(4)].map((o,i)=>t.jsx(K.Button,{active:!0,size:"large",block:!0},i))})]}):P.length===0?t.jsx("h3",{className:"selected-date",children:"Sorry, no available time for this service"}):t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"selected-date",children:N.format("ddd, MMM D YYYY")}),t.jsx("div",{className:"timeslots-grid scrollable-timeslots",children:P.map((o,i)=>t.jsxs("button",{className:`timeslot-button ${_===o.time?"selected":""}`,onClick:()=>B(o.time,o.price,o.duration),children:[t.jsx("span",{children:o.time}),o.price>0&&t.jsxs("span",{className:"extra-charge",children:["+",o.price.toFixed(2)]})]},i))})]}),t.jsx("p",{className:"timezone-info",children:"All times are in London (GMT +01:00)"})]}),t.jsx("div",{id:"extra-charge-container","data-extra-charge":"0",style:{display:"none"}}),t.jsx("input",{type:"hidden",value:N.format("YYYY-MM-DD"),name:"selectedDate"}),t.jsx("input",{type:"hidden",value:_||"",name:"selectedTime"}),t.jsx("input",{type:"hidden",name:"selectedPrice",value:$}),t.jsx("input",{type:"hidden",value:p,name:"total_duration_time"})]})};J.extend(_n);J.extend(pt);const ta=()=>{const e=c.useRef(null),[n,a]=c.useState(null),[s,d]=c.useState(null),[g,l]=c.useState([]),[h,j]=c.useState([]),[S,N]=c.useState(null),[C,_]=c.useState({}),[w,$]=c.useState([]);c.useRef([]);const{availabilityData:b,setAvailabilityData:p,selectedDate:D,setSelectedDate:T,loading:k,setLoading:F,addonsChanged:Y,setAddonsChanged:A,resetAddonsChanged:B}=Z();c.useEffect(()=>{const v=new Date().toISOString().split("T")[0];T(v)},[T]),c.useEffect(()=>{const v=document.querySelector(".frohub_add_to_cart");v&&(e.current=v.dataset.productId)},[]);const I=c.useCallback(()=>{let v=[];const R=document.getElementById("frohub-selected-addon-ids");if(R&&R.value)try{v=JSON.parse(R.value)}catch(o){console.error("Error parsing addon IDs",o),v=[]}return v},[]),P=c.useCallback(async()=>{const v=e.current;if(!v)return;F(!0);const R=I();ne("frohub/get_availibility",o=>{if(o.success){N(o.data.next_available_date),p(o.data.availability),a(o.data.booking_notice),d(o.data.max_date),l(o.data.unavailable_dates||[]),_(o.data.all_bookings||{}),$(o.data.all_booked_days||[]);const i=r=>{if(!r)return null;let f=r.trim();f=f.replace(/\b12:00 am\b/i,"00:00").replace(/\b12:00 pm\b/i,"12:00").replace(/\b(\d):(\d{2}) (am|pm)\b/i,"0$1:$2 $3").replace(/\b(\d{1,2}):(\d{2}) ([ap]m)\b/i,(x,M,H,L)=>{let O=parseInt(M,10);return L.toLowerCase()==="pm"&&O!==12&&(O+=12),L.toLowerCase()==="am"&&O===12&&(O=0),`${O.toString().padStart(2,"0")}:${H}`});const m=["DD/MM/YYYY HH:mm","DD/MM/YYYY hh:mm A","DD/MM/YYYY h:mm A","YYYY-MM-DD HH:mm","YYYY-MM-DD","DD/MM/YYYY"];let y=null;for(let x of m)if(y=J(f,x,!0),y.isValid())return y;return null},u=(o.data.unavailable_dates||[]).map(({start_date:r,end_date:f})=>{const m=i(r),y=i(f);return!m||!y?null:{start:m,end:y}}).filter(Boolean);j(u)}else console.error("Error fetching availability:",o.message);F(!1)},{product_id:v,date:D,addons_id:R}),B()},[D,p,F,B,I]);c.useEffect(()=>{P()},[P,D,Y]);const E=v=>{T(v)};return t.jsxs("div",{className:"relative",children:[t.jsx("p",{children:"Search availability and select a time slot"}),t.jsx(ea,{data:b,onDateChange:E,bookingNotice:n,maxDate:s,unavailableDates:g,unavailableTimes:h,nextAvailableDate:S,allBookings:C,allBookedDays:w})]})};var Se={},Ze;function na(){if(Ze)return Se;Ze=1;var e=Ot();return Se.createRoot=e.createRoot,Se.hydrateRoot=e.hydrateRoot,Se}var ve=na();const aa={"home-based":t.jsx("i",{className:"fas fa-home text-[32px]"}),"salon-based":t.jsx("i",{className:"fas fa-chair-office text-[32px]"}),mobile:t.jsx("i",{className:"fas fa-car-side text-[32px]"})},sa={"home-based":"You travel to your stylists home","salon-based":"You travel to your stylists salon",mobile:"Your stylist travels to you"},Xe=({service:e,selectedService:n,handleSelectService:a,loading:s})=>{if(s)return t.jsxs("div",{className:"flex items-center justify-between gap-[1rem] w-full p-1 border border-gray-200 rounded-lg",children:[t.jsx(K.Avatar,{size:48,shape:"circle",active:!0}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx(K.Input,{style:{width:80,marginTop:8},active:!0}),t.jsx(K.Input,{style:{width:80,marginTop:4},active:!0})]})]});if(!e)return null;const d=e.toLowerCase(),g=(n==null?void 0:n.toLowerCase())===d;return t.jsxs("div",{className:`flex items-center justify-center w-full p-1 border rounded-lg cursor-pointer transition-all duration-200 ${g?"bg-gray-200 border-gray-500":"border-gray-300"}`,onClick:()=>a(d),children:[t.jsx("input",{type:"radio",name:"serviceType",value:d,checked:g,onChange:()=>a(d),className:"hidden"}),t.jsxs("label",{className:"flex items-center gap-[1rem] cursor-pointer w-full h-full p-1 rounded-lg transition-all duration-200",children:[aa[d]||t.jsx("i",{className:"fas fa-home text-[32px]"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-semibold text-lg mt-2",children:e}),t.jsx("span",{className:"text-sm text-gray-600",children:sa[d]})]})]})]})};function ra(){const e=new URLSearchParams(window.location.search),n=e.get("radius"),a=e.get("location_name"),s=e.get("lat"),d=e.get("lng");if(n&&a&&s&&d){const g={radius:n,location_name:decodeURIComponent(a),lat:s,lng:d};document.cookie=`locationData=${encodeURIComponent(JSON.stringify(g))}; path=/`}}function oa(){const e=document.cookie.match(new RegExp("(^| )locationData=([^;]+)"));return e?JSON.parse(decodeURIComponent(e[2])):null}function ia({partnerId:e}){const[n,a]=c.useState(""),[s,d]=c.useState(!1),[g,l]=c.useState(null),[h,j]=c.useState(null),[S,N]=c.useState(!1),[C,_]=c.useState(!0),[w,$]=c.useState(""),[b,p]=c.useState(null),{setMobileTravelFee:D,setReadyForMobile:T,totalService:k}=Z(),F=c.useRef(null),Y=c.useRef(null),[A,B]=c.useState(null);c.useEffect(()=>{(()=>{const i=oa();i&&i.lat&&i.lng&&p({latitude:parseFloat(i.lat),longitude:parseFloat(i.lng),name:i.location_name})})(),e&&I()},[e]),c.useEffect(()=>{const o=()=>{if(window.google&&window.google.maps&&window.google.maps.places&&F.current&&!Y.current){const u={componentRestrictions:{country:"uk"},types:["geocode"]};Y.current=new window.google.maps.places.Autocomplete(F.current,u),Y.current.addListener("place_changed",()=>{const r=Y.current.getPlace();if(!r.geometry){console.error("No geometry for this place");return}a(r.formatted_address);const f={latitude:r.geometry.location.lat(),longitude:r.geometry.location.lng(),address:r.formatted_address};B(f)})}};o();const i=setInterval(()=>{Y.current||o()},500);return()=>{clearInterval(i),Y.current&&(window.google.maps.event.clearInstanceListeners(Y.current),Y.current=null)}},[]),c.useEffect(()=>{A&&h&&v(A)},[A,h]);const I=()=>{_(!0),$(""),ne("frohub/get_mobile_location_data",o=>{if(console.log("Partner location response:",o),o.success){let i,u=[];o.data&&o.data.data?i=o.data.data:o.data?i=o.data:i=o,i.radius_fees?u=i.radius_fees:i.radiusFees?u=i.radiusFees:o.radius_fees&&(u=o.radius_fees);const r=parseFloat(i.latitude||i.lat||0),f=parseFloat(i.longitude||i.lng||0);if(r&&f&&u&&u.length>0){const m={latitude:r,longitude:f,radiusFees:u.map(y=>({radius:parseFloat(y.radius||y.distance||0),price:parseFloat(y.price||y.fee||0)}))};console.log("Setting partner location:",m),j(m)}else console.error("Invalid location data structure:",i),$("Failed to parse partner location data.")}else $("Failed to fetch partner location."),console.error("Error fetching location:",o.message||"Unknown error");_(!1)},{partner_id:e})};c.useEffect(()=>{h&&b&&!C&&E()},[h,b,C]);const P=(o,i,u,r)=>{const m=(u-o)*Math.PI/180,y=(r-i)*Math.PI/180,x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(o*Math.PI/180)*Math.cos(u*Math.PI/180)*Math.sin(y/2)*Math.sin(y/2);return 3958.8*(2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x)))},E=()=>{if(l(null),d(!1),$(""),N(!0),!h){$("Partner location not loaded."),N(!1);return}const o=P(h.latitude,h.longitude,b.latitude,b.longitude);console.log("Distance calculated:",o,"miles"),console.log("Partner radius fees:",h.radiusFees);let i=null;for(const u of h.radiusFees)if(o<=u.radius){i=u.price;break}i!==null?(d(!0),l(i),D(i),Z.setState({readyForMobile:!0})):(d(!1),k<1?$("Oops! They don't cover your area. Try another stylist nearby."):$("Oops! Mobile's not available in your area, but you can still book at their home or salon"),D(0),Z.setState({readyForMobile:!1})),N(!1)},v=o=>{if(console.log("Checking location:",o),console.log("Partner location available:",h),l(null),d(!1),$(""),N(!0),!h){console.error("Partner location not loaded when checking location"),$("Partner location not loaded. Please try again."),N(!1);return}const i=P(h.latitude,h.longitude,o.latitude,o.longitude);console.log("Distance calculated:",i,"miles"),console.log("Partner radius fees:",h.radiusFees);let u=null;for(const r of h.radiusFees)if(i<=r.radius){u=r.price;break}u!==null?(d(!0),l(u),D(u),Z.setState({readyForMobile:!0})):(d(!1),k<1?$("Oops! They don't cover your area. Try another stylist nearby."):$("Oops! Mobile's not available in your area, but you can still book at their home or salon"),D(0),Z.setState({readyForMobile:!1})),N(!1)},R=o=>{a(o.target.value)};return C?t.jsxs("div",{className:"mt-4 mb-6 p-4 border border-gray-300 rounded-lg bg-white",children:[t.jsx(K.Button,{block:!0,active:!0,className:"h-10"}),t.jsx(K.Input,{active:!0,className:"w-full h-6 mb-3"})]}):t.jsxs("div",{className:"sm:w-full md:w-5/6 mt-4 mb-6 p-4 border border-gray-300 rounded-xl bg-[#F5F5F5]",children:[b?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"font-medium mt-2 mb-3",children:b.name}),t.jsxs("div",{children:[S&&t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Checking availability..."}),s&&g!==null&&t.jsxs("div",{className:"flex items-center text-green-600 font-semibold mt-2",children:[t.jsx(We,{className:"w-5 h-5 mr-1"}),"You are inside the service area."]}),w&&t.jsxs("div",{className:"flex items-center text-red-500 font-semibold mt-2",children:[t.jsx(Ge,{className:"w-5 h-5 mr-1"}),w]})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-sm text-gray-700",children:"To check if you are within their mobile service area, enter your location or postcode."}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-start items-center gap-6 mt-3",children:[t.jsx("div",{className:"sm:w-full md:w-[35%]",children:t.jsx("input",{ref:F,type:"text",placeholder:"Enter Location Or Postcode",value:n,onChange:R,className:"us-field-style_2"})}),t.jsxs("div",{children:[S&&t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Checking location..."}),s&&g!==null&&t.jsxs("div",{className:"flex text-sm font-semibold mt-2",children:[t.jsx(We,{className:"w-5 h-5 mr-1"}),"Yasss! You're in the service area - this stylist can come to you!"]}),w&&t.jsxs("div",{className:"flex items-center text-red-500 font-semibold mt-2",children:[t.jsx(Ge,{className:"w-5 h-5 mr-1"}),w]})]})]})]}),s&&g!==null&&t.jsxs(t.Fragment,{children:[t.jsxs("p",{className:"!mt-4 text-lg font-semibold",children:["Mobile Travel Fee: ",t.jsxs("span",{className:"text-gray-900",children:["+",g.toFixed(2)]})]}),t.jsx("input",{type:"hidden",name:"travelFee",value:g.toFixed(2)}),t.jsx("input",{type:"hidden",name:"postCode",value:(A==null?void 0:A.address)||(b==null?void 0:b.name)||n})]}),b&&t.jsxs("button",{onClick:()=>{document.cookie="frohub_location=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",p(null),l(null),d(!1)},className:"flex items-center gap-1 text-sm text-red-600 hover:text-red-800 mt-2",children:[t.jsx(Hn,{className:"w-4 h-4"}),"Reset Location"]})]})}function ca({productId:e,partnerId:n,onServiceTypeChange:a}){const[s,d]=c.useState([]),[g,l]=c.useState(null),[h,j]=c.useState(!0),{setTotalService:S}=Z();c.useEffect(()=>{e&&(j(!0),ne("frohub/get_service_type",C=>{var _,w;if(C.success&&((_=C.data)!=null&&_.data)&&Array.isArray(C.data.data)){const $=((w=C.data.data[0])==null?void 0:w.toLowerCase())||null;d(C.data.data),S(C.data.data.length),l($),a($)}j(!1)},{product_id:e}))},[e]);const N=C=>{const _=C.toLowerCase();l(_),a(_)};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:["Service Type",t.jsx("form",{children:t.jsx("div",{className:"grid sm:grid-cols-1 md:grid-cols-3 gap-4 mt-3 mb-6",children:h?Array.from({length:3}).map((C,_)=>t.jsx(Xe,{loading:!0},_)):s.map(C=>t.jsx(Xe,{service:C,selectedService:g,handleSelectService:N,loading:!1},C.toLowerCase()))})})]}),g==="mobile"&&t.jsx(ia,{partnerId:n})]})}const la=({addOn:e,selectedAddOns:n,handleSelectAddOn:a,loading:s})=>s?t.jsx("div",{className:"px-4 py-2 border rounded-full",children:t.jsx(K.Input,{style:{width:150},active:!0})}):e?t.jsxs("label",{className:`inline-flex items-center cursor-pointer px-4 py-2 border rounded-full ${n.includes(e)?"fhcheck-selected border-gray-500":"border-gray-300"}`,children:[t.jsx("input",{type:"checkbox",className:"hidden",checked:n.includes(e),onChange:()=>a(e),"data-add-on-name":e.name,"data-add-on-id":e.id,"data-price":e.price,"data-duration":e.duration_minutes}),t.jsxs("span",{className:"text-gray-700 text-sm",children:[e.name," + ",e.price,e.duration_minutes>0&&` (${e.duration_minutes} mins)`]})]}):null;function da({productId:e,setProductId:n,selectedAddOns:a,setSelectedAddOns:s,setProductPrice:d}){const{selectedDate:g,setAvailabilityData:l}=Z(),[h,j]=c.useState([]),[S,N]=c.useState(null),[C,_]=c.useState(!0);c.useEffect(()=>{(()=>{const b=document.querySelector(".frohub_add_to_cart");b&&n(b.dataset.productId)})()},[n]),c.useEffect(()=>{e&&(()=>{_(!0),ne("frohub/get_addons",b=>{b.success?(j(b.data.add_ons||[]),d(parseFloat(b.data.product_price)||0)):(console.error("Error fetching add-ons:",b.message),N(b.message)),_(!1)},{product_id:e})})()},[e,d]),c.useEffect(()=>{const $=a.map(p=>p.id),b=document.getElementById("frohub-selected-addon-ids");b&&(b.value=JSON.stringify($))},[a]);const w=$=>{Z.setState({loading:!0});const b=parseInt($.duration_minutes,10)||0;s(p=>{let D;p.some(k=>k.id===$.id)?(d(k=>k-parseFloat($.price)),Z.setState(k=>({addonTotalTime:(k.addonTotalTime||0)-b})),D=p.filter(k=>k.id!==$.id)):(d(k=>k+parseFloat($.price)),Z.setState(k=>({addonTotalTime:(k.addonTotalTime||0)+b})),D=[...p,$]);const T=D.map(k=>k.id);return ne("frohub/get_availibility",k=>{if(k.success){const F=Z.getState().availabilityData;JSON.stringify(F)!==JSON.stringify(k.data.availability)&&(l(k.data.availability),Z.setState({loading:!1}))}else console.error("Error fetching availability:",k.message),Z.setState({loading:!1})},{product_id:e,date:g,addons_id:T}),D})};return t.jsxs("div",{children:[t.jsx("input",{type:"hidden",id:"frohub-selected-addon-ids",name:"frohub-selected-addon-ids",value:JSON.stringify(a.map($=>$.id))}),C?t.jsx("div",{className:"flex gap-2 !mb-3",children:Array.from({length:3}).map(($,b)=>t.jsx(K.Button,{active:!0,style:{width:150,height:40,borderRadius:20}},b))}):e?t.jsx(t.Fragment,{children:S?t.jsxs("p",{children:["Error: ",S]}):t.jsx(t.Fragment,{children:Array.isArray(h)&&h.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mb-3",children:"Select add-ons"}),t.jsx("ul",{className:"flex justify-start items-start gap-2 !list-none !p-0 !m-0 !mb-3",children:h.map($=>t.jsx("li",{children:t.jsx(la,{addOn:$,selectedAddOns:a,handleSelectAddOn:w})},$.id))})]})})}):t.jsx("p",{children:"Loading add-ons..."})]})}function ua(){const[e,n]=c.useState(null),[a,s]=c.useState(null),[d,g]=c.useState([]),[l,h]=c.useState(0),[j,S]=c.useState(""),{setProductId:N,setSelectedAddOns:C,setProductPrice:_,setSelectedServiceType:w}=Z();c.useEffect(()=>{const b=document.querySelector(".frohub_add_to_cart");if(b){const p=b.getAttribute("data-partner-id");p&&n(p)}},[]),c.useEffect(()=>{N(a)},[a,N]),c.useEffect(()=>{C(d)},[d,C]),c.useEffect(()=>{_(l)},[l,_]),c.useEffect(()=>{w(j)},[j,w]);const $=b=>{S(b)};return t.jsxs("div",{children:[t.jsx(da,{productId:a,setProductId:s,selectedAddOns:d,setSelectedAddOns:g,setProductPrice:h}),t.jsx(ca,{productId:a,partnerId:e,onServiceTypeChange:$})]})}ra();const De=document.querySelector(".frohub_add_to_cart");if(De){const e=De.getAttribute("data-key");ve.createRoot(De).render(t.jsx(ua,{dataKey:e}))}const fa=document.querySelectorAll(".frohub_calender");fa.forEach(e=>{const n=e.getAttribute("data-key");ve.createRoot(e).render(t.jsx(ta,{dataKey:n}))});const ma=document.querySelectorAll(".request_book_button");ma.forEach(e=>{const n=e.getAttribute("data-key");ve.createRoot(e).render(t.jsx(Jn,{dataKey:n}))});const ha=document.querySelectorAll(".customer_message");ha.forEach(e=>{const n=e.getAttribute("data-key");ve.createRoot(e).render(t.jsx(Tn,{dataKey:n}))});const ga=document.querySelectorAll(".customer_message_mobile");ga.forEach(e=>{const n=e.getAttribute("data-key");ve.createRoot(e).render(t.jsx(Pn,{dataKey:n}))});
