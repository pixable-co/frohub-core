import{r as c,_ as oe,a as Qe,p as bt,b as _e,c as se,d as ke,K as St,R as G,C as jt,e as et,f as he,g as ge,h as Ct,i as me,j as Nt,u as pe,k as wt,l as _t,m as Mt,n as $t,o as Dt,q as Ee,s as tt,t as kt,v as It,w as Et,x as At,y as Pt,z as Tt,A as Yt,B as Ae,D as Ft,E as Lt,F as Rt,G as t,H as ne,S as K,I as Fe,J as Ot}from"./assets/fetchData-Bu2Fg7x9.js";var nt=c.forwardRef(function(e,n){var a=e.prefixCls,s=e.style,d=e.className,h=e.duration,f=h===void 0?4.5:h,g=e.showProgress,S=e.pauseOnHover,b=S===void 0?!0:S,N=e.eventKey,j=e.content,_=e.closable,w=e.closeIcon,k=w===void 0?"x":w,C=e.props,p=e.onClick,$=e.onNoticeClose,T=e.times,D=e.hovering,Y=c.useState(!1),F=oe(Y,2),P=F[0],B=F[1],I=c.useState(0),A=oe(I,2),E=A[0],x=A[1],L=c.useState(0),o=oe(L,2),i=o[0],l=o[1],r=D||P,u=f>0&&g,m=function(){$(N)},y=function(z){(z.key==="Enter"||z.code==="Enter"||z.keyCode===St.ENTER)&&m()};c.useEffect(function(){if(!r&&f>0){var O=Date.now()-i,z=setTimeout(function(){m()},f*1e3-i);return function(){b&&clearTimeout(z),l(Date.now()-O)}}},[f,r,T]),c.useEffect(function(){if(!r&&u&&(b||i===0)){var O=performance.now(),z,q=function W(){cancelAnimationFrame(z),z=requestAnimationFrame(function(X){var V=X+i-O,U=Math.min(V/(f*1e3),1);x(U*100),U<1&&W()})};return q(),function(){b&&cancelAnimationFrame(z)}}},[f,i,r,u,T]);var v=c.useMemo(function(){return Qe(_)==="object"&&_!==null?_:_?{closeIcon:k}:{}},[_,k]),M=bt(v,!0),H=100-(!E||E<0?0:E>100?100:E),R="".concat(a,"-notice");return c.createElement("div",_e({},C,{ref:n,className:se(R,d,ke({},"".concat(R,"-closable"),_)),style:s,onMouseEnter:function(z){var q;B(!0),C==null||(q=C.onMouseEnter)===null||q===void 0||q.call(C,z)},onMouseLeave:function(z){var q;B(!1),C==null||(q=C.onMouseLeave)===null||q===void 0||q.call(C,z)},onClick:p}),c.createElement("div",{className:"".concat(R,"-content")},j),_&&c.createElement("a",_e({tabIndex:0,className:"".concat(R,"-close"),onKeyDown:y,"aria-label":"Close"},M,{onClick:function(z){z.preventDefault(),z.stopPropagation(),m()}}),v.closeIcon),u&&c.createElement("progress",{className:"".concat(R,"-progress"),max:"100",value:H},H+"%"))}),at=G.createContext({}),Bt=function(n){var a=n.children,s=n.classNames;return G.createElement(at.Provider,{value:{classNames:s}},a)},Le=8,Re=3,Oe=16,Ht=function(n){var a={offset:Le,threshold:Re,gap:Oe};if(n&&Qe(n)==="object"){var s,d,h;a.offset=(s=n.offset)!==null&&s!==void 0?s:Le,a.threshold=(d=n.threshold)!==null&&d!==void 0?d:Re,a.gap=(h=n.gap)!==null&&h!==void 0?h:Oe}return[!!n,a]},zt=["className","style","classNames","styles"],qt=function(n){var a=n.configList,s=n.placement,d=n.prefixCls,h=n.className,f=n.style,g=n.motion,S=n.onAllNoticeRemoved,b=n.onNoticeClose,N=n.stack,j=c.useContext(at),_=j.classNames,w=c.useRef({}),k=c.useState(null),C=oe(k,2),p=C[0],$=C[1],T=c.useState([]),D=oe(T,2),Y=D[0],F=D[1],P=a.map(function(r){return{config:r,key:String(r.key)}}),B=Ht(N),I=oe(B,2),A=I[0],E=I[1],x=E.offset,L=E.threshold,o=E.gap,i=A&&(Y.length>0||P.length<=L),l=typeof g=="function"?g(s):g;return c.useEffect(function(){A&&Y.length>1&&F(function(r){return r.filter(function(u){return P.some(function(m){var y=m.key;return u===y})})})},[Y,P,A]),c.useEffect(function(){var r;if(A&&w.current[(r=P[P.length-1])===null||r===void 0?void 0:r.key]){var u;$(w.current[(u=P[P.length-1])===null||u===void 0?void 0:u.key])}},[P,A]),G.createElement(jt,_e({key:s,className:se(d,"".concat(d,"-").concat(s),_==null?void 0:_.list,h,ke(ke({},"".concat(d,"-stack"),!!A),"".concat(d,"-stack-expanded"),i)),style:f,keys:P,motionAppear:!0},l,{onAllRemoved:function(){S(s)}}),function(r,u){var m=r.config,y=r.className,v=r.style,M=r.index,H=m,R=H.key,O=H.times,z=String(R),q=m,W=q.className,X=q.style,V=q.classNames,U=q.styles,Q=et(q,zt),ee=P.findIndex(function(be){return be.key===z}),te={};if(A){var re=P.length-1-(ee>-1?ee:M-1),ie=s==="top"||s==="bottom"?"-50%":"0";if(re>0){var ce,le,de;te.height=i?(ce=w.current[z])===null||ce===void 0?void 0:ce.offsetHeight:p==null?void 0:p.offsetHeight;for(var fe=0,ye=0;ye<re;ye++){var $e;fe+=(($e=w.current[P[P.length-1-ye].key])===null||$e===void 0?void 0:$e.offsetHeight)+o}var xt=(i?fe:re*x)*(s.startsWith("top")?1:-1),vt=!i&&p!==null&&p!==void 0&&p.offsetWidth&&(le=w.current[z])!==null&&le!==void 0&&le.offsetWidth?((p==null?void 0:p.offsetWidth)-x*2*(re<3?re:3))/((de=w.current[z])===null||de===void 0?void 0:de.offsetWidth):1;te.transform="translate3d(".concat(ie,", ").concat(xt,"px, 0) scaleX(").concat(vt,")")}else te.transform="translate3d(".concat(ie,", 0, 0)")}return G.createElement("div",{ref:u,className:se("".concat(d,"-notice-wrapper"),y,V==null?void 0:V.wrapper),style:he(he(he({},v),te),U==null?void 0:U.wrapper),onMouseEnter:function(){return F(function(ue){return ue.includes(z)?ue:[].concat(ge(ue),[z])})},onMouseLeave:function(){return F(function(ue){return ue.filter(function(yt){return yt!==z})})}},G.createElement(nt,_e({},Q,{ref:function(ue){ee>-1?w.current[z]=ue:delete w.current[z]},prefixCls:d,classNames:V,styles:U,className:se(W,_==null?void 0:_.notice),style:X,times:O,key:R,eventKey:R,onNoticeClose:b,hovering:A&&Y.length>0})))})},Ut=c.forwardRef(function(e,n){var a=e.prefixCls,s=a===void 0?"rc-notification":a,d=e.container,h=e.motion,f=e.maxCount,g=e.className,S=e.style,b=e.onAllRemoved,N=e.stack,j=e.renderNotifications,_=c.useState([]),w=oe(_,2),k=w[0],C=w[1],p=function(A){var E,x=k.find(function(L){return L.key===A});x==null||(E=x.onClose)===null||E===void 0||E.call(x),C(function(L){return L.filter(function(o){return o.key!==A})})};c.useImperativeHandle(n,function(){return{open:function(A){C(function(E){var x=ge(E),L=x.findIndex(function(l){return l.key===A.key}),o=he({},A);if(L>=0){var i;o.times=(((i=E[L])===null||i===void 0?void 0:i.times)||0)+1,x[L]=o}else o.times=0,x.push(o);return f>0&&x.length>f&&(x=x.slice(-f)),x})},close:function(A){p(A)},destroy:function(){C([])}}});var $=c.useState({}),T=oe($,2),D=T[0],Y=T[1];c.useEffect(function(){var I={};k.forEach(function(A){var E=A.placement,x=E===void 0?"topRight":E;x&&(I[x]=I[x]||[],I[x].push(A))}),Object.keys(D).forEach(function(A){I[A]=I[A]||[]}),Y(I)},[k]);var F=function(A){Y(function(E){var x=he({},E),L=x[A]||[];return L.length||delete x[A],x})},P=c.useRef(!1);if(c.useEffect(function(){Object.keys(D).length>0?P.current=!0:P.current&&(b==null||b(),P.current=!1)},[D]),!d)return null;var B=Object.keys(D);return Ct.createPortal(c.createElement(c.Fragment,null,B.map(function(I){var A=D[I],E=c.createElement(qt,{key:I,configList:A,placement:I,prefixCls:s,className:g==null?void 0:g(I),style:S==null?void 0:S(I),motion:h,onNoticeClose:p,onAllNoticeRemoved:F,stack:N});return j?j(E,{prefixCls:s,key:I}):E})),d)}),Wt=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],Gt=function(){return document.body},Be=0;function Kt(){for(var e={},n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return a.forEach(function(d){d&&Object.keys(d).forEach(function(h){var f=d[h];f!==void 0&&(e[h]=f)})}),e}function Vt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.getContainer,a=n===void 0?Gt:n,s=e.motion,d=e.prefixCls,h=e.maxCount,f=e.className,g=e.style,S=e.onAllRemoved,b=e.stack,N=e.renderNotifications,j=et(e,Wt),_=c.useState(),w=oe(_,2),k=w[0],C=w[1],p=c.useRef(),$=c.createElement(Ut,{container:k,ref:p,prefixCls:d,motion:s,maxCount:h,className:f,style:g,onAllRemoved:S,stack:b,renderNotifications:N}),T=c.useState([]),D=oe(T,2),Y=D[0],F=D[1],P=c.useMemo(function(){return{open:function(I){var A=Kt(j,I);(A.key===null||A.key===void 0)&&(A.key="rc-notification-".concat(Be),Be+=1),F(function(E){return[].concat(ge(E),[{type:"open",config:A}])})},close:function(I){F(function(A){return[].concat(ge(A),[{type:"close",key:I}])})},destroy:function(){F(function(I){return[].concat(ge(I),[{type:"destroy"}])})}}},[]);return c.useEffect(function(){C(a())}),c.useEffect(function(){p.current&&Y.length&&(Y.forEach(function(B){switch(B.type){case"open":p.current.open(B.config);break;case"close":p.current.close(B.key);break;case"destroy":p.current.destroy();break}}),F(function(B){return B.filter(function(I){return!Y.includes(I)})}))},[Y]),[P,$]}const Jt=e=>{const{componentCls:n,notificationMarginEdge:a,animationMaxHeight:s}=e,d=`${n}-notice`,h=new me("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),f=new me("antNotificationTopFadeIn",{"0%":{top:-s,opacity:0},"100%":{top:0,opacity:1}}),g=new me("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(s).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),S=new me("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[n]:{[`&${n}-top, &${n}-bottom`]:{marginInline:0,[d]:{marginInline:"auto auto"}},[`&${n}-top`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:f}},[`&${n}-bottom`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:g}},[`&${n}-topRight, &${n}-bottomRight`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:h}},[`&${n}-topLeft, &${n}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:a,_skip_check_:!0},[d]:{marginInlineEnd:"auto",marginInlineStart:0},[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:S}}}}},Zt=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Xt={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},Qt=(e,n)=>{const{componentCls:a}=e;return{[`${a}-${n}`]:{[`&${a}-stack > ${a}-notice-wrapper`]:{[n.startsWith("top")?"top":"bottom"]:0,[Xt[n]]:{value:0,_skip_check_:!0}}}}},en=e=>{const n={};for(let a=1;a<e.notificationStackLayer;a++)n[`&:nth-last-child(${a+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},n)},tn=e=>{const n={};for(let a=1;a<e.notificationStackLayer;a++)n[`&:nth-last-child(${a+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},n)},nn=e=>{const{componentCls:n}=e;return Object.assign({[`${n}-stack`]:{[`& > ${n}-notice-wrapper`]:Object.assign({transition:`transform ${e.motionDurationSlow}, backdrop-filter 0s`,willChange:"transform, opacity",position:"absolute"},en(e))},[`${n}-stack:not(${n}-stack-expanded)`]:{[`& > ${n}-notice-wrapper`]:Object.assign({},tn(e))},[`${n}-stack${n}-stack-expanded`]:{[`& > ${n}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Zt.map(a=>Qt(e,a)).reduce((a,s)=>Object.assign(Object.assign({},a),s),{}))},st=e=>{const{iconCls:n,componentCls:a,boxShadow:s,fontSizeLG:d,notificationMarginBottom:h,borderRadiusLG:f,colorSuccess:g,colorInfo:S,colorWarning:b,colorError:N,colorTextHeading:j,notificationBg:_,notificationPadding:w,notificationMarginEdge:k,notificationProgressBg:C,notificationProgressHeight:p,fontSize:$,lineHeight:T,width:D,notificationIconSize:Y,colorText:F}=e,P=`${a}-notice`;return{position:"relative",marginBottom:h,marginInlineStart:"auto",background:_,borderRadius:f,boxShadow:s,[P]:{padding:w,width:D,maxWidth:`calc(100vw - ${pe(e.calc(k).mul(2).equal())})`,overflow:"hidden",lineHeight:T,wordWrap:"break-word"},[`${P}-message`]:{marginBottom:e.marginXS,color:j,fontSize:d,lineHeight:e.lineHeightLG},[`${P}-description`]:{fontSize:$,color:F},[`${P}-closable ${P}-message`]:{paddingInlineEnd:e.paddingLG},[`${P}-with-icon ${P}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(Y).equal(),fontSize:d},[`${P}-with-icon ${P}-description`]:{marginInlineStart:e.calc(e.marginSM).add(Y).equal(),fontSize:$},[`${P}-icon`]:{position:"absolute",fontSize:Y,lineHeight:1,[`&-success${n}`]:{color:g},[`&-info${n}`]:{color:S},[`&-warning${n}`]:{color:b},[`&-error${n}`]:{color:N}},[`${P}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},wt(e)),[`${P}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${pe(f)} * 2)`,left:{_skip_check_:!0,value:f},right:{_skip_check_:!0,value:f},bottom:0,blockSize:p,border:0,"&, &::-webkit-progress-bar":{borderRadius:f,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:C},"&::-webkit-progress-value":{borderRadius:f,background:C}},[`${P}-btn`]:{float:"right",marginTop:e.marginSM}}},an=e=>{const{componentCls:n,notificationMarginBottom:a,notificationMarginEdge:s,motionDurationMid:d,motionEaseInOut:h}=e,f=`${n}-notice`,g=new me("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:a},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[n]:Object.assign(Object.assign({},_t(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:s,_skip_check_:!0},[`${n}-hook-holder`]:{position:"relative"},[`${n}-fade-appear-prepare`]:{opacity:"0 !important"},[`${n}-fade-enter, ${n}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:h,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${n}-fade-leave`]:{animationTimingFunction:h,animationFillMode:"both",animationDuration:d,animationPlayState:"paused"},[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationPlayState:"running"},[`${n}-fade-leave${n}-fade-leave-active`]:{animationName:g,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${f}-btn`]:{float:"left"}}})},{[n]:{[`${f}-wrapper`]:Object.assign({},st(e))}}]},rt=e=>({zIndexPopup:e.zIndexPopupBase+Mt+50,width:384}),ot=e=>{const n=e.paddingMD,a=e.paddingLG;return $t(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:n,notificationPaddingHorizontal:a,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${pe(e.paddingMD)} ${pe(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},it=Nt("Notification",e=>{const n=ot(e);return[an(n),Jt(n),nn(n)]},rt),sn=Dt(["Notification","PurePanel"],e=>{const n=`${e.componentCls}-notice`,a=ot(e);return{[`${n}-pure-panel`]:Object.assign(Object.assign({},st(a)),{width:a.width,maxWidth:`calc(100vw - ${pe(e.calc(a.notificationMarginEdge).mul(2).equal())})`,margin:0})}},rt);var rn=function(e,n){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,s=Object.getOwnPropertySymbols(e);d<s.length;d++)n.indexOf(s[d])<0&&Object.prototype.propertyIsEnumerable.call(e,s[d])&&(a[s[d]]=e[s[d]]);return a};function Pe(e,n){return n===null||n===!1?null:n||c.createElement(kt,{className:`${e}-close-icon`})}const on={success:It,info:Et,error:At,warning:Pt},ct=e=>{const{prefixCls:n,icon:a,type:s,message:d,description:h,btn:f,role:g="alert"}=e;let S=null;return a?S=c.createElement("span",{className:`${n}-icon`},a):s&&(S=c.createElement(on[s]||null,{className:se(`${n}-icon`,`${n}-icon-${s}`)})),c.createElement("div",{className:se({[`${n}-with-icon`]:S}),role:g},S,c.createElement("div",{className:`${n}-message`},d),c.createElement("div",{className:`${n}-description`},h),f&&c.createElement("div",{className:`${n}-btn`},f))},cn=e=>{const{prefixCls:n,className:a,icon:s,type:d,message:h,description:f,btn:g,closable:S=!0,closeIcon:b,className:N}=e,j=rn(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon","className"]),{getPrefixCls:_}=c.useContext(Ee),w=n||_("notification"),k=`${w}-notice`,C=tt(w),[p,$,T]=it(w,C);return p(c.createElement("div",{className:se(`${k}-pure-panel`,$,a,T,C)},c.createElement(sn,{prefixCls:w}),c.createElement(nt,Object.assign({},j,{prefixCls:w,eventKey:"pure",duration:null,closable:S,className:se({notificationClassName:N}),closeIcon:Pe(w,b),content:c.createElement(ct,{prefixCls:k,icon:s,type:d,message:h,description:f,btn:g})}))))};function ln(e,n,a){let s;switch(e){case"top":s={left:"50%",transform:"translateX(-50%)",right:"auto",top:n,bottom:"auto"};break;case"topLeft":s={left:0,top:n,bottom:"auto"};break;case"topRight":s={right:0,top:n,bottom:"auto"};break;case"bottom":s={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:a};break;case"bottomLeft":s={left:0,top:"auto",bottom:a};break;default:s={right:0,top:"auto",bottom:a};break}return s}function dn(e){return{motionName:`${e}-fade`}}function un(e,n,a){return typeof e<"u"?e:typeof(n==null?void 0:n.closeIcon)<"u"?n.closeIcon:a==null?void 0:a.closeIcon}var fn=function(e,n){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,s=Object.getOwnPropertySymbols(e);d<s.length;d++)n.indexOf(s[d])<0&&Object.prototype.propertyIsEnumerable.call(e,s[d])&&(a[s[d]]=e[s[d]]);return a};const He=24,mn=4.5,hn="topRight",gn=e=>{let{children:n,prefixCls:a}=e;const s=tt(a),[d,h,f]=it(a,s);return d(G.createElement(Bt,{classNames:{list:se(h,f,s)}},n))},pn=(e,n)=>{let{prefixCls:a,key:s}=n;return G.createElement(gn,{prefixCls:a,key:s},e)},xn=G.forwardRef((e,n)=>{const{top:a,bottom:s,prefixCls:d,getContainer:h,maxCount:f,rtl:g,onAllRemoved:S,stack:b,duration:N,pauseOnHover:j=!0,showProgress:_}=e,{getPrefixCls:w,getPopupContainer:k,notification:C,direction:p}=c.useContext(Ee),[,$]=Tt(),T=d||w("notification"),D=I=>ln(I,a??He,s??He),Y=()=>se({[`${T}-rtl`]:g??p==="rtl"}),F=()=>dn(T),[P,B]=Vt({prefixCls:T,style:D,className:Y,motion:F,closable:!0,closeIcon:Pe(T),duration:N??mn,getContainer:()=>(h==null?void 0:h())||(k==null?void 0:k())||document.body,maxCount:f,pauseOnHover:j,showProgress:_,onAllRemoved:S,renderNotifications:pn,stack:b===!1?!1:{threshold:typeof b=="object"?b==null?void 0:b.threshold:void 0,offset:8,gap:$.margin}});return G.useImperativeHandle(n,()=>Object.assign(Object.assign({},P),{prefixCls:T,notification:C})),B});function lt(e){const n=G.useRef(null);return Yt(),[G.useMemo(()=>{const s=g=>{var S;if(!n.current)return;const{open:b,prefixCls:N,notification:j}=n.current,_=`${N}-notice`,{message:w,description:k,icon:C,type:p,btn:$,className:T,style:D,role:Y="alert",closeIcon:F,closable:P}=g,B=fn(g,["message","description","icon","type","btn","className","style","role","closeIcon","closable"]),I=Pe(_,un(F,e,j));return b(Object.assign(Object.assign({placement:(S=e==null?void 0:e.placement)!==null&&S!==void 0?S:hn},B),{content:G.createElement(ct,{prefixCls:_,icon:C,type:p,message:w,description:k,btn:$,role:Y}),className:se(p&&`${_}-${p}`,T,j==null?void 0:j.className),style:Object.assign(Object.assign({},j==null?void 0:j.style),D),closeIcon:I,closable:P??!!I}))},h={open:s,destroy:g=>{var S,b;g!==void 0?(S=n.current)===null||S===void 0||S.close(g):(b=n.current)===null||b===void 0||b.destroy()}};return["success","info","warning","error"].forEach(g=>{h[g]=S=>s(Object.assign(Object.assign({},S),{type:g}))}),h},[]),G.createElement(xn,Object.assign({key:"notification-holder"},e,{ref:n}))]}function vn(e){return lt(e)}const yn=G.createContext({});var je={exports:{}},bn=je.exports,ze;function Sn(){return ze||(ze=1,function(e,n){(function(a,s){e.exports=s()})(bn,function(){var a=1e3,s=6e4,d=36e5,h="millisecond",f="second",g="minute",S="hour",b="day",N="week",j="month",_="quarter",w="year",k="date",C="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,$=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,T={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(i){var l=["th","st","nd","rd"],r=i%100;return"["+i+(l[(r-20)%10]||l[r]||l[0])+"]"}},D=function(i,l,r){var u=String(i);return!u||u.length>=l?i:""+Array(l+1-u.length).join(r)+i},Y={s:D,z:function(i){var l=-i.utcOffset(),r=Math.abs(l),u=Math.floor(r/60),m=r%60;return(l<=0?"+":"-")+D(u,2,"0")+":"+D(m,2,"0")},m:function i(l,r){if(l.date()<r.date())return-i(r,l);var u=12*(r.year()-l.year())+(r.month()-l.month()),m=l.clone().add(u,j),y=r-m<0,v=l.clone().add(u+(y?-1:1),j);return+(-(u+(r-m)/(y?m-v:v-m))||0)},a:function(i){return i<0?Math.ceil(i)||0:Math.floor(i)},p:function(i){return{M:j,y:w,w:N,d:b,D:k,h:S,m:g,s:f,ms:h,Q:_}[i]||String(i||"").toLowerCase().replace(/s$/,"")},u:function(i){return i===void 0}},F="en",P={};P[F]=T;var B="$isDayjsObject",I=function(i){return i instanceof L||!(!i||!i[B])},A=function i(l,r,u){var m;if(!l)return F;if(typeof l=="string"){var y=l.toLowerCase();P[y]&&(m=y),r&&(P[y]=r,m=y);var v=l.split("-");if(!m&&v.length>1)return i(v[0])}else{var M=l.name;P[M]=l,m=M}return!u&&m&&(F=m),m||!u&&F},E=function(i,l){if(I(i))return i.clone();var r=typeof l=="object"?l:{};return r.date=i,r.args=arguments,new L(r)},x=Y;x.l=A,x.i=I,x.w=function(i,l){return E(i,{locale:l.$L,utc:l.$u,x:l.$x,$offset:l.$offset})};var L=function(){function i(r){this.$L=A(r.locale,null,!0),this.parse(r),this.$x=this.$x||r.x||{},this[B]=!0}var l=i.prototype;return l.parse=function(r){this.$d=function(u){var m=u.date,y=u.utc;if(m===null)return new Date(NaN);if(x.u(m))return new Date;if(m instanceof Date)return new Date(m);if(typeof m=="string"&&!/Z$/i.test(m)){var v=m.match(p);if(v){var M=v[2]-1||0,H=(v[7]||"0").substring(0,3);return y?new Date(Date.UTC(v[1],M,v[3]||1,v[4]||0,v[5]||0,v[6]||0,H)):new Date(v[1],M,v[3]||1,v[4]||0,v[5]||0,v[6]||0,H)}}return new Date(m)}(r),this.init()},l.init=function(){var r=this.$d;this.$y=r.getFullYear(),this.$M=r.getMonth(),this.$D=r.getDate(),this.$W=r.getDay(),this.$H=r.getHours(),this.$m=r.getMinutes(),this.$s=r.getSeconds(),this.$ms=r.getMilliseconds()},l.$utils=function(){return x},l.isValid=function(){return this.$d.toString()!==C},l.isSame=function(r,u){var m=E(r);return this.startOf(u)<=m&&m<=this.endOf(u)},l.isAfter=function(r,u){return E(r)<this.startOf(u)},l.isBefore=function(r,u){return this.endOf(u)<E(r)},l.$g=function(r,u,m){return x.u(r)?this[u]:this.set(m,r)},l.unix=function(){return Math.floor(this.valueOf()/1e3)},l.valueOf=function(){return this.$d.getTime()},l.startOf=function(r,u){var m=this,y=!!x.u(u)||u,v=x.p(r),M=function(V,U){var Q=x.w(m.$u?Date.UTC(m.$y,U,V):new Date(m.$y,U,V),m);return y?Q:Q.endOf(b)},H=function(V,U){return x.w(m.toDate()[V].apply(m.toDate("s"),(y?[0,0,0,0]:[23,59,59,999]).slice(U)),m)},R=this.$W,O=this.$M,z=this.$D,q="set"+(this.$u?"UTC":"");switch(v){case w:return y?M(1,0):M(31,11);case j:return y?M(1,O):M(0,O+1);case N:var W=this.$locale().weekStart||0,X=(R<W?R+7:R)-W;return M(y?z-X:z+(6-X),O);case b:case k:return H(q+"Hours",0);case S:return H(q+"Minutes",1);case g:return H(q+"Seconds",2);case f:return H(q+"Milliseconds",3);default:return this.clone()}},l.endOf=function(r){return this.startOf(r,!1)},l.$set=function(r,u){var m,y=x.p(r),v="set"+(this.$u?"UTC":""),M=(m={},m[b]=v+"Date",m[k]=v+"Date",m[j]=v+"Month",m[w]=v+"FullYear",m[S]=v+"Hours",m[g]=v+"Minutes",m[f]=v+"Seconds",m[h]=v+"Milliseconds",m)[y],H=y===b?this.$D+(u-this.$W):u;if(y===j||y===w){var R=this.clone().set(k,1);R.$d[M](H),R.init(),this.$d=R.set(k,Math.min(this.$D,R.daysInMonth())).$d}else M&&this.$d[M](H);return this.init(),this},l.set=function(r,u){return this.clone().$set(r,u)},l.get=function(r){return this[x.p(r)]()},l.add=function(r,u){var m,y=this;r=Number(r);var v=x.p(u),M=function(O){var z=E(y);return x.w(z.date(z.date()+Math.round(O*r)),y)};if(v===j)return this.set(j,this.$M+r);if(v===w)return this.set(w,this.$y+r);if(v===b)return M(1);if(v===N)return M(7);var H=(m={},m[g]=s,m[S]=d,m[f]=a,m)[v]||1,R=this.$d.getTime()+r*H;return x.w(R,this)},l.subtract=function(r,u){return this.add(-1*r,u)},l.format=function(r){var u=this,m=this.$locale();if(!this.isValid())return m.invalidDate||C;var y=r||"YYYY-MM-DDTHH:mm:ssZ",v=x.z(this),M=this.$H,H=this.$m,R=this.$M,O=m.weekdays,z=m.months,q=m.meridiem,W=function(U,Q,ee,te){return U&&(U[Q]||U(u,y))||ee[Q].slice(0,te)},X=function(U){return x.s(M%12||12,U,"0")},V=q||function(U,Q,ee){var te=U<12?"AM":"PM";return ee?te.toLowerCase():te};return y.replace($,function(U,Q){return Q||function(ee){switch(ee){case"YY":return String(u.$y).slice(-2);case"YYYY":return x.s(u.$y,4,"0");case"M":return R+1;case"MM":return x.s(R+1,2,"0");case"MMM":return W(m.monthsShort,R,z,3);case"MMMM":return W(z,R);case"D":return u.$D;case"DD":return x.s(u.$D,2,"0");case"d":return String(u.$W);case"dd":return W(m.weekdaysMin,u.$W,O,2);case"ddd":return W(m.weekdaysShort,u.$W,O,3);case"dddd":return O[u.$W];case"H":return String(M);case"HH":return x.s(M,2,"0");case"h":return X(1);case"hh":return X(2);case"a":return V(M,H,!0);case"A":return V(M,H,!1);case"m":return String(H);case"mm":return x.s(H,2,"0");case"s":return String(u.$s);case"ss":return x.s(u.$s,2,"0");case"SSS":return x.s(u.$ms,3,"0");case"Z":return v}return null}(U)||v.replace(":","")})},l.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},l.diff=function(r,u,m){var y,v=this,M=x.p(u),H=E(r),R=(H.utcOffset()-this.utcOffset())*s,O=this-H,z=function(){return x.m(v,H)};switch(M){case w:y=z()/12;break;case j:y=z();break;case _:y=z()/3;break;case N:y=(O-R)/6048e5;break;case b:y=(O-R)/864e5;break;case S:y=O/d;break;case g:y=O/s;break;case f:y=O/a;break;default:y=O}return m?y:x.a(y)},l.daysInMonth=function(){return this.endOf(j).$D},l.$locale=function(){return P[this.$L]},l.locale=function(r,u){if(!r)return this.$L;var m=this.clone(),y=A(r,u,!0);return y&&(m.$L=y),m},l.clone=function(){return x.w(this.$d,this)},l.toDate=function(){return new Date(this.valueOf())},l.toJSON=function(){return this.isValid()?this.toISOString():null},l.toISOString=function(){return this.$d.toISOString()},l.toString=function(){return this.$d.toUTCString()},i}(),o=L.prototype;return E.prototype=o,[["$ms",h],["$s",f],["$m",g],["$H",S],["$W",b],["$M",j],["$y",w],["$D",k]].forEach(function(i){o[i[1]]=function(l){return this.$g(l,i[0],i[1])}}),E.extend=function(i,l){return i.$i||(i(l,L,E),i.$i=!0),E},E.locale=A,E.isDayjs=I,E.unix=function(i){return E(1e3*i)},E.en=P[F],E.Ls=P,E.p={},E})}(je)),je.exports}var jn=Sn();const J=Ae(jn);var Ce={exports:{}},Cn=Ce.exports,qe;function Nn(){return qe||(qe=1,function(e,n){(function(a,s){e.exports=s()})(Cn,function(){var a={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},s=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,d=/\d/,h=/\d\d/,f=/\d\d?/,g=/\d*[^-_:/,()\s\d]+/,S={},b=function(p){return(p=+p)+(p>68?1900:2e3)},N=function(p){return function($){this[p]=+$}},j=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function($){if(!$||$==="Z")return 0;var T=$.match(/([+-]|\d\d)/g),D=60*T[1]+(+T[2]||0);return D===0?0:T[0]==="+"?-D:D}(p)}],_=function(p){var $=S[p];return $&&($.indexOf?$:$.s.concat($.f))},w=function(p,$){var T,D=S.meridiem;if(D){for(var Y=1;Y<=24;Y+=1)if(p.indexOf(D(Y,0,$))>-1){T=Y>12;break}}else T=p===($?"pm":"PM");return T},k={A:[g,function(p){this.afternoon=w(p,!1)}],a:[g,function(p){this.afternoon=w(p,!0)}],Q:[d,function(p){this.month=3*(p-1)+1}],S:[d,function(p){this.milliseconds=100*+p}],SS:[h,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[f,N("seconds")],ss:[f,N("seconds")],m:[f,N("minutes")],mm:[f,N("minutes")],H:[f,N("hours")],h:[f,N("hours")],HH:[f,N("hours")],hh:[f,N("hours")],D:[f,N("day")],DD:[h,N("day")],Do:[g,function(p){var $=S.ordinal,T=p.match(/\d+/);if(this.day=T[0],$)for(var D=1;D<=31;D+=1)$(D).replace(/\[|\]/g,"")===p&&(this.day=D)}],w:[f,N("week")],ww:[h,N("week")],M:[f,N("month")],MM:[h,N("month")],MMM:[g,function(p){var $=_("months"),T=(_("monthsShort")||$.map(function(D){return D.slice(0,3)})).indexOf(p)+1;if(T<1)throw new Error;this.month=T%12||T}],MMMM:[g,function(p){var $=_("months").indexOf(p)+1;if($<1)throw new Error;this.month=$%12||$}],Y:[/[+-]?\d+/,N("year")],YY:[h,function(p){this.year=b(p)}],YYYY:[/\d{4}/,N("year")],Z:j,ZZ:j};function C(p){var $,T;$=p,T=S&&S.formats;for(var D=(p=$.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(E,x,L){var o=L&&L.toUpperCase();return x||T[L]||a[L]||T[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(i,l,r){return l||r.slice(1)})})).match(s),Y=D.length,F=0;F<Y;F+=1){var P=D[F],B=k[P],I=B&&B[0],A=B&&B[1];D[F]=A?{regex:I,parser:A}:P.replace(/^\[|\]$/g,"")}return function(E){for(var x={},L=0,o=0;L<Y;L+=1){var i=D[L];if(typeof i=="string")o+=i.length;else{var l=i.regex,r=i.parser,u=E.slice(o),m=l.exec(u)[0];r.call(x,m),E=E.replace(m,"")}}return function(y){var v=y.afternoon;if(v!==void 0){var M=y.hours;v?M<12&&(y.hours+=12):M===12&&(y.hours=0),delete y.afternoon}}(x),x}}return function(p,$,T){T.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(b=p.parseTwoDigitYear);var D=$.prototype,Y=D.parse;D.parse=function(F){var P=F.date,B=F.utc,I=F.args;this.$u=B;var A=I[1];if(typeof A=="string"){var E=I[2]===!0,x=I[3]===!0,L=E||x,o=I[2];x&&(o=I[2]),S=this.$locale(),!E&&o&&(S=T.Ls[o]),this.$d=function(u,m,y,v){try{if(["x","X"].indexOf(m)>-1)return new Date((m==="X"?1e3:1)*u);var M=C(m)(u),H=M.year,R=M.month,O=M.day,z=M.hours,q=M.minutes,W=M.seconds,X=M.milliseconds,V=M.zone,U=M.week,Q=new Date,ee=O||(H||R?1:Q.getDate()),te=H||Q.getFullYear(),re=0;H&&!R||(re=R>0?R-1:Q.getMonth());var ie,ce=z||0,le=q||0,de=W||0,fe=X||0;return V?new Date(Date.UTC(te,re,ee,ce,le,de,fe+60*V.offset*1e3)):y?new Date(Date.UTC(te,re,ee,ce,le,de,fe)):(ie=new Date(te,re,ee,ce,le,de,fe),U&&(ie=v(ie).week(U).toDate()),ie)}catch{return new Date("")}}(P,A,B,T),this.init(),o&&o!==!0&&(this.$L=this.locale(o).$L),L&&P!=this.format(A)&&(this.$d=new Date("")),S={}}else if(A instanceof Array)for(var i=A.length,l=1;l<=i;l+=1){I[1]=A[l-1];var r=T.apply(this,I);if(r.isValid()){this.$d=r.$d,this.$L=r.$L,this.init();break}l===i&&(this.$d=new Date(""))}else Y.call(this,F)}}})}(Ce)),Ce.exports}var wn=Nn();const _n=Ae(wn);let ae=null,Ne=e=>e(),Me=[],xe={};function Ue(){const{getContainer:e,rtl:n,maxCount:a,top:s,bottom:d,showProgress:h,pauseOnHover:f}=xe,g=(e==null?void 0:e())||document.body;return{getContainer:()=>g,rtl:n,maxCount:a,top:s,bottom:d,showProgress:h,pauseOnHover:f}}const Mn=G.forwardRef((e,n)=>{const{notificationConfig:a,sync:s}=e,{getPrefixCls:d}=c.useContext(Ee),h=xe.prefixCls||d("notification"),f=c.useContext(yn),[g,S]=lt(Object.assign(Object.assign(Object.assign({},a),{prefixCls:h}),f.notification));return G.useEffect(s,[]),G.useImperativeHandle(n,()=>{const b=Object.assign({},g);return Object.keys(b).forEach(N=>{b[N]=function(){return s(),g[N].apply(g,arguments)}}),{instance:b,sync:s}}),S}),$n=G.forwardRef((e,n)=>{const[a,s]=G.useState(Ue),d=()=>{s(Ue)};G.useEffect(d,[]);const h=Rt(),f=h.getRootPrefixCls(),g=h.getIconPrefixCls(),S=h.getTheme(),b=G.createElement(Mn,{ref:n,sync:d,notificationConfig:a});return G.createElement(Ft,{prefixCls:f,iconPrefixCls:g,theme:S},h.holderRender?h.holderRender(b):b)});function Te(){if(!ae){const e=document.createDocumentFragment(),n={fragment:e};ae=n,Ne(()=>{Lt()(G.createElement($n,{ref:s=>{const{instance:d,sync:h}=s||{};Promise.resolve().then(()=>{!n.instance&&d&&(n.instance=d,n.sync=h,Te())})}}),e)});return}ae.instance&&(Me.forEach(e=>{switch(e.type){case"open":{Ne(()=>{ae.instance.open(Object.assign(Object.assign({},xe),e.config))});break}case"destroy":Ne(()=>{ae==null||ae.instance.destroy(e.key)});break}}),Me=[])}function Dn(e){xe=Object.assign(Object.assign({},xe),e),Ne(()=>{var n;(n=ae==null?void 0:ae.sync)===null||n===void 0||n.call(ae)})}function dt(e){Me.push({type:"open",config:e}),Te()}const kn=e=>{Me.push({type:"destroy",key:e}),Te()},In=["success","info","warning","error"],En={open:dt,destroy:kn,config:Dn,useNotification:vn,_InternalPanelDoNotUseOrYouWillBeFired:cn},ut=En;In.forEach(e=>{ut[e]=n=>dt(Object.assign(Object.assign({},n),{type:e}))});const Ie=({name:e,size:n="md",image:a})=>{const s=f=>(f==null?void 0:f.split(" ").map(g=>g[0]).join("").toUpperCase())||"?",d={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base"},h=d[n]||d.md;return a?t.jsx("img",{src:a,alt:e,className:`${h} rounded-full object-cover`}):t.jsx("div",{className:`${h} bg-gray-400 rounded-full flex items-center justify-center text-white font-medium`,children:s(e)})},ft=({conversation:e,partnerImage:n,isActive:a,onClick:s,isLoading:d=!1})=>{const h=f=>{if(!d){const g=f.currentTarget.querySelector('input[type="hidden"]'),S=g?g.value:null;s(e,S)}};return t.jsx("div",{className:`contact-list-avatar p-4 border-b border-gray-200 cursor-pointer ${a?"bg-blue-50":"hover:bg-gray-50"} ${d?"opacity-50":""}`,onClick:h,children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ie,{name:e.partner_name||"P",image:n}),t.jsx("div",{className:"text-gray-700",children:e.partner_name||`Partner #${e.partner_id}`}),t.jsx("input",{type:"hidden",value:e.conversation_id}),t.jsx("input",{type:"hidden",value:e.partner_id}),!e.read_by_partner&&t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})})};async function An(e){const n=new FormData;n.append("file",e);try{const s=await(await fetch("https://frohubecomm.mystagingwebsite.com/wp-json/frohub/v1/upload-comment-image",{method:"POST",headers:{Authorization:"Basic YOUR_BASIC_AUTH_HERE"},body:n})).json();if(s.success&&s.url)return s.url;throw new Error(s.error||"Upload failed")}catch(a){throw console.error("Upload error:",a),a}}const mt=({onSendMessage:e,isLoading:n=!1,disabled:a=!1})=>{const[s,d]=c.useState(""),[h,f]=c.useState(null),[g,S]=c.useState(null),[b,N]=c.useState(!1),j=c.useRef(null),_=async()=>{if(!s.trim()&&!h||n||a)return;let p="";if(h){N(!0);try{p=await An(h)}catch($){console.error("Image upload failed:",$),alert($.message||"Image upload failed")}finally{N(!1),f(null),S(null)}}(s.trim()||p)&&(await e(s,p),d(""))},w=p=>{const $=p.target.files[0];$&&(f($),S(URL.createObjectURL($)))},k=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),_())},C=()=>{j.current&&j.current.click()};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"deposit-notification-banner",children:t.jsxs("span",{children:[t.jsx("i",{className:"fas fa-exclamation-triangle"})," Only deposits paid through FroHub are protected. ",t.jsx("a",{href:"/help-centre",children:"Learn more."})]})}),t.jsxs("div",{className:"border-t bg-white p-3",children:[t.jsxs("div",{className:"flex",children:[t.jsx("input",{type:"file",accept:"image/*",ref:j,style:{display:"none"},onChange:w}),t.jsx("button",{onClick:C,type:"button",className:"ml-2 px-3 py-2 text-gray-500 hover:text-gray-700",disabled:a||b,children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),t.jsx("input",{value:s,onChange:p=>d(p.target.value),onKeyPress:k,placeholder:"Type your message...",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm",disabled:a||b}),t.jsx("button",{onClick:_,disabled:!s.trim()&&!h||n||a||b,className:"send-button bg-gray-200 text-gray-700 px-3 py-1 rounded-md text-sm",children:"Send Message"})]}),g&&t.jsx("div",{className:"mt-2 ml-10",children:t.jsxs("div",{className:"relative inline-block",children:[t.jsx("img",{src:g,alt:"Preview",className:"max-h-32 rounded"}),t.jsx("button",{onClick:()=>{f(null),S(null)},className:"absolute top-1 right-1 bg-gray-800 bg-opacity-50 rounded-full p-1 text-white hover:bg-opacity-70",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),t.jsx("div",{className:"text-xs text-gray-400 mt-1 ml-10",children:"Please be respectful: Keep your messages kind and considerate. Treat others as you would like to be treated. Report any abusive messages here."}),b&&t.jsx("div",{className:"text-xs text-blue-500 mt-1 ml-10",children:"Uploading image..."})]})]})},ht=({comment:e,conversationId:n,customerImage:a,partnerImage:s})=>{var j,_;const h=(((_=(j=e==null?void 0:e.meta_data)==null?void 0:j.sent_from)==null?void 0:_[0])||"")!=="partner",f=w=>new Date(e.date).toLocaleString("en-GB",{hour:"2-digit",minute:"2-digit",day:"numeric",month:"short",year:"numeric"}),g=w=>({__html:w}),S=e.status==="pending",b=e.status==="failed",N=h?"customer-message":"partner-message";return t.jsxs("div",{className:`flex mb-4 ${h?"justify-end":"justify-start"}`,children:[!h&&t.jsx(Ie,{name:e.author||"Partner",size:"sm",image:s}),t.jsx("div",{className:`flex flex-col ${h?"items-end":"items-start"} max-w-xs`,children:t.jsxs("div",{className:`p-3 rounded-lg break-words shadow-sm ${N}`,children:[t.jsxs("div",{className:"text-xs mb-1",children:[f(e.date),S&&t.jsx("span",{className:"ml-1",children:"(Sending...)"}),b&&t.jsx("span",{className:"ml-1",children:"(Failed)"})]}),t.jsx("div",{dangerouslySetInnerHTML:g(e.content),className:"text-sm"}),e.image_url&&t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:e.image_url,alt:"Attached",className:"max-w-full rounded"})})]})}),h&&t.jsx(Ie,{name:"You",size:"sm",image:a})]})},Pn=({dataKey:e,currentUserPartnerPostId:n})=>{const[a,s]=c.useState([]),[d,h]=c.useState([]),[f,g]=c.useState(null),[S,b]=c.useState(null),[N,j]=c.useState(n),[_,w]=c.useState({conversations:!1,comments:!1,sending:!1}),[k,C]=c.useState(null),[p,$]=c.useState(!0),T=c.useRef(null),D=c.useRef(null),[Y,F]=c.useState(!1),P=typeof window<"u"?new URLSearchParams(window.location.search):null,B=P==null?void 0:P.get("customer_id"),I=P==null?void 0:P.get("conversation_id");c.useEffect(()=>{x()},[]),c.useEffect(()=>(f?(L(f.client_id,!0),A()):E(),()=>E()),[f]),c.useEffect(()=>{const r=document.getElementById("chat-messages-container-mobile");r&&(r.scrollTop=r.scrollHeight)},[d]);const A=()=>{E(),T.current=setInterval(()=>{f&&L(f.client_id,!1)},5e3)},E=()=>{T.current&&(clearInterval(T.current),T.current=null)},x=()=>{w(r=>({...r,conversations:!0})),C(null),ne("frohub/user_conversations",r=>{var u;if(r.success){const y=(((u=r.data)==null?void 0:u.data)||[]).map(v=>({...v,client_id:v.conversation_id,comments:Array.isArray(v.comments)?v.comments:[]}));if(s(y),y.length>0){let v=null;I?(v=y.find(M=>String(M.conversation_id)===String(I)),v&&(g(v),b(v.conversation_id),$(!1))):B&&(v=y.find(M=>String(M.customer_id)===String(B)),v&&(g(v),b(v.conversation_id),$(!1)))}}else C("Failed to load conversations: "+(r.message||"Unknown error")),s([]);w(m=>({...m,conversations:!1}))})},L=(r,u=!0)=>{u&&w(m=>({...m,comments:!0})),C(null),ne("frohub/get_conversation_comments",m=>{var y;if(m.success){const v=m.data||{},M=v.comments||[],H=v.user_partner_id;if(Array.isArray(M))if(u||d.length===0){if(h(M),M.length>0){const R=M[M.length-1];D.current=new Date(R.date).getTime()}}else{const R=D.current,O=M.filter(z=>{const q=new Date(z.date).getTime();return!R||q>R});if(O.length>0){const z=O[O.length-1];D.current=new Date(z.date).getTime(),h(q=>{const W=q.filter(U=>!U.comment_id.toString().startsWith("temp_")||U.status==="failed"),X=new Set(W.map(U=>U.comment_id)),V=O.filter(U=>!X.has(U.comment_id));return[...W,...V]}),O.find(q=>{var W,X;return((X=(W=q==null?void 0:q.meta_data)==null?void 0:W.sent_from)==null?void 0:X[0])!=="partner"})}}H&&j(H),s(R=>R.map(O=>O.client_id===r?{...O,read_by_partner:!0}:O))}else u&&(C("Failed to load comments: "+(((y=m.data)==null?void 0:y.message)||"Unknown error")),h([]));u&&w(v=>({...v,comments:!1}))},{post_id:r})},o=(r,u)=>{g(r),b(u),h([]),F(!1),D.current=null,$(!1)},i=()=>{$(!0),g(null),b(null),h([])},l=async(r,u="")=>{if(!f||!r.trim()&&!u)return;const m={comment_id:`temp_${Date.now()}`,content:r,author:"You",partner_id:n,date:new Date().toISOString(),image_url:u,status:"pending"};h(v=>[...v,m]),w(v=>({...v,sending:!0})),C(null);const y=S||f.client_id;ne("frohub/send_customer_message",v=>{v.success?(h(M=>M.filter(H=>H.comment_id!==m.comment_id)),L(f.client_id,!1),s(M=>M.map(H=>H.client_id===f.client_id?{...H,last_message:r,last_activity:new Date().toISOString(),read_by_partner:!0}:H))):(h(M=>M.map(H=>H.comment_id===m.comment_id?{...H,status:"failed"}:H)),C("Failed to send message: "+(v.message||"Unknown error"))),w(M=>({...M,sending:!1}))},{post_id:y,conversation_id:S,partner_id:n,comment:r,image_url:u})};return t.jsxs("div",{className:"flex flex-col h-screen bg-white",children:[p&&t.jsx("div",{className:"conversation-details flex flex-col h-full",children:t.jsx("div",{className:"message-conversations flex-1 overflow-y-auto",children:_.conversations?t.jsx("div",{className:"flex flex-col space-y-4 p-4",children:[...Array(4)].map((r,u)=>t.jsxs("div",{className:"flex items-center space-x-3 p-3",children:[t.jsx(K.Avatar,{size:"large",active:!0}),t.jsxs("div",{className:"flex-1",children:[t.jsx(K.Input,{size:"small",active:!0,style:{width:"60%"}}),t.jsx("div",{className:"mt-2",children:t.jsx(K.Input,{size:"small",active:!0,style:{width:"80%"}})})]})]},u))}):t.jsxs(t.Fragment,{children:[a.map(r=>t.jsx(ft,{conversation:r,isActive:!1,onClick:o},r.client_id)),!_.conversations&&a.length===0&&t.jsx("div",{className:"p-4 text-center text-gray-500",children:"No conversations found"})]})})}),!p&&f&&t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"flex items-center p-4 border-b border-gray-200 bg-white",children:[t.jsx("button",{onClick:i,className:"p-1 text-gray-600 hover:text-gray-800",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsx("span",{className:"ml-3 text-gray-900 font-medium",children:"Back to Messages"})]}),t.jsx("div",{id:"chat-messages-container-mobile",className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:_.comments?t.jsx("div",{className:"flex justify-center items-center h-full text-gray-500",children:"Loading messages..."}):t.jsxs(t.Fragment,{children:[d.map(r=>t.jsx(ht,{comment:r},r.comment_id)),d.length===0&&t.jsx("div",{className:"text-center text-gray-500 mt-8",children:"No messages yet. Start a conversation!"})]})}),t.jsx("div",{className:"border-t border-gray-200 bg-white",children:t.jsx(mt,{onSendMessage:l,isLoading:_.sending,disabled:_.comments})})]}),k&&t.jsx("div",{className:"fixed top-4 left-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded z-50",children:t.jsxs("div",{className:"flex items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("strong",{className:"font-medium",children:"Error:"}),t.jsx("div",{className:"mt-1 text-sm",children:k})]}),t.jsx("button",{onClick:()=>C(null),className:"ml-2 text-red-700 hover:text-red-900",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})},Tn=({dataKey:e,currentUserPartnerPostId:n})=>{const[a,s]=c.useState([]),[d,h]=c.useState([]),[f,g]=c.useState(null),[S,b]=c.useState(null),[N,j]=c.useState(null),[_,w]=c.useState({conversations:!1,comments:!1,sending:!1}),[k,C]=c.useState(null),p=c.useRef(null),$=c.useRef(null),[T,D]=c.useState(!1),Y=typeof window<"u"?new URLSearchParams(window.location.search):null,F=Y==null?void 0:Y.get("customer_id"),P=Y==null?void 0:Y.get("conversation_id");c.useEffect(()=>{A()},[]),c.useEffect(()=>(f?(E(f.client_id,!0),B()):I(),()=>I()),[f]),c.useEffect(()=>{const o=document.getElementById("chat-messages-container");o&&(o.scrollTop=o.scrollHeight)},[d]);const B=()=>{I(),p.current=setInterval(()=>{f&&E(f.client_id,!1)},5e3)},I=()=>{p.current&&(clearInterval(p.current),p.current=null)},A=()=>{w(o=>({...o,conversations:!0})),C(null),ne("frohub/user_conversations",o=>{var i;if(o.success){const r=(((i=o.data)==null?void 0:i.data)||[]).map(u=>({...u,client_id:u.conversation_id,comments:Array.isArray(u.comments)?u.comments:[]}));if(s(r),r.length>0){let u=null;P?u=r.find(m=>String(m.conversation_id)===String(P)):F&&(u=r.find(m=>String(m.customer_id)===String(F))),!u&&!f&&(u=r[0]),u&&(g(u),b(u.conversation_id))}}else C("Failed to load conversations: "+(o.message||"Unknown error")),s([]);w(l=>({...l,conversations:!1}))})},E=(o,i=!0)=>{i&&w(l=>({...l,comments:!0})),C(null),ne("frohub/get_conversation_comments",l=>{var r;if(l.success){const u=l.data||{},m=u.comments||[],y=u.user_partner_id.ID;if(j(y),Array.isArray(m))if(i||d.length===0){if(h(m),m.length>0){const v=m[m.length-1];$.current=new Date(v.date).getTime()}}else{const v=$.current,M=m.filter(H=>{const R=new Date(H.date).getTime();return!v||R>v});if(M.length>0){const H=M[M.length-1];$.current=new Date(H.date).getTime(),h(R=>{const O=R.filter(W=>!W.comment_id.toString().startsWith("temp_")||W.status==="failed"),z=new Set(O.map(W=>W.comment_id)),q=M.filter(W=>!z.has(W.comment_id));return[...O,...q]}),M.find(R=>{var O,z;return((z=(O=R==null?void 0:R.meta_data)==null?void 0:O.sent_from)==null?void 0:z[0])!=="partner"})}}y&&j(y),s(v=>v.map(M=>M.client_id===o?{...M,read_by_partner:!0}:M))}else i&&(C("Failed to load comments: "+(((r=l.data)==null?void 0:r.message)||"Unknown error")),h([]));i&&w(u=>({...u,comments:!1}))},{post_id:o})},x=(o,i)=>{g(o),b(i),h([]),D(!1),$.current=null},L=async(o,i="")=>{if(!f||!o.trim()&&!i)return;const l={comment_id:`temp_${Date.now()}`,content:o,author:"You",partner_id:n,date:new Date().toISOString(),image_url:i,status:"pending"};h(u=>[...u,l]),w(u=>({...u,sending:!0})),C(null);const r=S||f.client_id;ne("frohub/send_customer_message",u=>{u.success?(h(m=>m.filter(y=>y.comment_id!==l.comment_id)),E(f.client_id,!1),s(m=>m.map(y=>y.client_id===f.client_id?{...y,last_message:o,last_activity:new Date().toISOString(),read_by_partner:!0}:y))):(h(m=>m.map(y=>y.comment_id===l.comment_id?{...y,status:"failed"}:y)),C("Failed to send message: "+(u.message||"Unknown error"))),w(m=>({...m,sending:!1}))},{post_id:r,conversation_id:S,partner_id:N,comment:o,image_url:i})};return t.jsxs("div",{className:"flex h-screen bg-white",children:[t.jsx("div",{className:"message-conversations w-80",children:t.jsxs("div",{className:"overflow-y-auto",children:[_.conversations?t.jsxs("div",{className:"text-sm text-gray-500 mt-1 flex flex-col space-y-4",children:[t.jsxs("div",{className:"contact-list-avatar p-4 flex space-x-2 justify-around",children:[t.jsx(K.Avatar,{size:"large",active:!0}),t.jsx(K.Input,{size:"large",active:!0})]}),t.jsxs("div",{className:"contact-list-avatar p-4 flex space-x-2 justify-around",children:[t.jsx(K.Avatar,{size:"large",active:!0}),t.jsx(K.Input,{size:"large",active:!0})]}),t.jsxs("div",{className:"contact-list-avatar p-4 flex space-x-2 justify-around",children:[t.jsx(K.Avatar,{size:"large",active:!0}),t.jsx(K.Input,{size:"large",active:!0})]}),t.jsxs("div",{className:"contact-list-avatar p-4 flex space-x-2 justify-around",children:[t.jsx(K.Avatar,{size:"large",active:!0}),t.jsx(K.Input,{size:"large",active:!0})]})]}):a.map(o=>t.jsx(ft,{conversation:o,unreadConversation:o.unread_count_partner,partnerImage:o.partner_image,isActive:(f==null?void 0:f.client_id)===o.client_id,onClick:x},o.client_id)),!_.conversations&&a.length===0&&t.jsx("div",{className:"p-4 text-center text-gray-500",children:"No conversations found"})]})}),t.jsx("div",{className:"conversation-details flex-1 flex flex-col",children:f?t.jsxs(t.Fragment,{children:[t.jsx("div",{id:"chat-messages-container",className:"flex-1 overflow-y-auto p-4",children:_.comments?t.jsx("div",{className:"flex justify-center items-center h-full text-gray-500",children:"Loading messages..."}):t.jsxs(t.Fragment,{children:[d.map((o,i)=>{var l,r;return t.jsx(ht,{comment:o,conversationId:f==null?void 0:f.conversation_id,isLastCustomerMessage:((r=(l=o==null?void 0:o.meta_data)==null?void 0:l.sent_from)==null?void 0:r[0])!=="partner"&&i===d.length-1,customerImage:f==null?void 0:f.customer_image,partnerImage:f==null?void 0:f.partner_image},o.comment_id)}),d.length===0&&t.jsx("div",{className:"text-center text-gray-500 mt-8",children:"No messages yet. Start a conversation!"})]})}),t.jsx(mt,{onSendMessage:L,isLoading:_.sending,disabled:_.comments})]}):t.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h3",{className:"text-lg font-medium mb-2",children:"Select a conversation"}),t.jsx("p",{children:"Choose a conversation from the sidebar to start messaging"})]})})}),k&&t.jsx("div",{className:"fixed top-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded z-50 max-w-md",children:t.jsxs("div",{className:"flex items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("strong",{className:"font-medium",children:"Error:"}),t.jsx("div",{className:"mt-1 text-sm",children:k})]}),t.jsx("button",{onClick:()=>C(null),className:"ml-2 text-red-700 hover:text-red-900",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gt=(...e)=>e.filter((n,a,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===a).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=c.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:d="",children:h,iconNode:f,...g},S)=>c.createElement("svg",{ref:S,...Fn,width:n,height:n,stroke:e,strokeWidth:s?Number(a)*24/Number(n):a,className:gt("lucide",d),...g},[...f.map(([b,N])=>c.createElement(b,N)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=(e,n)=>{const a=c.forwardRef(({className:s,...d},h)=>c.createElement(Ln,{ref:h,iconNode:n,className:gt(`lucide-${Yn(e)}`,s),...d}));return a.displayName=`${e}`,a};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],We=Ye("CircleCheckBig",Rn);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ge=Ye("CircleX",On);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Hn=Ye("RefreshCw",Bn),Ke=e=>{let n;const a=new Set,s=(b,N)=>{const j=typeof b=="function"?b(n):b;if(!Object.is(j,n)){const _=n;n=N??(typeof j!="object"||j===null)?j:Object.assign({},n,j),a.forEach(w=>w(n,_))}},d=()=>n,g={setState:s,getState:d,getInitialState:()=>S,subscribe:b=>(a.add(b),()=>a.delete(b))},S=n=e(s,d,g);return g},zn=e=>e?Ke(e):Ke,qn=e=>e;function Un(e,n=qn){const a=G.useSyncExternalStore(e.subscribe,()=>n(e.getState()),()=>n(e.getInitialState()));return G.useDebugValue(a),a}const Wn=e=>{const n=zn(e),a=s=>Un(n,s);return Object.assign(a,n),a},Gn=e=>Wn(e),Z=Gn(e=>{const n=new Date().toISOString().split("T")[0];return{availabilityData:[],loading:!1,selectedDate:n,productId:null,selectedAddOnId:null,selectedAddOns:[],productPrice:0,selectedServiceType:"",addonsChanged:!1,mobileTravelFee:0,readyForMobile:!1,addonTotalTime:0,errorMessage:"Postcode cannot be empty",totalService:0,setAvailabilityData:a=>e({availabilityData:a,loading:!1}),setLoading:a=>e({loading:a}),setSelectedDate:a=>e({selectedDate:a}),setProductId:a=>e({productId:a}),setSelectedAddOnId:a=>e({selectedAddOnId:a}),setSelectedAddOns:a=>e({selectedAddOns:a}),setProductPrice:a=>e({productPrice:a}),setSelectedServiceType:a=>e({selectedServiceType:a}),setMobileTravelFee:a=>e({mobileTravelFee:a}),setReadyForMobile:a=>e({readyForMobile:a}),setAddonsChanged:()=>e({addonsChanged:!0}),resetAddonsChanged:()=>e({addonsChanged:!1}),setErrorMessage:a=>e({errorMessage:a}),setTotalService:a=>e({totalService:a})}}),Kn=frohub_settings.ajax_url,Vn=(e,n)=>new Promise((a,s)=>{jQuery.post(Kn,{_ajax_nonce:frohub_settings.nonce,action:e,...n},function(d){d.success?a(d):s(d)})}),Ve=(e,n,a)=>{ut[e]({message:n,description:a,placement:"topRight",showProgress:!0})};function Jn(){const{selectedAddOns:e,productPrice:n,productId:a,selectedServiceType:s,addonTotalTime:d,mobileTravelFee:h,readyForMobile:f,initialServiceDuration:g,errorMessage:S}=Z(),[b,N]=c.useState(n),[j,_]=c.useState(!1),[w,k]=c.useState(!1),[C,p]=c.useState("0h 0m"),[$,T]=c.useState(0),[D,Y]=c.useState(!1),F=b*.3;c.useEffect(()=>{(()=>{a&&(Y(!0),ne("frohub/get_duration",I=>{if(I.success){const A=I.data.duration_hours||0,E=I.data.duration_minutes||0,x=A*60+E;T(x);const L=x+(d||0),o=Math.floor(L/60),i=L%60;p(`${o}h ${i}m`),Y(!1)}else console.error("Error fetching service duration:",I.message),Y(!1)},{product_id:a}))})()},[a,d]),c.useEffect(()=>{const B=()=>{const E=document.getElementById("extra-charge-container");if(E){const x=parseFloat(E.getAttribute("data-extra-charge"))||0,L=s==="mobile";N(n+x+(L&&h||0))}};B();const I=new MutationObserver(E=>{E.forEach(x=>{x.type==="attributes"&&x.attributeName==="data-extra-charge"&&B()})}),A=document.getElementById("extra-charge-container");return A&&I.observe(A,{attributes:!0,attributeFilter:["data-extra-charge"]}),()=>I.disconnect()},[n,h,s]),c.useEffect(()=>{const B=()=>{const E=document.querySelector('input[name="total_duration_time"]');if(E){const x=parseInt(E.value,10)||0;T(x)}else if(g){const x=g+(d||0),L=Math.floor(x/60),o=x%60;p(`${L}h ${o}m`)}};B();const I=new MutationObserver(B),A=document.querySelector('input[name="total_duration_time"]');return A&&I.observe(A,{attributes:!0,attributeFilter:["value"]}),()=>I.disconnect()},[d,g]);const P=async()=>{var i,l,r,u;const B=((i=document.querySelector('input[name="selectedDate"]'))==null?void 0:i.value)||"",I=((l=document.querySelector('input[name="selectedTime"]'))==null?void 0:l.value)||"",A=document.querySelector(".timeslot-button.selected"),E=((r=document.querySelector('input[name="selectedPrice"]'))==null?void 0:r.value)||"",x=((u=document.querySelector('input[name="travelFee"]'))==null?void 0:u.value)||"";if(!B||!A){Ve("error","Missing Information","Please select a service type and date & time before proceeding.");return}if(s==="mobile"&&f===!1){Ve("error","Validation Error",S);return}_(!0);const L=b-F,o=F*.03;document.cookie=`frohub_service_fee=${o}; path=/; max-age=86400`;try{const m=await Vn("frohub_add_to_cart",{productId:a,selectedAddOns:e,depositDue:L,depositDueToday:F,serviceFee:o,productPrice:F,totalPrice:b,selectedServiceType:s,selectedDate:B,selectedTime:I,extraCharge:JSON.stringify({bookingExtra:E,mobileFee:x})});k(!0),window.location.href="/checkout"}catch(m){console.error("AJAX call failed:",m)}finally{_(!1)}};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-[#f2f4f7] border-t border-[#E8E8E8] shadow-md py-4 px-6 z-50",children:t.jsxs("div",{className:"sm:w-full md:w-4/6 mx-auto flex flex-col items-center",children:[t.jsxs("div",{className:"w-full bottom-bar",children:[t.jsx("div",{className:"bottom-bar-notice flex items-center gap-2 text-gray-700 text-sm",children:t.jsxs("span",{className:"flex items-center",children:[t.jsx("i",{className:"fas fa-shield-alt text-base"}),t.jsxs("span",{children:["All deposits paid through FroHub are protected. ",t.jsx("a",{href:"/help-centre/",className:"text-black font-medium",children:"Learn More"})]})]})}),t.jsxs("div",{className:"bottom-bar-text",children:[t.jsxs("p",{className:"text-gray-900 font-semibold !mb-3",children:["Total price: ",t.jsxs("span",{className:"text-black",children:["£",b.toFixed(2)]})]}),t.jsxs("p",{className:"text-gray-600 text-sm !mb-3",children:["Deposit due today: ",t.jsxs("span",{className:"font-medium text-black",children:["£",F.toFixed(2)]})]}),t.jsxs("p",{className:"text-gray-600 text-sm !mb-3",children:["Service duration: ",t.jsx("span",{className:"font-medium",children:D?t.jsx(K.Button,{active:!0,size:"small",style:{width:"60px",height:"20px"}}):C})]}),t.jsx("input",{name:"service-duration",type:"hidden",value:C})]}),t.jsx("button",{onClick:P,disabled:j||w,className:`bg-[#E05748] !text-white font-medium px-6 py-2 rounded-full transition flex items-center justify-center ${j||w?"cursor-not-allowed opacity-75":"hover:bg-gray-400"}`,style:{minWidth:"150px",height:"40px"},children:j?t.jsx(Fe,{size:"small",className:"mr-2"}):w?t.jsx(Fe,{size:"small",className:"mr-2"}):"Request to Book"})]}),t.jsx("div",{className:"bottom-bar-notice-mobile",children:t.jsxs("span",{className:"flex items-center",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-black mr-1",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M12 2a10 10 0 1 1-10 10A10 10 0 0 1 12 2zm0 18a8 8 0 1 0-8-8 8 8 0 0 0 8 8zm-1-13a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0zm1 6a1.25 1.25 0 1 1-1.25 1.25A1.25 1.25 0 0 1 12 13z",clipRule:"evenodd"})}),t.jsxs("span",{children:["All deposits paid through FroHub are protected. ",t.jsx("a",{href:"#",className:"text-black font-medium",children:"Learn More"})]})]})})]})})})}var we={exports:{}},Zn=we.exports,Je;function Xn(){return Je||(Je=1,function(e,n){(function(a,s){e.exports=s()})(Zn,function(){return function(a,s,d){s.prototype.isBetween=function(h,f,g,S){var b=d(h),N=d(f),j=(S=S||"()")[0]==="(",_=S[1]===")";return(j?this.isAfter(b,g):!this.isBefore(b,g))&&(_?this.isBefore(N,g):!this.isAfter(N,g))||(j?this.isBefore(b,g):!this.isAfter(b,g))&&(_?this.isAfter(N,g):!this.isBefore(N,g))}}})}(we)),we.exports}var Qn=Xn();const pt=Ae(Qn);J.extend(pt);const ea=({onDateChange:e,bookingNotice:n,initialServiceDuration:a,maxDate:s,unavailableDates:d,unavailableTimes:h,nextAvailableDate:f,allBookings:g})=>{const{availabilityData:S,loading:b}=Z(),[N,j]=c.useState(()=>J(f)),[_,w]=c.useState(null),[k,C]=c.useState(0),[p,$]=c.useState(0),[T,D]=c.useState(J());c.useEffect(()=>{f&&j(J(f))},[f]),c.useEffect(()=>{const o=parseInt(a,10)||0,i=Math.floor(o/60),l=o%60;$(`${i}h ${l}m`)},[a]);const Y=o=>{const i=o.format("YYYY-MM-DD"),l=S.filter(v=>v.date===i);if(l.length===0)return!1;const r=g[i]||[],u=l.filter(v=>{const M=`${v.from} - ${v.to}`;if(r.includes(M))return!1;const R=J(`${i} ${v.from}`,"YYYY-MM-DD HH:mm"),O=J(`${i} ${v.to}`,"YYYY-MM-DD HH:mm");return!h.some(({start:q,end:W})=>!q||!W?!1:R.isBetween(q,W,null,"[]")||O.isBetween(q,W,null,"[]")||R.isBefore(q)&&O.isAfter(W))});if(console.log(`📅 Date: ${i} - Possible Slots: ${l.length}, Free Slots: ${u.length}`),u.length===0)return!1;const y=J().add(n,"day");return!(!o.isAfter(y,"day")||s&&!o.isBefore(J(s).add(1,"day")))},F=()=>{const o=T.startOf("month"),i=T.daysInMonth();let l=o.day();l=l===0?6:l-1;const r=[];for(let u=0;u<l;u++)r.push({date:o.subtract(l-u,"day"),isCurrentMonth:!1});for(let u=1;u<=i;u++)r.push({date:o.add(u-1,"day"),isCurrentMonth:!0});return r},P=o=>{if(!Y(o))return;const i=J(o);j(i),w(null),C(0),document.getElementById("extra-charge-container").setAttribute("data-extra-charge","0"),e&&e(i.format("YYYY-MM-DD"))},B=(o,i,l)=>{w(o),C(i),document.getElementById("extra-charge-container").setAttribute("data-extra-charge",i)},I=o=>{D(T.add(o,"month"))},A=Array.isArray(S)?S.filter(o=>{const i=N.format("YYYY-MM-DD");if(o.date!==i)return!1;const l=`${o.from} - ${o.to}`;if((g[i]||[]).includes(l))return!1;const u=J(`${i} ${o.from}`,"YYYY-MM-DD HH:mm"),m=J(`${i} ${o.to}`,"YYYY-MM-DD HH:mm");return!h.some(({start:v,end:M})=>!v||!M?!1:u.isBetween(v,M,null,"[]")||m.isBetween(v,M,null,"[]")||u.isBefore(v)&&m.isAfter(M))}).map(o=>({time:`${o.from} - ${o.to}`,price:Number(o.extra_charge)||0,duration:o.total_duration_minutes||0})):[];console.log(`🟢 Selected Date: ${N.format("YYYY-MM-DD")} - Available Time Slots:`,A);const E=o=>J().format("YYYY-MM-DD")===o.format("YYYY-MM-DD"),x=o=>N.format("YYYY-MM-DD")===o.format("YYYY-MM-DD"),L=o=>o.isBefore(J(),"day");return t.jsxs("div",{className:"calendar-container",children:[t.jsxs("div",{className:"calendar-section custom-calendar",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("button",{onClick:()=>I(-1),className:"p-2 hover:bg-gray-200 rounded-full",children:"<"}),t.jsx("div",{className:"text-base font-medium",children:T.format("MMMM YYYY")}),t.jsx("button",{onClick:()=>I(1),className:"p-2 hover:bg-gray-200 rounded-full",children:">"})]}),t.jsx("div",{className:"grid grid-cols-7 mb-2",children:["MON","TUE","WED","THU","FRI","SAT","SUN"].map(o=>t.jsx("div",{className:"text-xs text-gray-500 text-center py-2",children:o},o))}),t.jsx("div",{className:"grid grid-cols-7 gap-1",children:F().map((o,i)=>{const l=Y(o.date),r=!l||L(o.date);return t.jsx("button",{onClick:()=>l&&P(o.date),disabled:r,className:`
                                    w-10 h-10 flex items-center justify-center rounded-full
                                    text-sm font-medium
                                    ${o.isCurrentMonth?"":"text-gray-400"}
                                    ${r?"text-gray-300 cursor-not-allowed":"hover:bg-orange-300"}
                                    ${l?"bg-orange-500 !text-white":""}
                                    ${x(o.date)?"bg-black text-white hover:bg-black":""}
                                    ${E(o.date)&&!x(o.date)?"border border-black":""}
                                `,children:o.date.date()},i)})})]}),t.jsxs("div",{className:"timeslots-section",children:[b?t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"selected-date",children:J(N).isValid()?N.format("ddd, MMM D YYYY"):"Getting Available Date..."}),t.jsx("div",{className:"timeslots-grid",children:[...Array(4)].map((o,i)=>t.jsx(K.Button,{active:!0,size:"large",block:!0},i))})]}):A.length===0?t.jsx("h3",{className:"selected-date",children:"Sorry, no available time for this service"}):t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"selected-date",children:N.format("ddd, MMM D YYYY")}),t.jsx("div",{className:"timeslots-grid scrollable-timeslots",children:A.map((o,i)=>t.jsxs("button",{className:`timeslot-button ${_===o.time?"selected":""}`,onClick:()=>B(o.time,o.price,o.duration),children:[t.jsx("span",{children:o.time}),o.price>0&&t.jsxs("span",{className:"extra-charge",children:["+£",o.price.toFixed(2)]})]},i))})]}),t.jsx("p",{className:"timezone-info",children:"All times are in London (GMT +01:00)"})]}),t.jsx("div",{id:"extra-charge-container","data-extra-charge":"0",style:{display:"none"}}),t.jsx("input",{type:"hidden",value:N.format("YYYY-MM-DD"),name:"selectedDate"}),t.jsx("input",{type:"hidden",value:_||"",name:"selectedTime"}),t.jsx("input",{type:"hidden",name:"selectedPrice",value:k}),t.jsx("input",{type:"hidden",value:p,name:"total_duration_time"})]})};J.extend(_n);J.extend(pt);const ta=()=>{const e=c.useRef(null),[n,a]=c.useState(null),[s,d]=c.useState(null),[h,f]=c.useState([]),[g,S]=c.useState([]),[b,N]=c.useState(null),[j,_]=c.useState({}),[w,k]=c.useState([]);c.useRef([]);const{availabilityData:C,setAvailabilityData:p,selectedDate:$,setSelectedDate:T,loading:D,setLoading:Y,addonsChanged:F,setAddonsChanged:P,resetAddonsChanged:B}=Z();c.useEffect(()=>{const x=new Date().toISOString().split("T")[0];T(x)},[T]),c.useEffect(()=>{const x=document.querySelector(".frohub_add_to_cart");x&&(e.current=x.dataset.productId)},[]);const I=c.useCallback(()=>{let x=[];const L=document.getElementById("frohub-selected-addon-ids");if(L&&L.value)try{x=JSON.parse(L.value)}catch(o){console.error("Error parsing addon IDs",o),x=[]}return x},[]),A=c.useCallback(async()=>{const x=e.current;if(!x)return;Y(!0);const L=I();ne("frohub/get_availibility",o=>{if(o.success){N(o.data.next_available_date),p(o.data.availability),a(o.data.booking_notice),d(o.data.max_date),f(o.data.unavailable_dates||[]),_(o.data.all_bookings||{}),k(o.data.all_booked_days||[]);const i=r=>{if(!r)return null;let u=r.trim();u=u.replace(/\b12:00 am\b/i,"00:00").replace(/\b12:00 pm\b/i,"12:00").replace(/\b(\d):(\d{2}) (am|pm)\b/i,"0$1:$2 $3").replace(/\b(\d{1,2}):(\d{2}) ([ap]m)\b/i,(v,M,H,R)=>{let O=parseInt(M,10);return R.toLowerCase()==="pm"&&O!==12&&(O+=12),R.toLowerCase()==="am"&&O===12&&(O=0),`${O.toString().padStart(2,"0")}:${H}`});const m=["DD/MM/YYYY HH:mm","DD/MM/YYYY hh:mm A","DD/MM/YYYY h:mm A","YYYY-MM-DD HH:mm","YYYY-MM-DD","DD/MM/YYYY"];let y=null;for(let v of m)if(y=J(u,v,!0),y.isValid())return y;return null},l=(o.data.unavailable_dates||[]).map(({start_date:r,end_date:u})=>{const m=i(r),y=i(u);return!m||!y?null:{start:m,end:y}}).filter(Boolean);S(l)}else console.error("Error fetching availability:",o.message);Y(!1)},{product_id:x,date:$,addons_id:L}),B()},[$,p,Y,B,I]);c.useEffect(()=>{A()},[A,$,F]);const E=x=>{T(x)};return t.jsxs("div",{className:"relative",children:[t.jsx("p",{children:"Search availability and select a time slot"}),t.jsx(ea,{data:C,onDateChange:E,bookingNotice:n,maxDate:s,unavailableDates:h,unavailableTimes:g,nextAvailableDate:b,allBookings:j,allBookedDays:w})]})};var Se={},Ze;function na(){if(Ze)return Se;Ze=1;var e=Ot();return Se.createRoot=e.createRoot,Se.hydrateRoot=e.hydrateRoot,Se}var ve=na();const aa={"home-based":t.jsx("i",{className:"fas fa-home text-[32px]"}),"salon-based":t.jsx("i",{className:"fas fa-chair-office text-[32px]"}),mobile:t.jsx("i",{className:"fas fa-car-side text-[32px]"})},sa={"home-based":"You travel to your stylist’s home","salon-based":"You travel to your stylist’s salon",mobile:"Your stylist travels to you"},Xe=({service:e,selectedService:n,handleSelectService:a,loading:s})=>{if(s)return t.jsxs("div",{className:"flex items-center justify-between gap-[1rem] w-full p-1 border border-gray-200 rounded-lg",children:[t.jsx(K.Avatar,{size:48,shape:"circle",active:!0}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx(K.Input,{style:{width:80,marginTop:8},active:!0}),t.jsx(K.Input,{style:{width:80,marginTop:4},active:!0})]})]});if(!e)return null;const d=e.toLowerCase(),h=(n==null?void 0:n.toLowerCase())===d;return t.jsxs("div",{className:`flex items-center justify-center w-full p-1 border rounded-lg cursor-pointer transition-all duration-200 ${h?"bg-gray-200 border-gray-500":"border-gray-300"}`,onClick:()=>a(d),children:[t.jsx("input",{type:"radio",name:"serviceType",value:d,checked:h,onChange:()=>a(d),className:"hidden"}),t.jsxs("label",{className:"flex items-center gap-[1rem] cursor-pointer w-full h-full p-1 rounded-lg transition-all duration-200",children:[aa[d]||t.jsx("i",{className:"fas fa-home text-[32px]"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-semibold text-lg mt-2",children:e}),t.jsx("span",{className:"text-sm text-gray-600",children:sa[d]})]})]})]})};function ra(){const e=new URLSearchParams(window.location.search),n=e.get("radius"),a=e.get("location_name"),s=e.get("lat"),d=e.get("lng");if(n&&a&&s&&d){const h={radius:n,location_name:decodeURIComponent(a),lat:s,lng:d};document.cookie=`locationData=${encodeURIComponent(JSON.stringify(h))}; path=/`}}function oa(){const e=document.cookie.match(new RegExp("(^| )locationData=([^;]+)"));return e?JSON.parse(decodeURIComponent(e[2])):null}function ia({partnerId:e}){const[n,a]=c.useState(""),[s,d]=c.useState(!1),[h,f]=c.useState(null),[g,S]=c.useState(null),[b,N]=c.useState(!1),[j,_]=c.useState(!0),[w,k]=c.useState(""),[C,p]=c.useState(null),{setMobileTravelFee:$,setReadyForMobile:T,totalService:D}=Z(),Y=c.useRef(null),F=c.useRef(null),[P,B]=c.useState(null);c.useEffect(()=>{(()=>{const i=oa();i&&i.lat&&i.lng&&p({latitude:parseFloat(i.lat),longitude:parseFloat(i.lng),name:i.location_name})})(),e&&I()},[e]),c.useEffect(()=>{const o=()=>{if(window.google&&window.google.maps&&window.google.maps.places&&Y.current&&!F.current){const l={componentRestrictions:{country:"uk"},types:["geocode"]};F.current=new window.google.maps.places.Autocomplete(Y.current,l),F.current.addListener("place_changed",()=>{const r=F.current.getPlace();if(!r.geometry){console.error("No geometry for this place");return}a(r.formatted_address);const u={latitude:r.geometry.location.lat(),longitude:r.geometry.location.lng(),address:r.formatted_address};B(u)})}};o();const i=setInterval(()=>{F.current||o()},500);return()=>{clearInterval(i),F.current&&(window.google.maps.event.clearInstanceListeners(F.current),F.current=null)}},[]),c.useEffect(()=>{P&&g&&x(P)},[P,g]);const I=()=>{_(!0),k(""),ne("frohub/get_mobile_location_data",o=>{if(console.log("Partner location response:",o),o.success){let i,l=[];o.data&&o.data.data?i=o.data.data:o.data?i=o.data:i=o,i.radius_fees?l=i.radius_fees:i.radiusFees?l=i.radiusFees:o.radius_fees&&(l=o.radius_fees);const r=parseFloat(i.latitude||i.lat||0),u=parseFloat(i.longitude||i.lng||0);if(r&&u&&l&&l.length>0){const m={latitude:r,longitude:u,radiusFees:l.map(y=>({radius:parseFloat(y.radius||y.distance||0),price:parseFloat(y.price||y.fee||0)}))};console.log("Setting partner location:",m),S(m)}else console.error("Invalid location data structure:",i),k("Failed to parse partner location data.")}else k("Failed to fetch partner location."),console.error("Error fetching location:",o.message||"Unknown error");_(!1)},{partner_id:e})};c.useEffect(()=>{g&&C&&!j&&E()},[g,C,j]);const A=(o,i,l,r)=>{const m=(l-o)*Math.PI/180,y=(r-i)*Math.PI/180,v=Math.sin(m/2)*Math.sin(m/2)+Math.cos(o*Math.PI/180)*Math.cos(l*Math.PI/180)*Math.sin(y/2)*Math.sin(y/2);return 3958.8*(2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v)))},E=()=>{if(f(null),d(!1),k(""),N(!0),!g){k("Partner location not loaded."),N(!1);return}const o=A(g.latitude,g.longitude,C.latitude,C.longitude);console.log("Distance calculated:",o,"miles"),console.log("Partner radius fees:",g.radiusFees);let i=null;for(const l of g.radiusFees)if(o<=l.radius){i=l.price;break}i!==null?(d(!0),f(i),$(i),Z.setState({readyForMobile:!0})):(d(!1),D<1?k("Oops! They don't cover your area. Try another stylist nearby."):k("Oops! Mobile's not available in your area, but you can still book at their home or salon"),$(0),Z.setState({readyForMobile:!1})),N(!1)},x=o=>{if(console.log("Checking location:",o),console.log("Partner location available:",g),f(null),d(!1),k(""),N(!0),!g){console.error("Partner location not loaded when checking location"),k("Partner location not loaded. Please try again."),N(!1);return}const i=A(g.latitude,g.longitude,o.latitude,o.longitude);console.log("Distance calculated:",i,"miles"),console.log("Partner radius fees:",g.radiusFees);let l=null;for(const r of g.radiusFees)if(i<=r.radius){l=r.price;break}l!==null?(d(!0),f(l),$(l),Z.setState({readyForMobile:!0})):(d(!1),D<1?k("Oops! They don't cover your area. Try another stylist nearby."):k("Oops! Mobile's not available in your area, but you can still book at their home or salon"),$(0),Z.setState({readyForMobile:!1})),N(!1)},L=o=>{a(o.target.value)};return j?t.jsxs("div",{className:"mt-4 mb-6 p-4 border border-gray-300 rounded-lg bg-white",children:[t.jsx(K.Button,{block:!0,active:!0,className:"h-10"}),t.jsx(K.Input,{active:!0,className:"w-full h-6 mb-3"})]}):t.jsxs("div",{className:"mt-4 mb-6 p-4 border border-gray-300 rounded-lg bg-white",children:[C?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"font-medium mt-2 mb-3",children:C.name}),t.jsxs("div",{children:[b&&t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Checking availability..."}),s&&h!==null&&t.jsxs("div",{className:"flex items-center text-green-600 font-semibold mt-2",children:[t.jsx(We,{className:"w-5 h-5 mr-1"}),"You are inside the service area."]}),w&&t.jsxs("div",{className:"flex items-center text-red-500 font-semibold mt-2",children:[t.jsx(Ge,{className:"w-5 h-5 mr-1"}),w]})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-sm text-gray-700",children:"To check if you are within their mobile service area, enter your location or postcode."}),t.jsxs("div",{className:"flex justify-start items-center gap-6 mt-3",children:[t.jsx("div",{className:"w-full",children:t.jsx("input",{ref:Y,type:"text",placeholder:"Enter location or postcode",value:n,onChange:L,className:"w-full px-4 py-2 text-gray-600 border rounded-md bg-gray-100 border-gray-300 focus:ring focus:ring-indigo-300 focus:outline-none"})}),t.jsxs("div",{children:[b&&t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Checking location..."}),s&&h!==null&&t.jsxs("div",{className:"flex items-center text-green-600 font-semibold mt-2",children:[t.jsx(We,{className:"w-5 h-5 mr-1"}),"Yasss! You're in the service area - this stylist can come to you!"]}),w&&t.jsxs("div",{className:"flex items-center text-red-500 font-semibold mt-2",children:[t.jsx(Ge,{className:"w-5 h-5 mr-1"}),w]})]})]})]}),s&&h!==null&&t.jsxs(t.Fragment,{children:[t.jsxs("p",{className:"!mt-4 text-lg font-semibold",children:["Mobile Travel Fee: ",t.jsxs("span",{className:"text-gray-900",children:["+£",h.toFixed(2)]})]}),t.jsx("input",{type:"hidden",name:"travelFee",value:h.toFixed(2)})]}),C&&t.jsxs("button",{onClick:()=>{document.cookie="frohub_location=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",p(null),f(null),d(!1)},className:"flex items-center gap-1 text-sm text-red-600 hover:text-red-800 mt-2",children:[t.jsx(Hn,{className:"w-4 h-4"}),"Reset Location"]})]})}function ca({productId:e,partnerId:n,onServiceTypeChange:a}){const[s,d]=c.useState([]),[h,f]=c.useState(null),[g,S]=c.useState(!0),{setTotalService:b}=Z();c.useEffect(()=>{e&&(S(!0),ne("frohub/get_service_type",j=>{var _,w;if(j.success&&((_=j.data)!=null&&_.data)&&Array.isArray(j.data.data)){const k=((w=j.data.data[0])==null?void 0:w.toLowerCase())||null;d(j.data.data),b(j.data.data.length),f(k),a(k)}S(!1)},{product_id:e}))},[e]);const N=j=>{const _=j.toLowerCase();f(_),a(_)};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:["Service Type",t.jsx("form",{children:t.jsx("div",{className:"grid sm:grid-cols-1 md:grid-cols-3 gap-4 mt-3 mb-6",children:g?Array.from({length:3}).map((j,_)=>t.jsx(Xe,{loading:!0},_)):s.map(j=>t.jsx(Xe,{service:j,selectedService:h,handleSelectService:N,loading:!1},j.toLowerCase()))})})]}),h==="mobile"&&t.jsx(ia,{partnerId:n})]})}const la=({addOn:e,selectedAddOns:n,handleSelectAddOn:a,loading:s})=>s?t.jsx("div",{className:"px-4 py-2 border rounded-full",children:t.jsx(K.Input,{style:{width:150},active:!0})}):e?t.jsxs("label",{className:`inline-flex items-center cursor-pointer px-4 py-2 border rounded-full ${n.includes(e)?"fhcheck-selected border-gray-500":"border-gray-300"}`,children:[t.jsx("input",{type:"checkbox",className:"hidden",checked:n.includes(e),onChange:()=>a(e),"data-add-on-name":e.name,"data-add-on-id":e.id,"data-price":e.price,"data-duration":e.duration_minutes}),t.jsxs("span",{className:"text-gray-700 text-sm",children:[e.name," + £",e.price,e.duration_minutes>0&&` (${e.duration_minutes} mins)`]})]}):null;function da({productId:e,setProductId:n,selectedAddOns:a,setSelectedAddOns:s,setProductPrice:d}){const{selectedDate:h,setAvailabilityData:f}=Z(),[g,S]=c.useState([]),[b,N]=c.useState(null),[j,_]=c.useState(!0);c.useEffect(()=>{(()=>{const C=document.querySelector(".frohub_add_to_cart");C&&n(C.dataset.productId)})()},[n]),c.useEffect(()=>{e&&(()=>{_(!0),ne("frohub/get_addons",C=>{C.success?(S(C.data.add_ons||[]),d(parseFloat(C.data.product_price)||0)):(console.error("Error fetching add-ons:",C.message),N(C.message)),_(!1)},{product_id:e})})()},[e,d]),c.useEffect(()=>{const k=a.map(p=>p.id),C=document.getElementById("frohub-selected-addon-ids");C&&(C.value=JSON.stringify(k))},[a]);const w=k=>{Z.setState({loading:!0});const C=parseInt(k.duration_minutes,10)||0;s(p=>{let $;p.some(D=>D.id===k.id)?(d(D=>D-parseFloat(k.price)),Z.setState(D=>({addonTotalTime:(D.addonTotalTime||0)-C})),$=p.filter(D=>D.id!==k.id)):(d(D=>D+parseFloat(k.price)),Z.setState(D=>({addonTotalTime:(D.addonTotalTime||0)+C})),$=[...p,k]);const T=$.map(D=>D.id);return ne("frohub/get_availibility",D=>{if(D.success){const Y=Z.getState().availabilityData;JSON.stringify(Y)!==JSON.stringify(D.data.availability)&&(f(D.data.availability),Z.setState({loading:!1}))}else console.error("Error fetching availability:",D.message),Z.setState({loading:!1})},{product_id:e,date:h,addons_id:T}),$})};return t.jsxs("div",{children:[t.jsx("input",{type:"hidden",id:"frohub-selected-addon-ids",name:"frohub-selected-addon-ids",value:JSON.stringify(a.map(k=>k.id))}),j?t.jsx("div",{className:"flex gap-2 !mb-3",children:Array.from({length:3}).map((k,C)=>t.jsx(K.Button,{active:!0,style:{width:150,height:40,borderRadius:20}},C))}):e?t.jsx(t.Fragment,{children:b?t.jsxs("p",{children:["Error: ",b]}):t.jsx(t.Fragment,{children:Array.isArray(g)&&g.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mb-3",children:"Select add-ons"}),t.jsx("ul",{className:"flex justify-start items-start gap-2 !list-none !p-0 !m-0 !mb-3",children:g.map(k=>t.jsx("li",{children:t.jsx(la,{addOn:k,selectedAddOns:a,handleSelectAddOn:w})},k.id))})]})})}):t.jsx("p",{children:"Loading add-ons..."})]})}function ua(){const[e,n]=c.useState(null),[a,s]=c.useState(null),[d,h]=c.useState([]),[f,g]=c.useState(0),[S,b]=c.useState(""),{setProductId:N,setSelectedAddOns:j,setProductPrice:_,setSelectedServiceType:w}=Z();c.useEffect(()=>{const C=document.querySelector(".frohub_add_to_cart");if(C){const p=C.getAttribute("data-partner-id");p&&n(p)}},[]),c.useEffect(()=>{N(a)},[a,N]),c.useEffect(()=>{j(d)},[d,j]),c.useEffect(()=>{_(f)},[f,_]),c.useEffect(()=>{w(S)},[S,w]);const k=C=>{b(C)};return t.jsxs("div",{children:[t.jsx(da,{productId:a,setProductId:s,selectedAddOns:d,setSelectedAddOns:h,setProductPrice:g}),t.jsx(ca,{productId:a,partnerId:e,onServiceTypeChange:k})]})}ra();const De=document.querySelector(".frohub_add_to_cart");if(De){const e=De.getAttribute("data-key");ve.createRoot(De).render(t.jsx(ua,{dataKey:e}))}const fa=document.querySelectorAll(".frohub_calender");fa.forEach(e=>{const n=e.getAttribute("data-key");ve.createRoot(e).render(t.jsx(ta,{dataKey:n}))});const ma=document.querySelectorAll(".request_book_button");ma.forEach(e=>{const n=e.getAttribute("data-key");ve.createRoot(e).render(t.jsx(Jn,{dataKey:n}))});const ha=document.querySelectorAll(".customer_message");ha.forEach(e=>{const n=e.getAttribute("data-key");ve.createRoot(e).render(t.jsx(Tn,{dataKey:n}))});const ga=document.querySelectorAll(".customer_message_mobile");ga.forEach(e=>{const n=e.getAttribute("data-key");ve.createRoot(e).render(t.jsx(Pn,{dataKey:n}))});
