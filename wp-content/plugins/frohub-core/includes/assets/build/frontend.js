import{K as re,g as Ue,u as oe,a as ut,r as Ge,C as mt,m as We,b as ft,c,d as be,e as Ve,f as J,N as ht,R as gt,h as pt,i as xt,j as bt,k as vt,l as V,n as yt,o as St,p as $t,q as _e,s as jt,t as wt,v as Ct,w as Nt,x as _t,A as Mt,y as n,z as te,S as W,B as Dt}from"./assets/fetchData-UIxfMysn.js";const It=e=>{const{componentCls:t,notificationMarginEdge:a,animationMaxHeight:s}=e,i=`${t}-notice`,h=new re("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),m=new re("antNotificationTopFadeIn",{"0%":{top:-s,opacity:0},"100%":{top:0,opacity:1}}),g=new re("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(s).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),x=new re("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[t]:{[`&${t}-top, &${t}-bottom`]:{marginInline:0,[i]:{marginInline:"auto auto"}},[`&${t}-top`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:m}},[`&${t}-bottom`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:g}},[`&${t}-topRight, &${t}-bottomRight`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:h}},[`&${t}-topLeft, &${t}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:a,_skip_check_:!0},[i]:{marginInlineEnd:"auto",marginInlineStart:0},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:x}}}}},Et=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Tt={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},Pt=(e,t)=>{const{componentCls:a}=e;return{[`${a}-${t}`]:{[`&${a}-stack > ${a}-notice-wrapper`]:{[t.startsWith("top")?"top":"bottom"]:0,[Tt[t]]:{value:0,_skip_check_:!0}}}}},kt=e=>{const t={};for(let a=1;a<e.notificationStackLayer;a++)t[`&:nth-last-child(${a+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},t)},Yt=e=>{const t={};for(let a=1;a<e.notificationStackLayer;a++)t[`&:nth-last-child(${a+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},t)},At=e=>{const{componentCls:t}=e;return Object.assign({[`${t}-stack`]:{[`& > ${t}-notice-wrapper`]:Object.assign({transition:`transform ${e.motionDurationSlow}, backdrop-filter 0s`,willChange:"transform, opacity",position:"absolute"},kt(e))},[`${t}-stack:not(${t}-stack-expanded)`]:{[`& > ${t}-notice-wrapper`]:Object.assign({},Yt(e))},[`${t}-stack${t}-stack-expanded`]:{[`& > ${t}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Et.map(a=>Pt(e,a)).reduce((a,s)=>Object.assign(Object.assign({},a),s),{}))},Xe=e=>{const{iconCls:t,componentCls:a,boxShadow:s,fontSizeLG:i,notificationMarginBottom:h,borderRadiusLG:m,colorSuccess:g,colorInfo:x,colorWarning:v,colorError:S,colorTextHeading:j,notificationBg:D,notificationPadding:I,notificationMarginEdge:E,notificationProgressBg:_,notificationProgressHeight:p,fontSize:w,lineHeight:M,width:$,notificationIconSize:Y,colorText:k}=e,T=`${a}-notice`;return{position:"relative",marginBottom:h,marginInlineStart:"auto",background:D,borderRadius:m,boxShadow:s,[T]:{padding:I,width:$,maxWidth:`calc(100vw - ${oe(e.calc(E).mul(2).equal())})`,overflow:"hidden",lineHeight:M,wordWrap:"break-word"},[`${T}-message`]:{marginBottom:e.marginXS,color:j,fontSize:i,lineHeight:e.lineHeightLG},[`${T}-description`]:{fontSize:w,color:k},[`${T}-closable ${T}-message`]:{paddingInlineEnd:e.paddingLG},[`${T}-with-icon ${T}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(Y).equal(),fontSize:i},[`${T}-with-icon ${T}-description`]:{marginInlineStart:e.calc(e.marginSM).add(Y).equal(),fontSize:w},[`${T}-icon`]:{position:"absolute",fontSize:Y,lineHeight:1,[`&-success${t}`]:{color:g},[`&-info${t}`]:{color:x},[`&-warning${t}`]:{color:v},[`&-error${t}`]:{color:S}},[`${T}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},ut(e)),[`${T}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${oe(m)} * 2)`,left:{_skip_check_:!0,value:m},right:{_skip_check_:!0,value:m},bottom:0,blockSize:p,border:0,"&, &::-webkit-progress-bar":{borderRadius:m,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:_},"&::-webkit-progress-value":{borderRadius:m,background:_}},[`${T}-btn`]:{float:"right",marginTop:e.marginSM}}},Ft=e=>{const{componentCls:t,notificationMarginBottom:a,notificationMarginEdge:s,motionDurationMid:i,motionEaseInOut:h}=e,m=`${t}-notice`,g=new re("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:a},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[t]:Object.assign(Object.assign({},Ge(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:s,_skip_check_:!0},[`${t}-hook-holder`]:{position:"relative"},[`${t}-fade-appear-prepare`]:{opacity:"0 !important"},[`${t}-fade-enter, ${t}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:h,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${t}-fade-leave`]:{animationTimingFunction:h,animationFillMode:"both",animationDuration:i,animationPlayState:"paused"},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationPlayState:"running"},[`${t}-fade-leave${t}-fade-leave-active`]:{animationName:g,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${m}-btn`]:{float:"left"}}})},{[t]:{[`${m}-wrapper`]:Object.assign({},Xe(e))}}]},Ke=e=>({zIndexPopup:e.zIndexPopupBase+mt+50,width:384}),Je=e=>{const t=e.paddingMD,a=e.paddingLG;return We(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:t,notificationPaddingHorizontal:a,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${oe(e.paddingMD)} ${oe(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},Ze=Ue("Notification",e=>{const t=Je(e);return[Ft(t),It(t),At(t)]},Ke),Ot=ft(["Notification","PurePanel"],e=>{const t=`${e.componentCls}-notice`,a=Je(e);return{[`${t}-pure-panel`]:Object.assign(Object.assign({},Xe(a)),{width:a.width,maxWidth:`calc(100vw - ${oe(e.calc(a.notificationMarginEdge).mul(2).equal())})`,margin:0})}},Ke);var Lt=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(a[s[i]]=e[s[i]]);return a};function Me(e,t){return t===null||t===!1?null:t||c.createElement(gt,{className:`${e}-close-icon`})}const Rt={success:pt,info:xt,error:bt,warning:vt},Qe=e=>{const{prefixCls:t,icon:a,type:s,message:i,description:h,btn:m,role:g="alert"}=e;let x=null;return a?x=c.createElement("span",{className:`${t}-icon`},a):s&&(x=c.createElement(Rt[s]||null,{className:J(`${t}-icon`,`${t}-icon-${s}`)})),c.createElement("div",{className:J({[`${t}-with-icon`]:x}),role:g},x,c.createElement("div",{className:`${t}-message`},i),c.createElement("div",{className:`${t}-description`},h),m&&c.createElement("div",{className:`${t}-btn`},m))},Bt=e=>{const{prefixCls:t,className:a,icon:s,type:i,message:h,description:m,btn:g,closable:x=!0,closeIcon:v,className:S}=e,j=Lt(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon","className"]),{getPrefixCls:D}=c.useContext(be),I=t||D("notification"),E=`${I}-notice`,_=Ve(I),[p,w,M]=Ze(I,_);return p(c.createElement("div",{className:J(`${E}-pure-panel`,w,a,M,_)},c.createElement(Ot,{prefixCls:I}),c.createElement(ht,Object.assign({},j,{prefixCls:I,eventKey:"pure",duration:null,closable:x,className:J({notificationClassName:S}),closeIcon:Me(I,v),content:c.createElement(Qe,{prefixCls:E,icon:s,type:i,message:h,description:m,btn:g})}))))};function zt(e,t,a){let s;switch(e){case"top":s={left:"50%",transform:"translateX(-50%)",right:"auto",top:t,bottom:"auto"};break;case"topLeft":s={left:0,top:t,bottom:"auto"};break;case"topRight":s={right:0,top:t,bottom:"auto"};break;case"bottom":s={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:a};break;case"bottomLeft":s={left:0,top:"auto",bottom:a};break;default:s={right:0,top:"auto",bottom:a};break}return s}function Ht(e){return{motionName:`${e}-fade`}}function qt(e,t,a){return typeof e<"u"?e:typeof(t==null?void 0:t.closeIcon)<"u"?t.closeIcon:a==null?void 0:a.closeIcon}var Ut=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(a[s[i]]=e[s[i]]);return a};const Ee=24,Gt=4.5,Wt="topRight",Vt=e=>{let{children:t,prefixCls:a}=e;const s=Ve(a),[i,h,m]=Ze(a,s);return i(V.createElement($t,{classNames:{list:J(h,m,s)}},t))},Xt=(e,t)=>{let{prefixCls:a,key:s}=t;return V.createElement(Vt,{prefixCls:a,key:s},e)},Kt=V.forwardRef((e,t)=>{const{top:a,bottom:s,prefixCls:i,getContainer:h,maxCount:m,rtl:g,onAllRemoved:x,stack:v,duration:S,pauseOnHover:j=!0,showProgress:D}=e,{getPrefixCls:I,getPopupContainer:E,notification:_,direction:p}=c.useContext(be),[,w]=yt(),M=i||I("notification"),$=A=>zt(A,a??Ee,s??Ee),Y=()=>J({[`${M}-rtl`]:g??p==="rtl"}),k=()=>Ht(M),[T,L]=St({prefixCls:M,style:$,className:Y,motion:k,closable:!0,closeIcon:Me(M),duration:S??Gt,getContainer:()=>(h==null?void 0:h())||(E==null?void 0:E())||document.body,maxCount:m,pauseOnHover:j,showProgress:D,onAllRemoved:x,renderNotifications:Xt,stack:v===!1?!1:{threshold:typeof v=="object"?v==null?void 0:v.threshold:void 0,offset:8,gap:w.margin}});return V.useImperativeHandle(t,()=>Object.assign(Object.assign({},T),{prefixCls:M,notification:_})),L});function et(e){const t=V.useRef(null);return[V.useMemo(()=>{const s=g=>{var x;if(!t.current)return;const{open:v,prefixCls:S,notification:j}=t.current,D=`${S}-notice`,{message:I,description:E,icon:_,type:p,btn:w,className:M,style:$,role:Y="alert",closeIcon:k,closable:T}=g,L=Ut(g,["message","description","icon","type","btn","className","style","role","closeIcon","closable"]),A=Me(D,qt(k,e,j));return v(Object.assign(Object.assign({placement:(x=e==null?void 0:e.placement)!==null&&x!==void 0?x:Wt},L),{content:V.createElement(Qe,{prefixCls:D,icon:_,type:p,message:I,description:E,btn:w,role:Y}),className:J(p&&`${D}-${p}`,M,j==null?void 0:j.className),style:Object.assign(Object.assign({},j==null?void 0:j.style),$),closeIcon:A,closable:T??!!A}))},h={open:s,destroy:g=>{var x,v;g!==void 0?(x=t.current)===null||x===void 0||x.close(g):(v=t.current)===null||v===void 0||v.destroy()}};return["success","info","warning","error"].forEach(g=>{h[g]=x=>s(Object.assign(Object.assign({},x),{type:g}))}),h},[]),V.createElement(Kt,Object.assign({key:"notification-holder"},e,{ref:t}))]}function Jt(e){return et(e)}var me={exports:{}},Zt=me.exports,Te;function Qt(){return Te||(Te=1,function(e,t){(function(a,s){e.exports=s()})(Zt,function(){var a=1e3,s=6e4,i=36e5,h="millisecond",m="second",g="minute",x="hour",v="day",S="week",j="month",D="quarter",I="year",E="date",_="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,w=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(l){var d=["th","st","nd","rd"],r=l%100;return"["+l+(d[(r-20)%10]||d[r]||d[0])+"]"}},$=function(l,d,r){var u=String(l);return!u||u.length>=d?l:""+Array(d+1-u.length).join(r)+l},Y={s:$,z:function(l){var d=-l.utcOffset(),r=Math.abs(d),u=Math.floor(r/60),f=r%60;return(d<=0?"+":"-")+$(u,2,"0")+":"+$(f,2,"0")},m:function l(d,r){if(d.date()<r.date())return-l(r,d);var u=12*(r.year()-d.year())+(r.month()-d.month()),f=d.clone().add(u,j),y=r-f<0,b=d.clone().add(u+(y?-1:1),j);return+(-(u+(r-f)/(y?f-b:b-f))||0)},a:function(l){return l<0?Math.ceil(l)||0:Math.floor(l)},p:function(l){return{M:j,y:I,w:S,d:v,D:E,h:x,m:g,s:m,ms:h,Q:D}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(l){return l===void 0}},k="en",T={};T[k]=M;var L="$isDayjsObject",A=function(l){return l instanceof B||!(!l||!l[L])},z=function l(d,r,u){var f;if(!d)return k;if(typeof d=="string"){var y=d.toLowerCase();T[y]&&(f=y),r&&(T[y]=r,f=y);var b=d.split("-");if(!f&&b.length>1)return l(b[0])}else{var C=d.name;T[C]=d,f=C}return!u&&f&&(k=f),f||!u&&k},P=function(l,d){if(A(l))return l.clone();var r=typeof d=="object"?d:{};return r.date=l,r.args=arguments,new B(r)},N=Y;N.l=z,N.i=A,N.w=function(l,d){return P(l,{locale:d.$L,utc:d.$u,x:d.$x,$offset:d.$offset})};var B=function(){function l(r){this.$L=z(r.locale,null,!0),this.parse(r),this.$x=this.$x||r.x||{},this[L]=!0}var d=l.prototype;return d.parse=function(r){this.$d=function(u){var f=u.date,y=u.utc;if(f===null)return new Date(NaN);if(N.u(f))return new Date;if(f instanceof Date)return new Date(f);if(typeof f=="string"&&!/Z$/i.test(f)){var b=f.match(p);if(b){var C=b[2]-1||0,F=(b[7]||"0").substring(0,3);return y?new Date(Date.UTC(b[1],C,b[3]||1,b[4]||0,b[5]||0,b[6]||0,F)):new Date(b[1],C,b[3]||1,b[4]||0,b[5]||0,b[6]||0,F)}}return new Date(f)}(r),this.init()},d.init=function(){var r=this.$d;this.$y=r.getFullYear(),this.$M=r.getMonth(),this.$D=r.getDate(),this.$W=r.getDay(),this.$H=r.getHours(),this.$m=r.getMinutes(),this.$s=r.getSeconds(),this.$ms=r.getMilliseconds()},d.$utils=function(){return N},d.isValid=function(){return this.$d.toString()!==_},d.isSame=function(r,u){var f=P(r);return this.startOf(u)<=f&&f<=this.endOf(u)},d.isAfter=function(r,u){return P(r)<this.startOf(u)},d.isBefore=function(r,u){return this.endOf(u)<P(r)},d.$g=function(r,u,f){return N.u(r)?this[u]:this.set(f,r)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(r,u){var f=this,y=!!N.u(u)||u,b=N.p(r),C=function(Q,U){var ee=N.w(f.$u?Date.UTC(f.$y,U,Q):new Date(f.$y,U,Q),f);return y?ee:ee.endOf(v)},F=function(Q,U){return N.w(f.toDate()[Q].apply(f.toDate("s"),(y?[0,0,0,0]:[23,59,59,999]).slice(U)),f)},O=this.$W,R=this.$M,q=this.$D,G="set"+(this.$u?"UTC":"");switch(b){case I:return y?C(1,0):C(31,11);case j:return y?C(1,R):C(0,R+1);case S:var H=this.$locale().weekStart||0,Z=(O<H?O+7:O)-H;return C(y?q-Z:q+(6-Z),R);case v:case E:return F(G+"Hours",0);case x:return F(G+"Minutes",1);case g:return F(G+"Seconds",2);case m:return F(G+"Milliseconds",3);default:return this.clone()}},d.endOf=function(r){return this.startOf(r,!1)},d.$set=function(r,u){var f,y=N.p(r),b="set"+(this.$u?"UTC":""),C=(f={},f[v]=b+"Date",f[E]=b+"Date",f[j]=b+"Month",f[I]=b+"FullYear",f[x]=b+"Hours",f[g]=b+"Minutes",f[m]=b+"Seconds",f[h]=b+"Milliseconds",f)[y],F=y===v?this.$D+(u-this.$W):u;if(y===j||y===I){var O=this.clone().set(E,1);O.$d[C](F),O.init(),this.$d=O.set(E,Math.min(this.$D,O.daysInMonth())).$d}else C&&this.$d[C](F);return this.init(),this},d.set=function(r,u){return this.clone().$set(r,u)},d.get=function(r){return this[N.p(r)]()},d.add=function(r,u){var f,y=this;r=Number(r);var b=N.p(u),C=function(R){var q=P(y);return N.w(q.date(q.date()+Math.round(R*r)),y)};if(b===j)return this.set(j,this.$M+r);if(b===I)return this.set(I,this.$y+r);if(b===v)return C(1);if(b===S)return C(7);var F=(f={},f[g]=s,f[x]=i,f[m]=a,f)[b]||1,O=this.$d.getTime()+r*F;return N.w(O,this)},d.subtract=function(r,u){return this.add(-1*r,u)},d.format=function(r){var u=this,f=this.$locale();if(!this.isValid())return f.invalidDate||_;var y=r||"YYYY-MM-DDTHH:mm:ssZ",b=N.z(this),C=this.$H,F=this.$m,O=this.$M,R=f.weekdays,q=f.months,G=f.meridiem,H=function(U,ee,ae,se){return U&&(U[ee]||U(u,y))||ae[ee].slice(0,se)},Z=function(U){return N.s(C%12||12,U,"0")},Q=G||function(U,ee,ae){var se=U<12?"AM":"PM";return ae?se.toLowerCase():se};return y.replace(w,function(U,ee){return ee||function(ae){switch(ae){case"YY":return String(u.$y).slice(-2);case"YYYY":return N.s(u.$y,4,"0");case"M":return O+1;case"MM":return N.s(O+1,2,"0");case"MMM":return H(f.monthsShort,O,q,3);case"MMMM":return H(q,O);case"D":return u.$D;case"DD":return N.s(u.$D,2,"0");case"d":return String(u.$W);case"dd":return H(f.weekdaysMin,u.$W,R,2);case"ddd":return H(f.weekdaysShort,u.$W,R,3);case"dddd":return R[u.$W];case"H":return String(C);case"HH":return N.s(C,2,"0");case"h":return Z(1);case"hh":return Z(2);case"a":return Q(C,F,!0);case"A":return Q(C,F,!1);case"m":return String(F);case"mm":return N.s(F,2,"0");case"s":return String(u.$s);case"ss":return N.s(u.$s,2,"0");case"SSS":return N.s(u.$ms,3,"0");case"Z":return b}return null}(U)||b.replace(":","")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(r,u,f){var y,b=this,C=N.p(u),F=P(r),O=(F.utcOffset()-this.utcOffset())*s,R=this-F,q=function(){return N.m(b,F)};switch(C){case I:y=q()/12;break;case j:y=q();break;case D:y=q()/3;break;case S:y=(R-O)/6048e5;break;case v:y=(R-O)/864e5;break;case x:y=R/i;break;case g:y=R/s;break;case m:y=R/a;break;default:y=R}return f?y:N.a(y)},d.daysInMonth=function(){return this.endOf(j).$D},d.$locale=function(){return T[this.$L]},d.locale=function(r,u){if(!r)return this.$L;var f=this.clone(),y=z(r,u,!0);return y&&(f.$L=y),f},d.clone=function(){return N.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},l}(),o=B.prototype;return P.prototype=o,[["$ms",h],["$s",m],["$m",g],["$H",x],["$W",v],["$M",j],["$y",I],["$D",E]].forEach(function(l){o[l[1]]=function(d){return this.$g(d,l[0],l[1])}}),P.extend=function(l,d){return l.$i||(l(d,B,P),l.$i=!0),P},P.locale=z,P.isDayjs=A,P.unix=function(l){return P(1e3*l)},P.en=T[k],P.Ls=T,P.p={},P})}(me)),me.exports}var en=Qt();const X=_e(en);var fe={exports:{}},tn=fe.exports,Pe;function nn(){return Pe||(Pe=1,function(e,t){(function(a,s){e.exports=s()})(tn,function(){var a={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},s=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,h=/\d\d/,m=/\d\d?/,g=/\d*[^-_:/,()\s\d]+/,x={},v=function(p){return(p=+p)+(p>68?1900:2e3)},S=function(p){return function(w){this[p]=+w}},j=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(w){if(!w||w==="Z")return 0;var M=w.match(/([+-]|\d\d)/g),$=60*M[1]+(+M[2]||0);return $===0?0:M[0]==="+"?-$:$}(p)}],D=function(p){var w=x[p];return w&&(w.indexOf?w:w.s.concat(w.f))},I=function(p,w){var M,$=x.meridiem;if($){for(var Y=1;Y<=24;Y+=1)if(p.indexOf($(Y,0,w))>-1){M=Y>12;break}}else M=p===(w?"pm":"PM");return M},E={A:[g,function(p){this.afternoon=I(p,!1)}],a:[g,function(p){this.afternoon=I(p,!0)}],Q:[i,function(p){this.month=3*(p-1)+1}],S:[i,function(p){this.milliseconds=100*+p}],SS:[h,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[m,S("seconds")],ss:[m,S("seconds")],m:[m,S("minutes")],mm:[m,S("minutes")],H:[m,S("hours")],h:[m,S("hours")],HH:[m,S("hours")],hh:[m,S("hours")],D:[m,S("day")],DD:[h,S("day")],Do:[g,function(p){var w=x.ordinal,M=p.match(/\d+/);if(this.day=M[0],w)for(var $=1;$<=31;$+=1)w($).replace(/\[|\]/g,"")===p&&(this.day=$)}],w:[m,S("week")],ww:[h,S("week")],M:[m,S("month")],MM:[h,S("month")],MMM:[g,function(p){var w=D("months"),M=(D("monthsShort")||w.map(function($){return $.slice(0,3)})).indexOf(p)+1;if(M<1)throw new Error;this.month=M%12||M}],MMMM:[g,function(p){var w=D("months").indexOf(p)+1;if(w<1)throw new Error;this.month=w%12||w}],Y:[/[+-]?\d+/,S("year")],YY:[h,function(p){this.year=v(p)}],YYYY:[/\d{4}/,S("year")],Z:j,ZZ:j};function _(p){var w,M;w=p,M=x&&x.formats;for(var $=(p=w.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(P,N,B){var o=B&&B.toUpperCase();return N||M[B]||a[B]||M[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(l,d,r){return d||r.slice(1)})})).match(s),Y=$.length,k=0;k<Y;k+=1){var T=$[k],L=E[T],A=L&&L[0],z=L&&L[1];$[k]=z?{regex:A,parser:z}:T.replace(/^\[|\]$/g,"")}return function(P){for(var N={},B=0,o=0;B<Y;B+=1){var l=$[B];if(typeof l=="string")o+=l.length;else{var d=l.regex,r=l.parser,u=P.slice(o),f=d.exec(u)[0];r.call(N,f),P=P.replace(f,"")}}return function(y){var b=y.afternoon;if(b!==void 0){var C=y.hours;b?C<12&&(y.hours+=12):C===12&&(y.hours=0),delete y.afternoon}}(N),N}}return function(p,w,M){M.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(v=p.parseTwoDigitYear);var $=w.prototype,Y=$.parse;$.parse=function(k){var T=k.date,L=k.utc,A=k.args;this.$u=L;var z=A[1];if(typeof z=="string"){var P=A[2]===!0,N=A[3]===!0,B=P||N,o=A[2];N&&(o=A[2]),x=this.$locale(),!P&&o&&(x=M.Ls[o]),this.$d=function(u,f,y,b){try{if(["x","X"].indexOf(f)>-1)return new Date((f==="X"?1e3:1)*u);var C=_(f)(u),F=C.year,O=C.month,R=C.day,q=C.hours,G=C.minutes,H=C.seconds,Z=C.milliseconds,Q=C.zone,U=C.week,ee=new Date,ae=R||(F||O?1:ee.getDate()),se=F||ee.getFullYear(),le=0;F&&!O||(le=O>0?O-1:ee.getMonth());var de,ve=q||0,ye=G||0,Se=H||0,$e=Z||0;return Q?new Date(Date.UTC(se,le,ae,ve,ye,Se,$e+60*Q.offset*1e3)):y?new Date(Date.UTC(se,le,ae,ve,ye,Se,$e)):(de=new Date(se,le,ae,ve,ye,Se,$e),U&&(de=b(de).week(U).toDate()),de)}catch{return new Date("")}}(T,z,L,M),this.init(),o&&o!==!0&&(this.$L=this.locale(o).$L),B&&T!=this.format(z)&&(this.$d=new Date("")),x={}}else if(z instanceof Array)for(var l=z.length,d=1;d<=l;d+=1){A[1]=z[d-1];var r=M.apply(this,A);if(r.isValid()){this.$d=r.$d,this.$L=r.$L,this.init();break}d===l&&(this.$d=new Date(""))}else Y.call(this,k)}}})}(fe)),fe.exports}var an=nn();const sn=_e(an);function rn(e,t,a){var s=a,i=s.noTrailing,h=i===void 0?!1:i,m=s.noLeading,g=m===void 0?!1:m,x=s.debounceMode,v=x===void 0?void 0:x,S,j=!1,D=0;function I(){S&&clearTimeout(S)}function E(p){var w=p||{},M=w.upcomingOnly,$=M===void 0?!1:M;I(),j=!$}function _(){for(var p=arguments.length,w=new Array(p),M=0;M<p;M++)w[M]=arguments[M];var $=this,Y=Date.now()-D;if(j)return;function k(){D=Date.now(),t.apply($,w)}function T(){S=void 0}!g&&v&&!S&&k(),I(),v===void 0&&Y>e?g?(D=Date.now(),h||(S=setTimeout(v?T:k,e))):k():h!==!0&&(S=setTimeout(v?T:k,v===void 0?e-Y:e))}return _.cancel=E,_}function on(e,t,a){var s={},i=s.atBegin,h=i===void 0?!1:i;return rn(e,t,{debounceMode:h!==!1})}const pe=100,tt=pe/5,nt=pe/2-tt/2,je=nt*2*Math.PI,ke=50,Ye=e=>{const{dotClassName:t,style:a,hasCircleCls:s}=e;return c.createElement("circle",{className:J(`${t}-circle`,{[`${t}-circle-bg`]:s}),r:nt,cx:ke,cy:ke,strokeWidth:tt,style:a})},cn=e=>{let{percent:t,prefixCls:a}=e;const s=`${a}-dot`,i=`${s}-holder`,h=`${i}-hidden`,[m,g]=c.useState(!1);jt(()=>{t!==0&&g(!0)},[t!==0]);const x=Math.max(Math.min(t,100),0);if(!m)return null;const v={strokeDashoffset:`${je/4}`,strokeDasharray:`${je*x/100} ${je*(100-x)/100}`};return c.createElement("span",{className:J(i,`${s}-progress`,x<=0&&h)},c.createElement("svg",{viewBox:`0 0 ${pe} ${pe}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":x},c.createElement(Ye,{dotClassName:s,hasCircleCls:!0}),c.createElement(Ye,{dotClassName:s,style:v})))};function ln(e){const{prefixCls:t,percent:a=0}=e,s=`${t}-dot`,i=`${s}-holder`,h=`${i}-hidden`;return c.createElement(c.Fragment,null,c.createElement("span",{className:J(i,a>0&&h)},c.createElement("span",{className:J(s,`${t}-dot-spin`)},[1,2,3,4].map(m=>c.createElement("i",{className:`${t}-dot-item`,key:m})))),c.createElement(cn,{prefixCls:t,percent:a}))}function dn(e){const{prefixCls:t,indicator:a,percent:s}=e,i=`${t}-dot`;return a&&c.isValidElement(a)?wt(a,{className:J(a.props.className,i),percent:s}):c.createElement(ln,{prefixCls:t,percent:s})}const un=new re("antSpinMove",{to:{opacity:1}}),mn=new re("antRotate",{to:{transform:"rotate(405deg)"}}),fn=e=>{const{componentCls:t,calc:a}=e;return{[t]:Object.assign(Object.assign({},Ge(e)),{position:"absolute",display:"none",color:e.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`,"&-spinning":{position:"relative",display:"inline-block",opacity:1},[`${t}-text`]:{fontSize:e.fontSize,paddingTop:a(a(e.dotSize).sub(e.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:e.colorBgMask,zIndex:e.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:`all ${e.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[t]:{[`${t}-dot-holder`]:{color:e.colorWhite},[`${t}-text`]:{color:e.colorTextLightSolid}}},"&-nested-loading":{position:"relative",[`> div > ${t}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:e.contentHeight,[`${t}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:a(e.dotSize).mul(-1).div(2).equal()},[`${t}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${e.colorBgContainer}`},[`&${t}-show-text ${t}-dot`]:{marginTop:a(e.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{[`${t}-dot`]:{margin:a(e.dotSizeSM).mul(-1).div(2).equal()},[`${t}-text`]:{paddingTop:a(a(e.dotSizeSM).sub(e.fontSize)).div(2).add(2).equal()},[`&${t}-show-text ${t}-dot`]:{marginTop:a(e.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{[`${t}-dot`]:{margin:a(e.dotSizeLG).mul(-1).div(2).equal()},[`${t}-text`]:{paddingTop:a(a(e.dotSizeLG).sub(e.fontSize)).div(2).add(2).equal()},[`&${t}-show-text ${t}-dot`]:{marginTop:a(e.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},[`${t}-container`]:{position:"relative",transition:`opacity ${e.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:e.colorBgContainer,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${t}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:e.spinDotDefault},[`${t}-dot-holder`]:{width:"1em",height:"1em",fontSize:e.dotSize,display:"inline-block",transition:`transform ${e.motionDurationSlow} ease, opacity ${e.motionDurationSlow} ease`,transformOrigin:"50% 50%",lineHeight:1,color:e.colorPrimary,"&-hidden":{transform:"scale(0.3)",opacity:0}},[`${t}-dot-progress`]:{position:"absolute",inset:0},[`${t}-dot`]:{position:"relative",display:"inline-block",fontSize:e.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:a(e.dotSize).sub(a(e.marginXXS).div(2)).div(2).equal(),height:a(e.dotSize).sub(a(e.marginXXS).div(2)).div(2).equal(),background:"currentColor",borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:un,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:mn,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"&-circle":{strokeLinecap:"round",transition:["stroke-dashoffset","stroke-dasharray","stroke","stroke-width","opacity"].map(s=>`${s} ${e.motionDurationSlow} ease`).join(","),fillOpacity:0,stroke:"currentcolor"},"&-circle-bg":{stroke:e.colorFillSecondary}},[`&-sm ${t}-dot`]:{"&, &-holder":{fontSize:e.dotSizeSM}},[`&-sm ${t}-dot-holder`]:{i:{width:a(a(e.dotSizeSM).sub(a(e.marginXXS).div(2))).div(2).equal(),height:a(a(e.dotSizeSM).sub(a(e.marginXXS).div(2))).div(2).equal()}},[`&-lg ${t}-dot`]:{"&, &-holder":{fontSize:e.dotSizeLG}},[`&-lg ${t}-dot-holder`]:{i:{width:a(a(e.dotSizeLG).sub(e.marginXXS)).div(2).equal(),height:a(a(e.dotSizeLG).sub(e.marginXXS)).div(2).equal()}},[`&${t}-show-text ${t}-text`]:{display:"block"}})}},hn=e=>{const{controlHeightLG:t,controlHeight:a}=e;return{contentHeight:400,dotSize:t/2,dotSizeSM:t*.35,dotSizeLG:a}},gn=Ue("Spin",e=>{const t=We(e,{spinDotDefault:e.colorTextDescription});return[fn(t)]},hn),pn=200,Ae=[[30,.05],[70,.03],[96,.01]];function xn(e,t){const[a,s]=c.useState(0),i=c.useRef(null),h=t==="auto";return c.useEffect(()=>(h&&e&&(s(0),i.current=setInterval(()=>{s(m=>{const g=100-m;for(let x=0;x<Ae.length;x+=1){const[v,S]=Ae[x];if(m<=v)return m+g*S}return m})},pn)),()=>{clearInterval(i.current)}),[h,e]),h?a:t}var bn=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(a[s[i]]=e[s[i]]);return a};let at;function vn(e,t){return!!e&&!!t&&!Number.isNaN(Number(t))}const Ce=e=>{var t;const{prefixCls:a,spinning:s=!0,delay:i=0,className:h,rootClassName:m,size:g="default",tip:x,wrapperClassName:v,style:S,children:j,fullscreen:D=!1,indicator:I,percent:E}=e,_=bn(e,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen","indicator","percent"]),{getPrefixCls:p,direction:w,spin:M}=c.useContext(be),$=p("spin",a),[Y,k,T]=gn($),[L,A]=c.useState(()=>s&&!vn(s,i)),z=xn(L,E);c.useEffect(()=>{if(s){const r=on(i,()=>{A(!0)});return r(),()=>{var u;(u=r==null?void 0:r.cancel)===null||u===void 0||u.call(r)}}A(!1)},[i,s]);const P=c.useMemo(()=>typeof j<"u"&&!D,[j,D]),N=J($,M==null?void 0:M.className,{[`${$}-sm`]:g==="small",[`${$}-lg`]:g==="large",[`${$}-spinning`]:L,[`${$}-show-text`]:!!x,[`${$}-rtl`]:w==="rtl"},h,!D&&m,k,T),B=J(`${$}-container`,{[`${$}-blur`]:L}),o=(t=I??(M==null?void 0:M.indicator))!==null&&t!==void 0?t:at,l=Object.assign(Object.assign({},M==null?void 0:M.style),S),d=c.createElement("div",Object.assign({},_,{style:l,className:N,"aria-live":"polite","aria-busy":L}),c.createElement(dn,{prefixCls:$,indicator:o,percent:z}),x&&(P||D)?c.createElement("div",{className:`${$}-text`},x):null);return Y(P?c.createElement("div",Object.assign({},_,{className:J(`${$}-nested-loading`,v,k,T)}),L&&c.createElement("div",{key:"loading"},d),c.createElement("div",{className:B,key:"container"},j)):D?c.createElement("div",{className:J(`${$}-fullscreen`,{[`${$}-fullscreen-show`]:L},m,k,T)},d):d)};Ce.setDefaultIndicator=e=>{at=e};let ne=null,he=e=>e(),xe=[],ie={};function Fe(){const{getContainer:e,rtl:t,maxCount:a,top:s,bottom:i,showProgress:h,pauseOnHover:m}=ie,g=(e==null?void 0:e())||document.body;return{getContainer:()=>g,rtl:t,maxCount:a,top:s,bottom:i,showProgress:h,pauseOnHover:m}}const yn=V.forwardRef((e,t)=>{const{notificationConfig:a,sync:s}=e,{getPrefixCls:i}=c.useContext(be),h=ie.prefixCls||i("notification"),m=c.useContext(Mt),[g,x]=et(Object.assign(Object.assign(Object.assign({},a),{prefixCls:h}),m.notification));return V.useEffect(s,[]),V.useImperativeHandle(t,()=>{const v=Object.assign({},g);return Object.keys(v).forEach(S=>{v[S]=function(){return s(),g[S].apply(g,arguments)}}),{instance:v,sync:s}}),x}),Sn=V.forwardRef((e,t)=>{const[a,s]=V.useState(Fe),i=()=>{s(Fe)};V.useEffect(i,[]);const h=_t(),m=h.getRootPrefixCls(),g=h.getIconPrefixCls(),x=h.getTheme(),v=V.createElement(yn,{ref:t,sync:i,notificationConfig:a});return V.createElement(Ct,{prefixCls:m,iconPrefixCls:g,theme:x},h.holderRender?h.holderRender(v):v)});function De(){if(!ne){const e=document.createDocumentFragment(),t={fragment:e};ne=t,he(()=>{Nt()(V.createElement(Sn,{ref:s=>{const{instance:i,sync:h}=s||{};Promise.resolve().then(()=>{!t.instance&&i&&(t.instance=i,t.sync=h,De())})}}),e)});return}ne.instance&&(xe.forEach(e=>{switch(e.type){case"open":{he(()=>{ne.instance.open(Object.assign(Object.assign({},ie),e.config))});break}case"destroy":he(()=>{ne==null||ne.instance.destroy(e.key)});break}}),xe=[])}function $n(e){ie=Object.assign(Object.assign({},ie),e),he(()=>{var t;(t=ne==null?void 0:ne.sync)===null||t===void 0||t.call(ne)})}function st(e){xe.push({type:"open",config:e}),De()}const jn=e=>{xe.push({type:"destroy",key:e}),De()},wn=["success","info","warning","error"],Cn={open:st,destroy:jn,config:$n,useNotification:Jt,_InternalPanelDoNotUseOrYouWillBeFired:Bt},rt=Cn;wn.forEach(e=>{rt[e]=t=>st(Object.assign(Object.assign({},t),{type:e}))});const Ne=({name:e,size:t="md"})=>{const a=i=>(i==null?void 0:i.split(" ").map(h=>h[0]).join("").toUpperCase())||"?",s={sm:"w-8 h-8 text-xs",md:"w-8 h-8 text-xs",lg:"w-10 h-10 text-sm"};return n.jsx("div",{className:`${s[t]} bg-gray-300 rounded-full flex items-center justify-center text-gray-500`,children:a(e)})},ot=({conversation:e,isActive:t,onClick:a,isLoading:s=!1})=>{const i=h=>{if(!s){const m=h.currentTarget.querySelector('input[type="hidden"]'),g=m?m.value:null;a(e,g)}};return n.jsx("div",{className:`contact-list-avatar p-4 border-b border-gray-200 cursor-pointer ${t?"bg-blue-50":"hover:bg-gray-50"} ${s?"opacity-50":""}`,onClick:i,children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ne,{name:e.partner_name||"P"}),n.jsx("div",{className:"text-gray-700",children:e.partner_name||`Partner #${e.partner_id}`}),n.jsx("input",{type:"hidden",value:e.conversation_id}),n.jsx("input",{type:"hidden",value:e.partner_id}),!e.read_by_partner&&n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})})};async function Nn(e){const t=new FormData;t.append("file",e);try{const s=await(await fetch("https://frohubecomm.mystagingwebsite.com/wp-json/frohub/v1/upload-comment-image",{method:"POST",headers:{Authorization:"Basic YOUR_BASIC_AUTH_HERE"},body:t})).json();if(s.success&&s.url)return s.url;throw new Error(s.error||"Upload failed")}catch(a){throw console.error("Upload error:",a),a}}const it=({onSendMessage:e,isLoading:t=!1,disabled:a=!1})=>{const[s,i]=c.useState(""),[h,m]=c.useState(null),[g,x]=c.useState(null),[v,S]=c.useState(!1),j=c.useRef(null),D=async()=>{if(!s.trim()&&!h||t||a)return;let p="";if(h){S(!0);try{p=await Nn(h)}catch(w){console.error("Image upload failed:",w),alert(w.message||"Image upload failed")}finally{S(!1),m(null),x(null)}}(s.trim()||p)&&(await e(s,p),i(""))},I=p=>{const w=p.target.files[0];w&&(m(w),x(URL.createObjectURL(w)))},E=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),D())},_=()=>{j.current&&j.current.click()};return n.jsxs("div",{className:"border-t bg-white p-3",children:[n.jsxs("div",{className:"flex",children:[n.jsx("input",{type:"file",accept:"image/*",ref:j,style:{display:"none"},onChange:I}),n.jsx("button",{onClick:_,type:"button",className:"ml-2 px-3 py-2 text-gray-500 hover:text-gray-700",disabled:a||v,children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),n.jsx("input",{value:s,onChange:p=>i(p.target.value),onKeyPress:E,placeholder:"Type your message...",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm",disabled:a||v}),n.jsx("button",{onClick:D,disabled:!s.trim()&&!h||t||a||v,className:"send-button bg-gray-200 text-gray-700 px-3 py-1 rounded-md text-sm",children:"Send Message"})]}),g&&n.jsx("div",{className:"mt-2 ml-10",children:n.jsxs("div",{className:"relative inline-block",children:[n.jsx("img",{src:g,alt:"Preview",className:"max-h-32 rounded"}),n.jsx("button",{onClick:()=>{m(null),x(null)},className:"absolute top-1 right-1 bg-gray-800 bg-opacity-50 rounded-full p-1 text-white hover:bg-opacity-70",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),n.jsx("div",{className:"text-xs text-gray-400 mt-1 ml-10",children:"Please be respectful: Keep your messages kind and considerate. Treat others as you would like to be treated. Report any abusive messages here."}),v&&n.jsx("div",{className:"text-xs text-blue-500 mt-1 ml-10",children:"Uploading image..."})]})},ct=({comment:e})=>{var x,v;const a=(((v=(x=e==null?void 0:e.meta_data)==null?void 0:x.sent_from)==null?void 0:v[0])||"")!=="partner",s=S=>new Date(e.date).toLocaleString("en-GB",{hour:"2-digit",minute:"2-digit",day:"numeric",month:"short",year:"numeric"}),i=S=>({__html:S}),h=e.status==="pending",m=e.status==="failed",g=a?"customer-message":"partner-message";return n.jsxs("div",{className:`flex mb-4 ${a?"justify-end":"justify-start"}`,children:[!a&&n.jsx(Ne,{name:e.author||"Partner",size:"sm"}),n.jsx("div",{className:`flex flex-col ${a?"items-end":"items-start"} max-w-xs`,children:n.jsxs("div",{className:`p-3 rounded-lg break-words shadow-sm ${g}`,children:[n.jsxs("div",{className:"text-xs mb-1",children:[s(e.date),h&&n.jsx("span",{className:"ml-1",children:"(Sending...)"}),m&&n.jsx("span",{className:"ml-1",children:"(Failed)"})]}),n.jsx("div",{dangerouslySetInnerHTML:i(e.content),className:"text-sm"}),e.image_url&&n.jsx("div",{className:"mt-2",children:n.jsx("img",{src:e.image_url,alt:"Attached",className:"max-w-full rounded"})})]})}),a&&n.jsx(Ne,{name:"You",size:"sm"})]})},_n=({dataKey:e,currentUserPartnerPostId:t})=>{const[a,s]=c.useState([]),[i,h]=c.useState([]),[m,g]=c.useState(null),[x,v]=c.useState(null),[S,j]=c.useState(t),[D,I]=c.useState({conversations:!1,comments:!1,sending:!1}),[E,_]=c.useState(null),[p,w]=c.useState(!0),M=c.useRef(null),$=c.useRef(null),[Y,k]=c.useState(!1),T=typeof window<"u"?new URLSearchParams(window.location.search):null,L=T==null?void 0:T.get("customer_id"),A=T==null?void 0:T.get("conversation_id");c.useEffect(()=>{N()},[]),c.useEffect(()=>(m?(B(m.client_id,!0),z()):P(),()=>P()),[m]),c.useEffect(()=>{const r=document.getElementById("chat-messages-container-mobile");r&&(r.scrollTop=r.scrollHeight)},[i]);const z=()=>{P(),M.current=setInterval(()=>{m&&B(m.client_id,!1)},5e3)},P=()=>{M.current&&(clearInterval(M.current),M.current=null)},N=()=>{I(r=>({...r,conversations:!0})),_(null),te("frohub/user_conversations",r=>{var u;if(r.success){const y=(((u=r.data)==null?void 0:u.data)||[]).map(b=>({...b,client_id:b.conversation_id,comments:Array.isArray(b.comments)?b.comments:[]}));if(s(y),y.length>0){let b=null;A?(b=y.find(C=>String(C.conversation_id)===String(A)),b&&(g(b),v(b.conversation_id),w(!1))):L&&(b=y.find(C=>String(C.customer_id)===String(L)),b&&(g(b),v(b.conversation_id),w(!1)))}}else _("Failed to load conversations: "+(r.message||"Unknown error")),s([]);I(f=>({...f,conversations:!1}))})},B=(r,u=!0)=>{u&&I(f=>({...f,comments:!0})),_(null),te("frohub/get_conversation_comments",f=>{var y;if(f.success){const b=f.data||{},C=b.comments||[],F=b.user_partner_id;if(Array.isArray(C))if(u||i.length===0){if(h(C),C.length>0){const O=C[C.length-1];$.current=new Date(O.date).getTime()}}else{const O=$.current,R=C.filter(q=>{const G=new Date(q.date).getTime();return!O||G>O});if(R.length>0){const q=R[R.length-1];$.current=new Date(q.date).getTime(),h(G=>{const H=G.filter(U=>!U.comment_id.toString().startsWith("temp_")||U.status==="failed"),Z=new Set(H.map(U=>U.comment_id)),Q=R.filter(U=>!Z.has(U.comment_id));return[...H,...Q]}),R.find(G=>{var H,Z;return((Z=(H=G==null?void 0:G.meta_data)==null?void 0:H.sent_from)==null?void 0:Z[0])!=="partner"})}}F&&j(F),s(O=>O.map(R=>R.client_id===r?{...R,read_by_partner:!0}:R))}else u&&(_("Failed to load comments: "+(((y=f.data)==null?void 0:y.message)||"Unknown error")),h([]));u&&I(b=>({...b,comments:!1}))},{post_id:r})},o=(r,u)=>{g(r),v(u),h([]),k(!1),$.current=null,w(!1)},l=()=>{w(!0),g(null),v(null),h([])},d=async(r,u="")=>{if(!m||!r.trim()&&!u)return;const f={comment_id:`temp_${Date.now()}`,content:r,author:"You",partner_id:t,date:new Date().toISOString(),image_url:u,status:"pending"};h(b=>[...b,f]),I(b=>({...b,sending:!0})),_(null);const y=x||m.client_id;te("frohub/send_customer_message",b=>{b.success?(h(C=>C.filter(F=>F.comment_id!==f.comment_id)),B(m.client_id,!1),s(C=>C.map(F=>F.client_id===m.client_id?{...F,last_message:r,last_activity:new Date().toISOString(),read_by_partner:!0}:F))):(h(C=>C.map(F=>F.comment_id===f.comment_id?{...F,status:"failed"}:F)),_("Failed to send message: "+(b.message||"Unknown error"))),I(C=>({...C,sending:!1}))},{post_id:y,conversation_id:x,partner_id:t,comment:r,image_url:u})};return n.jsxs("div",{className:"flex flex-col h-screen bg-white",children:[p&&n.jsx("div",{className:"conversation-details flex flex-col h-full",children:n.jsx("div",{className:"message-conversations flex-1 overflow-y-auto",children:D.conversations?n.jsx("div",{className:"flex flex-col space-y-4 p-4",children:[...Array(4)].map((r,u)=>n.jsxs("div",{className:"flex items-center space-x-3 p-3",children:[n.jsx(W.Avatar,{size:"large",active:!0}),n.jsxs("div",{className:"flex-1",children:[n.jsx(W.Input,{size:"small",active:!0,style:{width:"60%"}}),n.jsx("div",{className:"mt-2",children:n.jsx(W.Input,{size:"small",active:!0,style:{width:"80%"}})})]})]},u))}):n.jsxs(n.Fragment,{children:[a.map(r=>n.jsx(ot,{conversation:r,isActive:!1,onClick:o},r.client_id)),!D.conversations&&a.length===0&&n.jsx("div",{className:"p-4 text-center text-gray-500",children:"No conversations found"})]})})}),!p&&m&&n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsxs("div",{className:"flex items-center p-4 border-b border-gray-200 bg-white",children:[n.jsx("button",{onClick:l,className:"p-1 text-gray-600 hover:text-gray-800",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsx("span",{className:"ml-3 text-gray-900 font-medium",children:"Back to Messages"})]}),n.jsx("div",{id:"chat-messages-container-mobile",className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:D.comments?n.jsx("div",{className:"flex justify-center items-center h-full text-gray-500",children:"Loading messages..."}):n.jsxs(n.Fragment,{children:[i.map(r=>n.jsx(ct,{comment:r},r.comment_id)),i.length===0&&n.jsx("div",{className:"text-center text-gray-500 mt-8",children:"No messages yet. Start a conversation!"})]})}),n.jsx("div",{className:"border-t border-gray-200 bg-white",children:n.jsx(it,{onSendMessage:d,isLoading:D.sending,disabled:D.comments})})]}),E&&n.jsx("div",{className:"fixed top-4 left-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded z-50",children:n.jsxs("div",{className:"flex items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("strong",{className:"font-medium",children:"Error:"}),n.jsx("div",{className:"mt-1 text-sm",children:E})]}),n.jsx("button",{onClick:()=>_(null),className:"ml-2 text-red-700 hover:text-red-900",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})},Mn=({dataKey:e,currentUserPartnerPostId:t})=>{const[a,s]=c.useState([]),[i,h]=c.useState([]),[m,g]=c.useState(null),[x,v]=c.useState(null),[S,j]=c.useState(t),[D,I]=c.useState({conversations:!1,comments:!1,sending:!1}),[E,_]=c.useState(null),p=c.useRef(null),w=c.useRef(null),[M,$]=c.useState(!1),Y=typeof window<"u"?new URLSearchParams(window.location.search):null,k=Y==null?void 0:Y.get("customer_id"),T=Y==null?void 0:Y.get("conversation_id");c.useEffect(()=>{z()},[]),c.useEffect(()=>(m?(P(m.client_id,!0),L()):A(),()=>A()),[m]),c.useEffect(()=>{const o=document.getElementById("chat-messages-container");o&&(o.scrollTop=o.scrollHeight)},[i]);const L=()=>{A(),p.current=setInterval(()=>{m&&P(m.client_id,!1)},5e3)},A=()=>{p.current&&(clearInterval(p.current),p.current=null)},z=()=>{I(o=>({...o,conversations:!0})),_(null),te("frohub/user_conversations",o=>{var l;if(o.success){const r=(((l=o.data)==null?void 0:l.data)||[]).map(u=>({...u,client_id:u.conversation_id,comments:Array.isArray(u.comments)?u.comments:[]}));if(s(r),r.length>0){let u=null;T?u=r.find(f=>String(f.conversation_id)===String(T)):k&&(u=r.find(f=>String(f.customer_id)===String(k))),!u&&!m&&(u=r[0]),u&&(g(u),v(u.conversation_id))}}else _("Failed to load conversations: "+(o.message||"Unknown error")),s([]);I(d=>({...d,conversations:!1}))})},P=(o,l=!0)=>{l&&I(d=>({...d,comments:!0})),_(null),te("frohub/get_conversation_comments",d=>{var r;if(d.success){const u=d.data||{},f=u.comments||[],y=u.user_partner_id;if(Array.isArray(f))if(l||i.length===0){if(h(f),f.length>0){const b=f[f.length-1];w.current=new Date(b.date).getTime()}}else{const b=w.current,C=f.filter(F=>{const O=new Date(F.date).getTime();return!b||O>b});if(C.length>0){const F=C[C.length-1];w.current=new Date(F.date).getTime(),h(O=>{const R=O.filter(H=>!H.comment_id.toString().startsWith("temp_")||H.status==="failed"),q=new Set(R.map(H=>H.comment_id)),G=C.filter(H=>!q.has(H.comment_id));return[...R,...G]}),C.find(O=>{var R,q;return((q=(R=O==null?void 0:O.meta_data)==null?void 0:R.sent_from)==null?void 0:q[0])!=="partner"})}}y&&j(y),s(b=>b.map(C=>C.client_id===o?{...C,read_by_partner:!0}:C))}else l&&(_("Failed to load comments: "+(((r=d.data)==null?void 0:r.message)||"Unknown error")),h([]));l&&I(u=>({...u,comments:!1}))},{post_id:o})},N=(o,l)=>{g(o),v(l),h([]),$(!1),w.current=null},B=async(o,l="")=>{if(!m||!o.trim()&&!l)return;const d={comment_id:`temp_${Date.now()}`,content:o,author:"You",partner_id:t,date:new Date().toISOString(),image_url:l,status:"pending"};h(u=>[...u,d]),I(u=>({...u,sending:!0})),_(null);const r=x||m.client_id;te("frohub/send_customer_message",u=>{u.success?(h(f=>f.filter(y=>y.comment_id!==d.comment_id)),P(m.client_id,!1),s(f=>f.map(y=>y.client_id===m.client_id?{...y,last_message:o,last_activity:new Date().toISOString(),read_by_partner:!0}:y))):(h(f=>f.map(y=>y.comment_id===d.comment_id?{...y,status:"failed"}:y)),_("Failed to send message: "+(u.message||"Unknown error"))),I(f=>({...f,sending:!1}))},{post_id:r,conversation_id:x,partner_id:t,comment:o,image_url:l})};return n.jsxs("div",{className:"flex h-screen bg-white",children:[n.jsx("div",{className:"message-conversations w-80",children:n.jsxs("div",{className:"overflow-y-auto",children:[D.conversations?n.jsxs("div",{className:"text-sm text-gray-500 mt-1 flex flex-col space-y-4",children:[n.jsxs("div",{className:"contact-list-avatar p-4 flex space-x-2 justify-around",children:[n.jsx(W.Avatar,{size:"large",active:!0}),n.jsx(W.Input,{size:"large",active:!0})]}),n.jsxs("div",{className:"contact-list-avatar p-4 flex space-x-2 justify-around",children:[n.jsx(W.Avatar,{size:"large",active:!0}),n.jsx(W.Input,{size:"large",active:!0})]}),n.jsxs("div",{className:"contact-list-avatar p-4 flex space-x-2 justify-around",children:[n.jsx(W.Avatar,{size:"large",active:!0}),n.jsx(W.Input,{size:"large",active:!0})]}),n.jsxs("div",{className:"contact-list-avatar p-4 flex space-x-2 justify-around",children:[n.jsx(W.Avatar,{size:"large",active:!0}),n.jsx(W.Input,{size:"large",active:!0})]})]}):a.map(o=>n.jsx(ot,{conversation:o,isActive:(m==null?void 0:m.client_id)===o.client_id,onClick:N},o.client_id)),!D.conversations&&a.length===0&&n.jsx("div",{className:"p-4 text-center text-gray-500",children:"No conversations found"})]})}),n.jsx("div",{className:"conversation-details flex-1 flex flex-col",children:m?n.jsxs(n.Fragment,{children:[n.jsx("div",{id:"chat-messages-container",className:"flex-1 overflow-y-auto p-4",children:D.comments?n.jsx("div",{className:"flex justify-center items-center h-full text-gray-500",children:"Loading messages..."}):n.jsxs(n.Fragment,{children:[i.map(o=>n.jsx(ct,{comment:o},o.comment_id)),i.length===0&&n.jsx("div",{className:"text-center text-gray-500 mt-8",children:"No messages yet. Start a conversation!"})]})}),n.jsx(it,{onSendMessage:B,isLoading:D.sending,disabled:D.comments})]}):n.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Select a conversation"}),n.jsx("p",{children:"Choose a conversation from the sidebar to start messaging"})]})})}),E&&n.jsx("div",{className:"fixed top-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded z-50 max-w-md",children:n.jsxs("div",{className:"flex items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("strong",{className:"font-medium",children:"Error:"}),n.jsx("div",{className:"mt-1 text-sm",children:E})]}),n.jsx("button",{onClick:()=>_(null),className:"ml-2 text-red-700 hover:text-red-900",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lt=(...e)=>e.filter((t,a,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===a).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var In={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=c.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:i="",children:h,iconNode:m,...g},x)=>c.createElement("svg",{ref:x,...In,width:t,height:t,stroke:e,strokeWidth:s?Number(a)*24/Number(t):a,className:lt("lucide",i),...g},[...m.map(([v,S])=>c.createElement(v,S)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=(e,t)=>{const a=c.forwardRef(({className:s,...i},h)=>c.createElement(En,{ref:h,iconNode:t,className:lt(`lucide-${Dn(e)}`,s),...i}));return a.displayName=`${e}`,a};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Oe=Ie("CircleCheckBig",Tn);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Le=Ie("CircleX",Pn);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Yn=Ie("RefreshCw",kn),Re=e=>{let t;const a=new Set,s=(v,S)=>{const j=typeof v=="function"?v(t):v;if(!Object.is(j,t)){const D=t;t=S??(typeof j!="object"||j===null)?j:Object.assign({},t,j),a.forEach(I=>I(t,D))}},i=()=>t,g={setState:s,getState:i,getInitialState:()=>x,subscribe:v=>(a.add(v),()=>a.delete(v))},x=t=e(s,i,g);return g},An=e=>e?Re(e):Re,Fn=e=>e;function On(e,t=Fn){const a=V.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return V.useDebugValue(a),a}const Ln=e=>{const t=An(e),a=s=>On(t,s);return Object.assign(a,t),a},Rn=e=>Ln(e),K=Rn(e=>{const t=new Date().toISOString().split("T")[0];return{availabilityData:[],loading:!1,selectedDate:t,productId:null,selectedAddOnId:null,selectedAddOns:[],productPrice:0,selectedServiceType:"",addonsChanged:!1,mobileTravelFee:0,readyForMobile:!1,addonTotalTime:0,errorMessage:"Postcode cannot be empty",totalService:0,setAvailabilityData:a=>e({availabilityData:a,loading:!1}),setLoading:a=>e({loading:a}),setSelectedDate:a=>e({selectedDate:a}),setProductId:a=>e({productId:a}),setSelectedAddOnId:a=>e({selectedAddOnId:a}),setSelectedAddOns:a=>e({selectedAddOns:a}),setProductPrice:a=>e({productPrice:a}),setSelectedServiceType:a=>e({selectedServiceType:a}),setMobileTravelFee:a=>e({mobileTravelFee:a}),setReadyForMobile:a=>e({readyForMobile:a}),setAddonsChanged:()=>e({addonsChanged:!0}),resetAddonsChanged:()=>e({addonsChanged:!1}),setErrorMessage:a=>e({errorMessage:a}),setTotalService:a=>e({totalService:a})}}),Bn=frohub_settings.ajax_url,zn=(e,t)=>new Promise((a,s)=>{jQuery.post(Bn,{_ajax_nonce:frohub_settings.nonce,action:e,...t},function(i){i.success?a(i):s(i)})}),Be=(e,t,a)=>{rt[e]({message:t,description:a,placement:"topRight",showProgress:!0})};function Hn(){const{selectedAddOns:e,productPrice:t,productId:a,selectedServiceType:s,addonTotalTime:i,mobileTravelFee:h,readyForMobile:m,initialServiceDuration:g,errorMessage:x}=K(),[v,S]=c.useState(t),[j,D]=c.useState(!1),[I,E]=c.useState(!1),[_,p]=c.useState("0h 0m"),[w,M]=c.useState(0),[$,Y]=c.useState(!1),k=v*.3;c.useEffect(()=>{(()=>{a&&(Y(!0),te("frohub/get_duration",A=>{if(A.success){const z=A.data.duration_hours||0,P=A.data.duration_minutes||0,N=z*60+P;M(N);const B=N+(i||0),o=Math.floor(B/60),l=B%60;p(`${o}h ${l}m`),Y(!1)}else console.error("Error fetching service duration:",A.message),Y(!1)},{product_id:a}))})()},[a,i]),c.useEffect(()=>{const L=()=>{const P=document.getElementById("extra-charge-container");if(P){const N=parseFloat(P.getAttribute("data-extra-charge"))||0,B=s==="mobile";S(t+N+(B&&h||0))}};L();const A=new MutationObserver(P=>{P.forEach(N=>{N.type==="attributes"&&N.attributeName==="data-extra-charge"&&L()})}),z=document.getElementById("extra-charge-container");return z&&A.observe(z,{attributes:!0,attributeFilter:["data-extra-charge"]}),()=>A.disconnect()},[t,h,s]),c.useEffect(()=>{const L=()=>{const P=document.querySelector('input[name="total_duration_time"]');if(P){const N=parseInt(P.value,10)||0;M(N)}else if(g){const N=g+(i||0),B=Math.floor(N/60),o=N%60;p(`${B}h ${o}m`)}};L();const A=new MutationObserver(L),z=document.querySelector('input[name="total_duration_time"]');return z&&A.observe(z,{attributes:!0,attributeFilter:["value"]}),()=>A.disconnect()},[i,g]);const T=async()=>{var l,d,r,u;const L=((l=document.querySelector('input[name="selectedDate"]'))==null?void 0:l.value)||"",A=((d=document.querySelector('input[name="selectedTime"]'))==null?void 0:d.value)||"",z=document.querySelector(".timeslot-button.selected"),P=((r=document.querySelector('input[name="selectedPrice"]'))==null?void 0:r.value)||"",N=((u=document.querySelector('input[name="travelFee"]'))==null?void 0:u.value)||"";if(!L||!z){Be("error","Missing Information","Please select a service type and date & time before proceeding.");return}if(s==="mobile"&&m===!1){Be("error","Validation Error",x);return}D(!0);const B=v-k,o=k*.03;document.cookie=`frohub_service_fee=${o}; path=/; max-age=86400`;try{const f=await zn("frohub_add_to_cart",{productId:a,selectedAddOns:e,depositDue:B,depositDueToday:k,serviceFee:o,productPrice:k,totalPrice:v,selectedServiceType:s,selectedDate:L,selectedTime:A,extraCharge:JSON.stringify({bookingExtra:P,mobileFee:N})});E(!0),window.location.href="/checkout"}catch(f){console.error("AJAX call failed:",f)}finally{D(!1)}};return n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-[#f2f4f7] border-t border-[#E8E8E8] shadow-md py-4 px-6 z-50",children:n.jsxs("div",{className:"sm:w-full md:w-4/6 mx-auto flex flex-col items-center",children:[n.jsxs("div",{className:"w-full bottom-bar",children:[n.jsx("div",{className:"bottom-bar-notice flex items-center gap-2 text-gray-700 text-sm",children:n.jsxs("span",{className:"flex items-center",children:[n.jsx("i",{className:"fas fa-shield-alt text-base"}),n.jsxs("span",{children:["All deposits paid through FroHub are protected. ",n.jsx("a",{href:"/help-centre/",className:"text-black font-medium",children:"Learn More"})]})]})}),n.jsxs("div",{className:"bottom-bar-text",children:[n.jsxs("p",{className:"text-gray-900 font-semibold !mb-3",children:["Total price: ",n.jsxs("span",{className:"text-black",children:["",v.toFixed(2)]})]}),n.jsxs("p",{className:"text-gray-600 text-sm !mb-3",children:["Deposit due today: ",n.jsxs("span",{className:"font-medium text-black",children:["",k.toFixed(2)]})]}),n.jsxs("p",{className:"text-gray-600 text-sm !mb-3",children:["Service duration: ",n.jsx("span",{className:"font-medium",children:$?n.jsx(W.Button,{active:!0,size:"small",style:{width:"60px",height:"20px"}}):_})]}),n.jsx("input",{name:"service-duration",type:"hidden",value:_})]}),n.jsx("button",{onClick:T,disabled:j||I,className:`bg-[#E05748] !text-white font-medium px-6 py-2 rounded-full transition flex items-center justify-center ${j||I?"cursor-not-allowed opacity-75":"hover:bg-gray-400"}`,style:{minWidth:"150px",height:"40px"},children:j?n.jsx(Ce,{size:"small",className:"mr-2"}):I?n.jsx(Ce,{size:"small",className:"mr-2"}):"Request to Book"})]}),n.jsx("div",{className:"bottom-bar-notice-mobile",children:n.jsxs("span",{className:"flex items-center",children:[n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-black mr-1",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M12 2a10 10 0 1 1-10 10A10 10 0 0 1 12 2zm0 18a8 8 0 1 0-8-8 8 8 0 0 0 8 8zm-1-13a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0zm1 6a1.25 1.25 0 1 1-1.25 1.25A1.25 1.25 0 0 1 12 13z",clipRule:"evenodd"})}),n.jsxs("span",{children:["All deposits paid through FroHub are protected. ",n.jsx("a",{href:"#",className:"text-black font-medium",children:"Learn More"})]})]})})]})})})}var ge={exports:{}},qn=ge.exports,ze;function Un(){return ze||(ze=1,function(e,t){(function(a,s){e.exports=s()})(qn,function(){return function(a,s,i){s.prototype.isBetween=function(h,m,g,x){var v=i(h),S=i(m),j=(x=x||"()")[0]==="(",D=x[1]===")";return(j?this.isAfter(v,g):!this.isBefore(v,g))&&(D?this.isBefore(S,g):!this.isAfter(S,g))||(j?this.isBefore(v,g):!this.isAfter(v,g))&&(D?this.isAfter(S,g):!this.isBefore(S,g))}}})}(ge)),ge.exports}var Gn=Un();const dt=_e(Gn);X.extend(dt);const Wn=({onDateChange:e,bookingNotice:t,initialServiceDuration:a,maxDate:s,unavailableDates:i,unavailableTimes:h,nextAvailableDate:m,allBookings:g})=>{const{availabilityData:x,loading:v}=K(),[S,j]=c.useState(()=>X(m)),[D,I]=c.useState(null),[E,_]=c.useState(0),[p,w]=c.useState(0),[M,$]=c.useState(X());c.useEffect(()=>{m&&j(X(m))},[m]),c.useEffect(()=>{const o=parseInt(a,10)||0,l=Math.floor(o/60),d=o%60;w(`${l}h ${d}m`)},[a]);const Y=o=>{const l=o.format("YYYY-MM-DD"),d=x.filter(b=>b.date===l);if(d.length===0)return!1;const r=g[l]||[],u=d.filter(b=>{const C=`${b.from} - ${b.to}`;if(r.includes(C))return!1;const O=X(`${l} ${b.from}`,"YYYY-MM-DD HH:mm"),R=X(`${l} ${b.to}`,"YYYY-MM-DD HH:mm");return!h.some(({start:G,end:H})=>!G||!H?!1:O.isBetween(G,H,null,"[]")||R.isBetween(G,H,null,"[]")||O.isBefore(G)&&R.isAfter(H))});if(console.log(` Date: ${l} - Possible Slots: ${d.length}, Free Slots: ${u.length}`),u.length===0)return!1;const y=X().add(t,"day");return!(!o.isAfter(y,"day")||s&&!o.isBefore(X(s).add(1,"day")))},k=()=>{const o=M.startOf("month"),l=M.daysInMonth();let d=o.day();d=d===0?6:d-1;const r=[];for(let u=0;u<d;u++)r.push({date:o.subtract(d-u,"day"),isCurrentMonth:!1});for(let u=1;u<=l;u++)r.push({date:o.add(u-1,"day"),isCurrentMonth:!0});return r},T=o=>{if(!Y(o))return;const l=X(o);j(l),I(null),_(0),document.getElementById("extra-charge-container").setAttribute("data-extra-charge","0"),e&&e(l.format("YYYY-MM-DD"))},L=(o,l,d)=>{I(o),_(l),document.getElementById("extra-charge-container").setAttribute("data-extra-charge",l)},A=o=>{$(M.add(o,"month"))},z=Array.isArray(x)?x.filter(o=>{const l=S.format("YYYY-MM-DD");if(o.date!==l)return!1;const d=`${o.from} - ${o.to}`;if((g[l]||[]).includes(d))return!1;const u=X(`${l} ${o.from}`,"YYYY-MM-DD HH:mm"),f=X(`${l} ${o.to}`,"YYYY-MM-DD HH:mm");return!h.some(({start:b,end:C})=>!b||!C?!1:u.isBetween(b,C,null,"[]")||f.isBetween(b,C,null,"[]")||u.isBefore(b)&&f.isAfter(C))}).map(o=>({time:`${o.from} - ${o.to}`,price:Number(o.extra_charge)||0,duration:o.total_duration_minutes||0})):[];console.log(` Selected Date: ${S.format("YYYY-MM-DD")} - Available Time Slots:`,z);const P=o=>X().format("YYYY-MM-DD")===o.format("YYYY-MM-DD"),N=o=>S.format("YYYY-MM-DD")===o.format("YYYY-MM-DD"),B=o=>o.isBefore(X(),"day");return n.jsxs("div",{className:"calendar-container",children:[n.jsxs("div",{className:"calendar-section custom-calendar",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("button",{onClick:()=>A(-1),className:"p-2 hover:bg-gray-200 rounded-full",children:"<"}),n.jsx("div",{className:"text-base font-medium",children:M.format("MMMM YYYY")}),n.jsx("button",{onClick:()=>A(1),className:"p-2 hover:bg-gray-200 rounded-full",children:">"})]}),n.jsx("div",{className:"grid grid-cols-7 mb-2",children:["MON","TUE","WED","THU","FRI","SAT","SUN"].map(o=>n.jsx("div",{className:"text-xs text-gray-500 text-center py-2",children:o},o))}),n.jsx("div",{className:"grid grid-cols-7 gap-1",children:k().map((o,l)=>{const d=Y(o.date),r=!d||B(o.date);return n.jsx("button",{onClick:()=>d&&T(o.date),disabled:r,className:`
                                    w-10 h-10 flex items-center justify-center rounded-full
                                    text-sm font-medium
                                    ${o.isCurrentMonth?"":"text-gray-400"}
                                    ${r?"text-gray-300 cursor-not-allowed":"hover:bg-orange-300"}
                                    ${d?"bg-orange-500 !text-white":""}
                                    ${N(o.date)?"bg-black text-white hover:bg-black":""}
                                    ${P(o.date)&&!N(o.date)?"border border-black":""}
                                `,children:o.date.date()},l)})})]}),n.jsxs("div",{className:"timeslots-section",children:[v?n.jsxs(n.Fragment,{children:[n.jsx("h3",{className:"selected-date",children:X(S).isValid()?S.format("ddd, MMM D YYYY"):"Getting Available Date..."}),n.jsx("div",{className:"timeslots-grid",children:[...Array(4)].map((o,l)=>n.jsx(W.Button,{active:!0,size:"large",block:!0},l))})]}):z.length===0?n.jsx("h3",{className:"selected-date",children:"Sorry, no available time for this service"}):n.jsxs(n.Fragment,{children:[n.jsx("h3",{className:"selected-date",children:S.format("ddd, MMM D YYYY")}),n.jsx("div",{className:"timeslots-grid scrollable-timeslots",children:z.map((o,l)=>n.jsxs("button",{className:`timeslot-button ${D===o.time?"selected":""}`,onClick:()=>L(o.time,o.price,o.duration),children:[n.jsx("span",{children:o.time}),o.price>0&&n.jsxs("span",{className:"extra-charge",children:["+",o.price.toFixed(2)]})]},l))})]}),n.jsx("p",{className:"timezone-info",children:"All times are in London (GMT +01:00)"})]}),n.jsx("div",{id:"extra-charge-container","data-extra-charge":"0",style:{display:"none"}}),n.jsx("input",{type:"hidden",value:S.format("YYYY-MM-DD"),name:"selectedDate"}),n.jsx("input",{type:"hidden",value:D||"",name:"selectedTime"}),n.jsx("input",{type:"hidden",name:"selectedPrice",value:E}),n.jsx("input",{type:"hidden",value:p,name:"total_duration_time"})]})};X.extend(sn);X.extend(dt);const Vn=()=>{const e=c.useRef(null),[t,a]=c.useState(null),[s,i]=c.useState(null),[h,m]=c.useState([]),[g,x]=c.useState([]),[v,S]=c.useState(null),[j,D]=c.useState({}),[I,E]=c.useState([]);c.useRef([]);const{availabilityData:_,setAvailabilityData:p,selectedDate:w,setSelectedDate:M,loading:$,setLoading:Y,addonsChanged:k,setAddonsChanged:T,resetAddonsChanged:L}=K();c.useEffect(()=>{const N=new Date().toISOString().split("T")[0];M(N)},[M]),c.useEffect(()=>{const N=document.querySelector(".frohub_add_to_cart");N&&(e.current=N.dataset.productId)},[]);const A=c.useCallback(()=>{let N=[];const B=document.getElementById("frohub-selected-addon-ids");if(B&&B.value)try{N=JSON.parse(B.value)}catch(o){console.error("Error parsing addon IDs",o),N=[]}return N},[]),z=c.useCallback(async()=>{const N=e.current;if(!N)return;Y(!0);const B=A();te("frohub/get_availibility",o=>{if(o.success){S(o.data.next_available_date),p(o.data.availability),a(o.data.booking_notice),i(o.data.max_date),m(o.data.unavailable_dates||[]),D(o.data.all_bookings||{}),E(o.data.all_booked_days||[]);const l=r=>{if(!r)return null;let u=r.trim();u=u.replace(/\b12:00 am\b/i,"00:00").replace(/\b12:00 pm\b/i,"12:00").replace(/\b(\d):(\d{2}) (am|pm)\b/i,"0$1:$2 $3").replace(/\b(\d{1,2}):(\d{2}) ([ap]m)\b/i,(b,C,F,O)=>{let R=parseInt(C,10);return O.toLowerCase()==="pm"&&R!==12&&(R+=12),O.toLowerCase()==="am"&&R===12&&(R=0),`${R.toString().padStart(2,"0")}:${F}`});const f=["DD/MM/YYYY HH:mm","DD/MM/YYYY hh:mm A","DD/MM/YYYY h:mm A","YYYY-MM-DD HH:mm","YYYY-MM-DD","DD/MM/YYYY"];let y=null;for(let b of f)if(y=X(u,b,!0),y.isValid())return y;return null},d=(o.data.unavailable_dates||[]).map(({start_date:r,end_date:u})=>{const f=l(r),y=l(u);return!f||!y?null:{start:f,end:y}}).filter(Boolean);x(d)}else console.error("Error fetching availability:",o.message);Y(!1)},{product_id:N,date:w,addons_id:B}),L()},[w,p,Y,L,A]);c.useEffect(()=>{z()},[z,w,k]);const P=N=>{M(N)};return n.jsxs("div",{className:"relative",children:[n.jsx("p",{children:"Search availability and select a time slot"}),n.jsx(Wn,{data:_,onDateChange:P,bookingNotice:t,maxDate:s,unavailableDates:h,unavailableTimes:g,nextAvailableDate:v,allBookings:j,allBookedDays:I})]})};var ue={},He;function Xn(){if(He)return ue;He=1;var e=Dt();return ue.createRoot=e.createRoot,ue.hydrateRoot=e.hydrateRoot,ue}var ce=Xn();const Kn={"home-based":n.jsx("i",{className:"fas fa-home text-[32px]"}),"salon-based":n.jsx("i",{className:"fas fa-chair-office text-[32px]"}),mobile:n.jsx("i",{className:"fas fa-car-side text-[32px]"})},Jn={"home-based":"You travel to your stylists home","salon-based":"You travel to your stylists salon",mobile:"Your stylist travels to you"},qe=({service:e,selectedService:t,handleSelectService:a,loading:s})=>{if(s)return n.jsxs("div",{className:"flex items-center justify-between gap-[1rem] w-full p-1 border border-gray-200 rounded-lg",children:[n.jsx(W.Avatar,{size:48,shape:"circle",active:!0}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx(W.Input,{style:{width:80,marginTop:8},active:!0}),n.jsx(W.Input,{style:{width:80,marginTop:4},active:!0})]})]});if(!e)return null;const i=e.toLowerCase(),h=(t==null?void 0:t.toLowerCase())===i;return n.jsxs("div",{className:`flex items-center justify-center w-full p-1 border rounded-lg cursor-pointer transition-all duration-200 ${h?"bg-gray-200 border-gray-500":"border-gray-300"}`,onClick:()=>a(i),children:[n.jsx("input",{type:"radio",name:"serviceType",value:i,checked:h,onChange:()=>a(i),className:"hidden"}),n.jsxs("label",{className:"flex items-center gap-[1rem] cursor-pointer w-full h-full p-1 rounded-lg transition-all duration-200",children:[Kn[i]||n.jsx("i",{className:"fas fa-home text-[32px]"}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-semibold text-lg mt-2",children:e}),n.jsx("span",{className:"text-sm text-gray-600",children:Jn[i]})]})]})]})};function Zn(){const e=new URLSearchParams(window.location.search),t=e.get("radius"),a=e.get("location_name"),s=e.get("lat"),i=e.get("lng");if(t&&a&&s&&i){const h={radius:t,location_name:decodeURIComponent(a),lat:s,lng:i};document.cookie=`locationData=${encodeURIComponent(JSON.stringify(h))}; path=/`}}function Qn(){const e=document.cookie.match(new RegExp("(^| )locationData=([^;]+)"));return e?JSON.parse(decodeURIComponent(e[2])):null}function ea({partnerId:e}){const[t,a]=c.useState(""),[s,i]=c.useState(!1),[h,m]=c.useState(null),[g,x]=c.useState(null),[v,S]=c.useState(!1),[j,D]=c.useState(!0),[I,E]=c.useState(""),[_,p]=c.useState(null),{setMobileTravelFee:w,setReadyForMobile:M,totalService:$}=K(),Y=c.useRef(null),k=c.useRef(null),[T,L]=c.useState(null);c.useEffect(()=>{(()=>{const l=Qn();l&&l.lat&&l.lng&&p({latitude:parseFloat(l.lat),longitude:parseFloat(l.lng),name:l.location_name})})(),e&&A()},[e]),c.useEffect(()=>{const o=()=>{if(window.google&&window.google.maps&&window.google.maps.places&&Y.current&&!k.current){const d={componentRestrictions:{country:"uk"},types:["geocode"]};k.current=new window.google.maps.places.Autocomplete(Y.current,d),k.current.addListener("place_changed",()=>{const r=k.current.getPlace();if(!r.geometry){console.error("No geometry for this place");return}a(r.formatted_address);const u={latitude:r.geometry.location.lat(),longitude:r.geometry.location.lng(),address:r.formatted_address};L(u)})}};o();const l=setInterval(()=>{k.current||o()},500);return()=>{clearInterval(l),k.current&&(window.google.maps.event.clearInstanceListeners(k.current),k.current=null)}},[]),c.useEffect(()=>{T&&g&&N(T)},[T,g]);const A=()=>{D(!0),E(""),te("frohub/get_mobile_location_data",o=>{if(console.log("Partner location response:",o),o.success){let l,d=[];o.data&&o.data.data?l=o.data.data:o.data?l=o.data:l=o,l.radius_fees?d=l.radius_fees:l.radiusFees?d=l.radiusFees:o.radius_fees&&(d=o.radius_fees);const r=parseFloat(l.latitude||l.lat||0),u=parseFloat(l.longitude||l.lng||0);if(r&&u&&d&&d.length>0){const f={latitude:r,longitude:u,radiusFees:d.map(y=>({radius:parseFloat(y.radius||y.distance||0),price:parseFloat(y.price||y.fee||0)}))};console.log("Setting partner location:",f),x(f)}else console.error("Invalid location data structure:",l),E("Failed to parse partner location data.")}else E("Failed to fetch partner location."),console.error("Error fetching location:",o.message||"Unknown error");D(!1)},{partner_id:e})};c.useEffect(()=>{g&&_&&!j&&P()},[g,_,j]);const z=(o,l,d,r)=>{const f=(d-o)*Math.PI/180,y=(r-l)*Math.PI/180,b=Math.sin(f/2)*Math.sin(f/2)+Math.cos(o*Math.PI/180)*Math.cos(d*Math.PI/180)*Math.sin(y/2)*Math.sin(y/2);return 3958.8*(2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b)))},P=()=>{if(m(null),i(!1),E(""),S(!0),!g){E("Partner location not loaded."),S(!1);return}const o=z(g.latitude,g.longitude,_.latitude,_.longitude);console.log("Distance calculated:",o,"miles"),console.log("Partner radius fees:",g.radiusFees);let l=null;for(const d of g.radiusFees)if(o<=d.radius){l=d.price;break}l!==null?(i(!0),m(l),w(l),K.setState({readyForMobile:!0})):(i(!1),$<1?E("Oops! They don't cover your area. Try another stylist nearby."):E("Oops! Mobile's not available in your area, but you can still book at their home or salon"),w(0),K.setState({readyForMobile:!1})),S(!1)},N=o=>{if(console.log("Checking location:",o),console.log("Partner location available:",g),m(null),i(!1),E(""),S(!0),!g){console.error("Partner location not loaded when checking location"),E("Partner location not loaded. Please try again."),S(!1);return}const l=z(g.latitude,g.longitude,o.latitude,o.longitude);console.log("Distance calculated:",l,"miles"),console.log("Partner radius fees:",g.radiusFees);let d=null;for(const r of g.radiusFees)if(l<=r.radius){d=r.price;break}d!==null?(i(!0),m(d),w(d),K.setState({readyForMobile:!0})):(i(!1),$<1?E("Oops! They don't cover your area. Try another stylist nearby."):E("Oops! Mobile's not available in your area, but you can still book at their home or salon"),w(0),K.setState({readyForMobile:!1})),S(!1)},B=o=>{a(o.target.value)};return j?n.jsxs("div",{className:"mt-4 mb-6 p-4 border border-gray-300 rounded-lg bg-white",children:[n.jsx(W.Button,{block:!0,active:!0,className:"h-10"}),n.jsx(W.Input,{active:!0,className:"w-full h-6 mb-3"})]}):n.jsxs("div",{className:"mt-4 mb-6 p-4 border border-gray-300 rounded-lg bg-white",children:[_?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"font-medium mt-2 mb-3",children:_.name}),n.jsxs("div",{children:[v&&n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Checking availability..."}),s&&h!==null&&n.jsxs("div",{className:"flex items-center text-green-600 font-semibold mt-2",children:[n.jsx(Oe,{className:"w-5 h-5 mr-1"}),"You are inside the service area."]}),I&&n.jsxs("div",{className:"flex items-center text-red-500 font-semibold mt-2",children:[n.jsx(Le,{className:"w-5 h-5 mr-1"}),I]})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-sm text-gray-700",children:"To check if you are within their mobile service area, enter your location or postcode."}),n.jsxs("div",{className:"flex justify-start items-center gap-6 mt-3",children:[n.jsx("div",{className:"w-full",children:n.jsx("input",{ref:Y,type:"text",placeholder:"Enter location or postcode",value:t,onChange:B,className:"w-full px-4 py-2 text-gray-600 border rounded-md bg-gray-100 border-gray-300 focus:ring focus:ring-indigo-300 focus:outline-none"})}),n.jsxs("div",{children:[v&&n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Checking location..."}),s&&h!==null&&n.jsxs("div",{className:"flex items-center text-green-600 font-semibold mt-2",children:[n.jsx(Oe,{className:"w-5 h-5 mr-1"}),"Yasss! You're in the service area - this stylist can come to you!"]}),I&&n.jsxs("div",{className:"flex items-center text-red-500 font-semibold mt-2",children:[n.jsx(Le,{className:"w-5 h-5 mr-1"}),I]})]})]})]}),s&&h!==null&&n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"!mt-4 text-lg font-semibold",children:["Mobile Travel Fee: ",n.jsxs("span",{className:"text-gray-900",children:["+",h.toFixed(2)]})]}),n.jsx("input",{type:"hidden",name:"travelFee",value:h.toFixed(2)})]}),_&&n.jsxs("button",{onClick:()=>{document.cookie="frohub_location=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",p(null),m(null),i(!1)},className:"flex items-center gap-1 text-sm text-red-600 hover:text-red-800 mt-2",children:[n.jsx(Yn,{className:"w-4 h-4"}),"Reset Location"]})]})}function ta({productId:e,partnerId:t,onServiceTypeChange:a}){const[s,i]=c.useState([]),[h,m]=c.useState(null),[g,x]=c.useState(!0),{setTotalService:v}=K();c.useEffect(()=>{e&&(x(!0),te("frohub/get_service_type",j=>{var D,I;if(j.success&&((D=j.data)!=null&&D.data)&&Array.isArray(j.data.data)){const E=((I=j.data.data[0])==null?void 0:I.toLowerCase())||null;i(j.data.data),v(j.data.data.length),m(E),a(E)}x(!1)},{product_id:e}))},[e]);const S=j=>{const D=j.toLowerCase();m(D),a(D)};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:["Service Type",n.jsx("form",{children:n.jsx("div",{className:"grid sm:grid-cols-1 md:grid-cols-3 gap-4 mt-3 mb-6",children:g?Array.from({length:3}).map((j,D)=>n.jsx(qe,{loading:!0},D)):s.map(j=>n.jsx(qe,{service:j,selectedService:h,handleSelectService:S,loading:!1},j.toLowerCase()))})})]}),h==="mobile"&&n.jsx(ea,{partnerId:t})]})}const na=({addOn:e,selectedAddOns:t,handleSelectAddOn:a,loading:s})=>s?n.jsx("div",{className:"px-4 py-2 border rounded-full",children:n.jsx(W.Input,{style:{width:150},active:!0})}):e?n.jsxs("label",{className:`inline-flex items-center cursor-pointer px-4 py-2 border rounded-full ${t.includes(e)?"fhcheck-selected border-gray-500":"border-gray-300"}`,children:[n.jsx("input",{type:"checkbox",className:"hidden",checked:t.includes(e),onChange:()=>a(e),"data-add-on-name":e.name,"data-add-on-id":e.id,"data-price":e.price,"data-duration":e.duration_minutes}),n.jsxs("span",{className:"text-gray-700 text-sm",children:[e.name," + ",e.price,e.duration_minutes>0&&` (${e.duration_minutes} mins)`]})]}):null;function aa({productId:e,setProductId:t,selectedAddOns:a,setSelectedAddOns:s,setProductPrice:i}){const{selectedDate:h,setAvailabilityData:m}=K(),[g,x]=c.useState([]),[v,S]=c.useState(null),[j,D]=c.useState(!0);c.useEffect(()=>{(()=>{const _=document.querySelector(".frohub_add_to_cart");_&&t(_.dataset.productId)})()},[t]),c.useEffect(()=>{e&&(()=>{D(!0),te("frohub/get_addons",_=>{_.success?(x(_.data.add_ons||[]),i(parseFloat(_.data.product_price)||0)):(console.error("Error fetching add-ons:",_.message),S(_.message)),D(!1)},{product_id:e})})()},[e,i]),c.useEffect(()=>{const E=a.map(p=>p.id),_=document.getElementById("frohub-selected-addon-ids");_&&(_.value=JSON.stringify(E))},[a]);const I=E=>{K.setState({loading:!0});const _=parseInt(E.duration_minutes,10)||0;s(p=>{let w;p.some($=>$.id===E.id)?(i($=>$-parseFloat(E.price)),K.setState($=>({addonTotalTime:($.addonTotalTime||0)-_})),w=p.filter($=>$.id!==E.id)):(i($=>$+parseFloat(E.price)),K.setState($=>({addonTotalTime:($.addonTotalTime||0)+_})),w=[...p,E]);const M=w.map($=>$.id);return te("frohub/get_availibility",$=>{if($.success){const Y=K.getState().availabilityData;JSON.stringify(Y)!==JSON.stringify($.data.availability)&&(m($.data.availability),K.setState({loading:!1}))}else console.error("Error fetching availability:",$.message),K.setState({loading:!1})},{product_id:e,date:h,addons_id:M}),w})};return n.jsxs("div",{children:[n.jsx("input",{type:"hidden",id:"frohub-selected-addon-ids",name:"frohub-selected-addon-ids",value:JSON.stringify(a.map(E=>E.id))}),j?n.jsx("div",{className:"flex gap-2 !mb-3",children:Array.from({length:3}).map((E,_)=>n.jsx(W.Button,{active:!0,style:{width:150,height:40,borderRadius:20}},_))}):e?n.jsx(n.Fragment,{children:v?n.jsxs("p",{children:["Error: ",v]}):n.jsx(n.Fragment,{children:Array.isArray(g)&&g.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mb-3",children:"Select add-ons"}),n.jsx("ul",{className:"flex justify-start items-start gap-2 !list-none !p-0 !m-0 !mb-3",children:g.map(E=>n.jsx("li",{children:n.jsx(na,{addOn:E,selectedAddOns:a,handleSelectAddOn:I})},E.id))})]})})}):n.jsx("p",{children:"Loading add-ons..."})]})}function sa(){const[e,t]=c.useState(null),[a,s]=c.useState(null),[i,h]=c.useState([]),[m,g]=c.useState(0),[x,v]=c.useState(""),{setProductId:S,setSelectedAddOns:j,setProductPrice:D,setSelectedServiceType:I}=K();c.useEffect(()=>{const _=document.querySelector(".frohub_add_to_cart");if(_){const p=_.getAttribute("data-partner-id");p&&t(p)}},[]),c.useEffect(()=>{S(a)},[a,S]),c.useEffect(()=>{j(i)},[i,j]),c.useEffect(()=>{D(m)},[m,D]),c.useEffect(()=>{I(x)},[x,I]);const E=_=>{v(_)};return n.jsxs("div",{children:[n.jsx(aa,{productId:a,setProductId:s,selectedAddOns:i,setSelectedAddOns:h,setProductPrice:g}),n.jsx(ta,{productId:a,partnerId:e,onServiceTypeChange:E})]})}Zn();const we=document.querySelector(".frohub_add_to_cart");if(we){const e=we.getAttribute("data-key");ce.createRoot(we).render(n.jsx(sa,{dataKey:e}))}const ra=document.querySelectorAll(".frohub_calender");ra.forEach(e=>{const t=e.getAttribute("data-key");ce.createRoot(e).render(n.jsx(Vn,{dataKey:t}))});const oa=document.querySelectorAll(".request_book_button");oa.forEach(e=>{const t=e.getAttribute("data-key");ce.createRoot(e).render(n.jsx(Hn,{dataKey:t}))});const ia=document.querySelectorAll(".customer_message");ia.forEach(e=>{const t=e.getAttribute("data-key");ce.createRoot(e).render(n.jsx(Mn,{dataKey:t}))});const ca=document.querySelectorAll(".customer_message_mobile");ca.forEach(e=>{const t=e.getAttribute("data-key");ce.createRoot(e).render(n.jsx(_n,{dataKey:t}))});
